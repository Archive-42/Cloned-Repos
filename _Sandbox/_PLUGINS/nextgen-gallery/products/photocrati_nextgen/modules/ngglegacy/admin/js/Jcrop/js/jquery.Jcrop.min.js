"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e){e.Jcrop=function(t,n){function o(e){return parseInt(e)+"px"}function r(e){return parseInt(e)+"%"}function s(e){return R.baseClass+"-"+e}function a(t){var n=e(t).offset();return[n.left,n.top]}function c(e){return[e.pageX-oe[0],e.pageY-oe[1]]}function u(e){e!=q&&(ie.setCursor(e),q=e)}function d(e,t){if(oe=a(B),ie.setCursor("move"==e?e:e+"-resize"),"move"==e)return ie.activateHandlers(l(t),g);var n=re.getFixed(),o=p(e),r=re.getCorner(p(o));re.setPressed(re.getCorner(o)),re.setCurrent(r),ie.activateHandlers(f(e,n),g)}function f(e,t){return function(n){if(R.aspectRatio)switch(e){case"e":case"w":n[1]=t.y+1;break;case"n":case"s":n[0]=t.x+1}else switch(e){case"e":case"w":n[1]=t.y2;break;case"n":case"s":n[0]=t.x2}re.setCurrent(n),se.update()}}function l(e){var t=e;return ae.watchKeys(),function(e){re.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,se.update()}}function p(e){switch(e){case"n":return"sw";case"s":case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function v(e){return function(t){return!R.disabled&&(!("move"==e&&!R.allowMove)&&(Y=!0,d(e,c(t)),t.stopPropagation(),t.preventDefault(),!1))}}function b(e){return{x:parseInt(e.x*Q),y:parseInt(e.y*X),x2:parseInt(e.x2*Q),y2:parseInt(e.y2*X),w:parseInt(e.w*Q),h:parseInt(e.h*X)}}function g(e){var t=re.getFixed();t.w>R.minSelect[0]&&t.h>R.minSelect[1]?(se.enableHandles(),se.done()):se.release(),ie.setCursor(R.allowSelect?"crosshair":"default")}function y(e){if(R.disabled)return!1;if(!R.allowSelect)return!1;Y=!0,oe=a(B),se.disableHandles(),u("crosshair");var t=c(e);return re.setPressed(t),ie.activateHandlers(m,g),ae.watchKeys(),se.update(),e.stopPropagation(),e.preventDefault(),!1}function m(e){re.setCurrent(e),se.update()}function x(){var t=e("<div></div>").addClass(s("tracker"));return-1!==navigator.appName.indexOf("Internet Explorer")&&t.css({opacity:0,backgroundColor:"white"}),t}function S(e){function t(){window.setTimeout(g,u)}var n=e[0]/Q,o=e[1]/X,r=e[2]/Q,s=e[3]/X;if(!G){var i=re.flipCoords(n,o,r,s),a=re.getFixed(),c=initcr=[a.x,a.y,a.x2,a.y2],u=R.animationDelay,d=c[0],f=c[1],r=c[2],s=c[3],l=i[0]-initcr[0],p=i[1]-initcr[1],h=i[2]-initcr[2],w=i[3]-initcr[3],v=0,b=R.swingSpeed;se.animMode(!0);var g=function(){return function(){v+=(100-v)/b,c[0]=d+v/100*l,c[1]=f+v/100*p,c[2]=r+v/100*h,c[3]=s+v/100*w,v<100?t():se.done(),v>=99.8&&(v=100),z(c)}}();t()}}function C(e){z([e[0]/Q,e[1]/X,e[2]/Q,e[3]/X])}function z(e){re.setPressed([e[0],e[1]]),re.setCurrent([e[2],e[3]]),se.update()}function I(t){"object"!=_typeof(t)&&(t={}),R=e.extend(R,t),"function"!=typeof R.onChange&&(R.onChange=function(){}),"function"!=typeof R.onSelect&&(R.onSelect=function(){})}function k(){return b(re.getFixed())}function M(){return re.getFixed()}function O(e){I(e),E()}function H(){R.disabled=!0,se.disableHandles(),se.setCursor("default"),ie.setCursor("default")}function D(){R.disabled=!1,E()}function F(){se.done(),ie.activateHandlers(null,null)}function P(){V.remove(),j.show()}function E(e){R.allowResize?e?se.enableOnly():se.enableHandles():se.disableHandles(),ie.setCursor(R.allowSelect?"crosshair":"default"),se.setCursor(R.allowMove?"move":"default"),V.css("backgroundColor",R.bgColor),"setSelect"in R&&(C(n.setSelect),se.done(),delete R.setSelect),"trueSize"in R&&(Q=R.trueSize[0]/K,X=R.trueSize[1]/_),N=R.maxSize[0]||0,W=R.maxSize[1]||0,A=R.minSize[0]||0,T=R.minSize[1]||0,"outerImage"in R&&(B.attr("src",R.outerImage),delete R.outerImage),se.refresh()}var t=t,n=n;"object"!==_typeof(t)&&(t=e(t)[0]),"object"!==_typeof(n)&&(n={}),"trackDocument"in n||(-1!==navigator.appName.indexOf("Internet Explorer")?n.trackDocument=-1!==navigator.appVersion.indexOf("MSIE 8"):n.trackDocument=!0),"keySupport"in n||(n.keySupport=-1!==navigator.appName.indexOf("Internet Explorer"));var J={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}},R=J;I(n);var j=e(t),B=j.clone().removeAttr("id").css({position:"absolute"});B.width(j.width()),B.height(j.height()),j.after(B).hide(),function(e,t,n){var o=e.width(),r=e.height();o>t&&t>0&&(o=t,r=t/e.width()*e.height()),r>n&&n>0&&(r=n,o=n/e.height()*e.width()),Q=e.width()/o,X=e.height()/r,e.width(o).height(r)}(B,R.boxWidth,R.boxHeight);var K=B.width(),_=B.height(),V=e("<div />").width(K).height(_).addClass(s("holder")).css({position:"relative",backgroundColor:R.bgColor}).insertAfter(j).append(B);R.addClass&&V.addClass(R.addClass);var N,W,A,T,Q,X,Y,q,G,L,U=e("<img />").attr("src",B.attr("src")).css("position","absolute").width(K).height(_),Z=e("<div />").width(r(100)).height(r(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append(U),$=e("<div />").width(r(100)).height(r(100)).css("zIndex",320),ee=e("<div />").css({position:"absolute",zIndex:300}).insertBefore(B).append(Z,$),te=R.boundary,ne=x().width(K+2*te).height(_+2*te).css({position:"absolute",top:o(-te),left:o(-te),zIndex:290}).on("mousedown",y),oe=a(B),re=function(){function e(e){var e=i(e);v=l=e[0],b=p=e[1]}function t(e){var e=i(e);d=e[0]-v,f=e[1]-b,v=e[0],b=e[1]}function n(){return[d,f]}function o(e){var t=e[0],n=e[1];0>l+t&&(t-=t+l),0>p+n&&(n-=n+p),_<b+n&&(n+=_-(b+n)),K<v+t&&(t+=K-(v+t)),l+=t,v+=t,p+=n,b+=n}function r(e){var t=s();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function s(){if(!R.aspectRatio)return c();var e,t,n=R.aspectRatio,o=R.minSize[0]/Q,r=(R.minSize[1],R.maxSize[0]/Q),s=R.maxSize[1]/X,i=v-l,d=b-p,f=Math.abs(i),g=Math.abs(d),y=f/g;return 0==r&&(r=10*K),0==s&&(s=10*_),y<n?(t=b,w=g*n,e=i<0?l-w:w+l,e<0?(e=0,h=Math.abs((e-l)/n),t=d<0?p-h:h+p):e>K&&(e=K,h=Math.abs((e-l)/n),t=d<0?p-h:h+p)):(e=v,h=f/n,t=d<0?p-h:p+h,t<0?(t=0,w=Math.abs((t-p)*n),e=i<0?l-w:w+l):t>_&&(t=_,w=Math.abs(t-p)*n,e=i<0?l-w:w+l)),e>l?(e-l<o?e=l+o:e-l>r&&(e=l+r),t=t>p?p+(e-l)/n:p-(e-l)/n):e<l&&(l-e<o?e=l-o:l-e>r&&(e=l-r),t=t>p?p+(l-e)/n:p-(l-e)/n),e<0?(l-=e,e=0):e>K&&(l-=e-K,e=K),t<0?(p-=t,t=0):t>_&&(p-=t-_,t=_),last=u(a(l,p,e,t))}function i(e){return e[0]<0&&(e[0]=0),e[1]<0&&(e[1]=0),e[0]>K&&(e[0]=K),e[1]>_&&(e[1]=_),[e[0],e[1]]}function a(e,t,n,o){var r=e,s=n,i=t,a=o;return n<e&&(r=n,s=e),o<t&&(i=o,a=t),[Math.round(r),Math.round(i),Math.round(s),Math.round(a)]}function c(){var e=v-l,t=b-p;if(N&&Math.abs(e)>N&&(v=e>0?l+N:l-N),W&&Math.abs(t)>W&&(b=t>0?p+W:p-W),T&&Math.abs(t)<T&&(b=t>0?p+T:p-T),A&&Math.abs(e)<A&&(v=e>0?l+A:l-A),l<0&&(v-=l,l-=l),p<0&&(b-=p,p-=p),v<0&&(l-=v,v-=v),b<0&&(p-=b,b-=b),v>K){var n=v-K;l-=n,v-=n}if(b>_){var n=b-_;p-=n,b-=n}if(l>K){var n=l-_;b-=n,p-=n}if(p>_){var n=p-_;b-=n,p-=n}return u(a(l,p,v,b))}function u(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var d,f,l=0,p=0,v=0,b=0;return{flipCoords:a,setPressed:e,setCurrent:t,getOffset:n,moveOffset:o,getCorner:r,getFixed:s}}(),se=function(){function t(t){var n=e("<div />").css({position:"absolute",opacity:R.borderOpacity}).addClass(s(t));return Z.append(n),n}function n(t,n){var o=e("<div />").on("mousedown",v(t)).css({cursor:t+"-resize",position:"absolute",zIndex:n});return $.append(o),o}function a(e){return n(e,M++).css({top:o(1-F),left:o(1-F),opacity:R.handleOpacity}).addClass(s("handle"))}function c(e){var t=R.handleSize,s=F,i=t,a=t,c=s,u=s;switch(e){case"n":case"s":a=r(100);break;case"e":case"w":i=r(100)}return n(e,M++).width(a).height(i).css({top:o(1-c),left:o(1-u)})}function u(e){for(i in e)H[e[i]]=a(e[i])}function d(e){var t=Math.round(e.h/2-F),n=Math.round(e.w/2-F),r=(west=1-F,e.w-F),s=e.h-F;"e"in H&&H.e.css({top:o(t),left:o(r)})&&H.w.css({top:o(t)})&&H.s.css({top:o(s),left:o(n)})&&H.n.css({left:o(n)}),"ne"in H&&H.ne.css({left:o(r)})&&H.se.css({top:o(s),left:o(r)})&&H.sw.css({top:o(s)}),"b"in H&&H.b.css({top:o(s)})&&H.r.css({left:o(r)})}function f(e,t){U.css({top:o(-t),left:o(-e)}),ee.css({top:o(t),left:o(e)})}function l(e,t){ee.width(e).height(t)}function p(){var e=re.getFixed();re.setPressed([e.x,e.y]),re.setCurrent([e.x2,e.y2]),h()}function h(){if(k)return w()}function w(){var e=re.getFixed();l(e.w,e.h),f(e.x,e.y),R.drawBorders&&O.right.css({left:o(e.w-1)})&&O.bottom.css({top:o(e.h-1)}),D&&d(e),k||g(),R.onChange(b(e))}function g(){ee.show(),B.css("opacity",R.bgOpacity),k=!0}function y(){C(),ee.hide(),B.css("opacity",1),k=!1}function m(){D&&(d(re.getFixed()),$.show())}function S(){if(D=!0,R.allowResize)return d(re.getFixed()),$.show(),!0}function C(){D=!1,$.hide()}function z(e){(G=e)?C():S()}function I(){z(!1),p()}var k,M=370,O={},H={},D=!1,F=R.handleOffset;R.drawBorders&&(O={top:t("hline").css("top",o(-1!==navigator.appVersion.indexOf("MSIE 8")?-1:0)),bottom:t("hline"),left:t("vline"),right:t("vline")}),R.dragEdges&&(H.t=c("n"),H.b=c("s"),H.r=c("e"),H.l=c("w")),R.sideHandles&&u(["n","s","e","w"]),R.cornerHandles&&u(["sw","nw","ne","se"]);var P=x().on("mousedown",v("move")).css({cursor:"move",position:"absolute",zIndex:360});return Z.append(P),C(),{updateVisible:h,update:w,release:y,refresh:p,setCursor:function(e){P.css("cursor",e)},enableHandles:S,enableOnly:function(){D=!0},showHandles:m,disableHandles:C,animMode:z,done:I}}(),ie=function(){function t(){ne.css({zIndex:450}),d&&e(document).on("mousemove",o).on("mouseup",r)}function n(){ne.css({zIndex:290}),d&&e(document).off("mousemove",o).off("mouseup",r)}function o(e){a(c(e))}function r(e){return e.preventDefault(),e.stopPropagation(),Y&&(Y=!1,u(c(e)),R.onSelect(b(re.getFixed())),n(),a=function(){},u=function(){}),!1}function s(e,n){return Y=!0,a=e,u=n,t(),!1}function i(e){ne.css("cursor",e)}var a=function(){},u=function(){},d=R.trackDocument;return d||ne.on("mousemove",o).on("mouseup",r).on("mouseout",r),B.before(ne),{activateHandlers:s,setCursor:i}}(),ae=function(){function t(){R.keySupport&&(s.show(),s.trigger("focus"))}function n(e){s.hide()}function o(e,t,n){R.allowMove&&(re.moveOffset([t,n]),se.updateVisible()),e.preventDefault(),e.stopPropagation()}function r(e){if(e.ctrlKey)return!0;L=!!e.shiftKey;var t=L?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:se.release();break;case 9:return!0}return nothing(e)}var s=e('<input type="radio" />').css({position:"absolute",left:"-30px"}).on("keypress",r).on("blur",n),i=e("<div />").css({position:"absolute",overflow:"hidden"}).append(s);return R.keySupport&&i.insertBefore(B),{watchKeys:t}}();$.hide(),E(!0);var ce={animateTo:S,setSelect:C,setOptions:O,tellSelect:k,tellScaled:M,disable:H,enable:D,cancel:F,focus:ae.watchKeys,getBounds:function(){return[K*Q,_*X]},getWidgetSize:function(){return[K,_]},release:se.release,destroy:P};return j.data("Jcrop",ce),ce},e.fn.Jcrop=function(t){function n(n){var o=t.useImg||n.src,r=new Image;r.onload=function(){e.Jcrop(n,t)},r.src=o}return"object"!==_typeof(t)&&(t={}),this.each(function(){if(e(this).data("Jcrop")){if("api"==t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else n(this)}),this}}(jQuery);