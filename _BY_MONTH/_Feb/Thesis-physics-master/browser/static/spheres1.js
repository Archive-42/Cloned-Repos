function k(){this.f=this.velocityY=this.velocityX=this.d=this.b=this.c=0.1;this.g=5.5;this.e=3.5}k.prototype.step=function(b){this.c+=this.velocityX*b;this.b+=this.velocityY*b;this.d+=this.f*b};function l(){this.a=Array(1E3);for(var b=0;1E3>b;b++){var a=new k;a.c=400*(Math.random()-0.5);a.b=200*(Math.random()-0.5);a.d=100*(Math.random()-0.5);a.velocityX=1*(Math.random()-0.5);a.velocityY=1*(Math.random()-0.5);a.f=1*(Math.random()-0.5);this.a[b]=a}this.h=0}
l.prototype.step=function(){for(var b=0;1E3>b;b++){var a=this.a[b];a.velocityY-=0.1;a=this.a[b];-100>a.b-a.g&&(a.velocityY*=-0.8);this.a[b].step(1);for(a=0;1E3>a;a++)if(b!=a&&Math.sqrt((this.a[b].c-this.a[a].c)*(this.a[b].c-this.a[a].c)+(this.a[b].b-this.a[a].b)*(this.a[b].b-this.a[a].b)+(this.a[b].d-this.a[a].d)*(this.a[b].d-this.a[a].d))<this.a[b].g+this.a[a].g){this.h++;var c=this.a[b],d=this.a[a],f=c.c-d.c,g=c.b-d.b,h=c.d-d.d,e=Math.sqrt(f*f+g*g+h*h),f=f/e,g=g/e,h=h/e,e=2*(c.velocityX*f+c.velocityY*
g+c.f*h-(d.velocityX*f+d.velocityY*g+d.f*h))/(c.e+d.e);c.velocityX-=e*d.e*f;c.velocityY-=e*d.e*g;c.f-=e*d.e*h;d.velocityX+=e*c.e*f;d.velocityY+=e*c.e*g;d.f+=e*c.e*h}}};for(var m=new l,n=0;1E3>n;n++)m.step();print(m.h);
