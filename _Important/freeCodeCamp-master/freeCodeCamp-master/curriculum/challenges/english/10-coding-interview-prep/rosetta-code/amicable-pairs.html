<h1 id="description">–description–</h1>
<p>Two integers <span class="math inline"><em>N</em></span> and <span class="math inline"><em>M</em></span> are said to be <a href="https://en.wikipedia.org/wiki/Amicable%20numbers" title="wp: Amicable numbers">amicable pairs</a> if <span class="math inline">$N \\neq M$</span> and the sum of the <a href="https://rosettacode.org/wiki/Proper%20divisors" title="Proper divisors">proper divisors</a> of <span class="math inline"><em>N</em></span> (<span class="math inline">$\\mathrm{sum}(\\mathrm{propDivs}(N))$</span>) <span class="math inline"> = <em>M</em></span> as well as <span class="math inline">$\\mathrm{sum}(\\mathrm{propDivs}(M)) = N$</span>.</p>
<p><strong>Example:</strong></p>
<p><strong>1184</strong> and <strong>1210</strong> are an amicable pair, with proper divisors:</p>
<ul>
<li>
1, 2, 4, 8, 16, 32, 37, 74, 148, 296, 592 and
</li>
<li>
1, 2, 5, 10, 11, 22, 55, 110, 121, 242, 605 respectively.
</li>
</ul>
<h1 id="instructions">–instructions–</h1>
<p>Calculate and show here the Amicable pairs below 20,000 (there are eight).</p>
<h1 id="hints">–hints–</h1>
<p><code>amicablePairsUpTo</code> should be a function.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">assert</span>(<span class="kw">typeof</span> amicablePairsUpTo <span class="op">===</span> <span class="st">&#39;function&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p><code>amicablePairsUpTo(300)</code> should return <code>[[220,284]]</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">amicablePairsUpTo</span>(<span class="dv">300</span>)<span class="op">,</span> answer300)<span class="op">;</span></a></code></pre></div>
<p><code>amicablePairsUpTo(3000)</code> should return <code>[[220,284],[1184,1210],[2620,2924]]</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">amicablePairsUpTo</span>(<span class="dv">3000</span>)<span class="op">,</span> answer3000)<span class="op">;</span></a></code></pre></div>
<p><code>amicablePairsUpTo(20000)</code> should return <code>[[220,284],[1184,1210],[2620,2924],[5020,5564],[6232,6368],[10744,10856],[12285,14595],[17296,18416]]</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">amicablePairsUpTo</span>(<span class="dv">20000</span>)<span class="op">,</span> answer20000)<span class="op">;</span></a></code></pre></div>
<h1 id="seed">–seed–</h1>
<h2 id="after-user-code">–after-user-code–</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> answer300 <span class="op">=</span> [[<span class="dv">220</span><span class="op">,</span> <span class="dv">284</span>]]<span class="op">;</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">const</span> answer3000 <span class="op">=</span> [</a>
<a class="sourceLine" id="cb5-3" title="3">  [<span class="dv">220</span><span class="op">,</span> <span class="dv">284</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-4" title="4">  [<span class="dv">1184</span><span class="op">,</span> <span class="dv">1210</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-5" title="5">  [<span class="dv">2620</span><span class="op">,</span> <span class="dv">2924</span>]</a>
<a class="sourceLine" id="cb5-6" title="6">]<span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="kw">const</span> answer20000 <span class="op">=</span> [</a>
<a class="sourceLine" id="cb5-8" title="8">  [<span class="dv">220</span><span class="op">,</span> <span class="dv">284</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-9" title="9">  [<span class="dv">1184</span><span class="op">,</span> <span class="dv">1210</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-10" title="10">  [<span class="dv">2620</span><span class="op">,</span> <span class="dv">2924</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-11" title="11">  [<span class="dv">5020</span><span class="op">,</span> <span class="dv">5564</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-12" title="12">  [<span class="dv">6232</span><span class="op">,</span> <span class="dv">6368</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-13" title="13">  [<span class="dv">10744</span><span class="op">,</span> <span class="dv">10856</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-14" title="14">  [<span class="dv">12285</span><span class="op">,</span> <span class="dv">14595</span>]<span class="op">,</span></a>
<a class="sourceLine" id="cb5-15" title="15">  [<span class="dv">17296</span><span class="op">,</span> <span class="dv">18416</span>]</a>
<a class="sourceLine" id="cb5-16" title="16">]<span class="op">;</span></a></code></pre></div>
<h2 id="seed-contents">–seed-contents–</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">function</span> <span class="at">amicablePairsUpTo</span>(maxNum) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3">  <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="op">}</span></a></code></pre></div>
<h1 id="solutions">–solutions–</h1>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="co">// amicablePairsUpTo :: Int -&gt; [(Int, Int)]</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw">function</span> <span class="at">amicablePairsUpTo</span>(maxNum) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="cf">return</span> <span class="at">range</span>(<span class="dv">1</span><span class="op">,</span> maxNum)</a>
<a class="sourceLine" id="cb7-4" title="4">    .<span class="at">map</span>(x <span class="kw">=&gt;</span> <span class="at">properDivisors</span>(x)</a>
<a class="sourceLine" id="cb7-5" title="5">      .<span class="at">reduce</span>((a<span class="op">,</span> b) <span class="kw">=&gt;</span> a <span class="op">+</span> b<span class="op">,</span> <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb7-6" title="6">    .<span class="at">reduce</span>((a<span class="op">,</span> m<span class="op">,</span> i<span class="op">,</span> lst) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-7" title="7">      <span class="kw">const</span> n <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-8" title="8"></a>
<a class="sourceLine" id="cb7-9" title="9">      <span class="cf">return</span> (m <span class="op">&gt;</span> n) <span class="op">&amp;&amp;</span> lst[m <span class="op">-</span> <span class="dv">1</span>] <span class="op">===</span> n <span class="op">?</span></a>
<a class="sourceLine" id="cb7-10" title="10">        <span class="va">a</span>.<span class="at">concat</span>([</a>
<a class="sourceLine" id="cb7-11" title="11">          [n<span class="op">,</span> m]</a>
<a class="sourceLine" id="cb7-12" title="12">        ]) : a<span class="op">;</span></a>
<a class="sourceLine" id="cb7-13" title="13">    <span class="op">},</span> [])<span class="op">;</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="op">}</span></a>
<a class="sourceLine" id="cb7-15" title="15"></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">// properDivisors :: Int -&gt; [Int]</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="kw">function</span> <span class="at">properDivisors</span>(n) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-18" title="18">  <span class="cf">if</span> (n <span class="op">&lt;</span> <span class="dv">2</span>) <span class="cf">return</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb7-19" title="19"></a>
<a class="sourceLine" id="cb7-20" title="20">  <span class="kw">const</span> rRoot <span class="op">=</span> <span class="va">Math</span>.<span class="at">sqrt</span>(n)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-21" title="21">  <span class="kw">const</span> intRoot <span class="op">=</span> <span class="va">Math</span>.<span class="at">floor</span>(rRoot)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-22" title="22">  <span class="kw">const</span> blnPerfectSquare <span class="op">=</span> rRoot <span class="op">===</span> intRoot<span class="op">;</span></a>
<a class="sourceLine" id="cb7-23" title="23">  <span class="kw">const</span> lows <span class="op">=</span> <span class="at">range</span>(<span class="dv">1</span><span class="op">,</span> intRoot)</a>
<a class="sourceLine" id="cb7-24" title="24">  .<span class="at">filter</span>(x <span class="kw">=&gt;</span> (n <span class="op">%</span> x) <span class="op">===</span> <span class="dv">0</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-25" title="25"></a>
<a class="sourceLine" id="cb7-26" title="26">  <span class="cf">return</span> <span class="va">lows</span>.<span class="at">concat</span>(<span class="va">lows</span>.<span class="at">slice</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-27" title="27">    .<span class="at">map</span>(x <span class="kw">=&gt;</span> n / x)</a>
<a class="sourceLine" id="cb7-28" title="28">    .<span class="at">reverse</span>()</a>
<a class="sourceLine" id="cb7-29" title="29">    .<span class="at">slice</span>(blnPerfectSquare <span class="op">|</span> <span class="dv">0</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb7-30" title="30"><span class="op">}</span></a>
<a class="sourceLine" id="cb7-31" title="31"></a>
<a class="sourceLine" id="cb7-32" title="32"><span class="co">// Int -&gt; Int -&gt; Maybe Int -&gt; [Int]</span></a>
<a class="sourceLine" id="cb7-33" title="33"><span class="kw">function</span> <span class="at">range</span>(m<span class="op">,</span> n<span class="op">,</span> step) <span class="op">{</span></a>
<a class="sourceLine" id="cb7-34" title="34">  <span class="kw">const</span> d <span class="op">=</span> (step <span class="op">||</span> <span class="dv">1</span>) <span class="op">*</span> (n <span class="op">&gt;=</span> m <span class="op">?</span> <span class="dv">1</span> : <span class="dv">-1</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-35" title="35"></a>
<a class="sourceLine" id="cb7-36" title="36">  <span class="cf">return</span> <span class="va">Array</span>.<span class="at">from</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb7-37" title="37">    <span class="dt">length</span><span class="op">:</span> <span class="va">Math</span>.<span class="at">floor</span>((n <span class="op">-</span> m) / d) <span class="op">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-38" title="38">  <span class="op">},</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> m <span class="op">+</span> (i <span class="op">*</span> d))<span class="op">;</span></a>
<a class="sourceLine" id="cb7-39" title="39"><span class="op">}</span></a></code></pre></div>
