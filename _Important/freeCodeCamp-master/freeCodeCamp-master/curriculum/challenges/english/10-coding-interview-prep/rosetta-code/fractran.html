<h1 id="description">–description–</h1>
<p><a href="https://en.wikipedia.org/wiki/FRACTRAN" title="wp: FRACTRAN">FRACTRAN</a> is a Turing-complete esoteric programming language invented by the mathematician <a href="https://en.wikipedia.org/wiki/John%20Horton%20Conway" title="wp: John Horton Conway">John Horton Conway</a>.</p>
<p>A FRACTRAN program is an ordered list of positive fractions <span class="math inline">$P = (f_1, f_2, \\ldots, f_m)$</span>, together with an initial positive integer input <span class="math inline"><em>n</em></span>.</p>
<p>The program is run by updating the integer <span class="math inline"><em>n</em></span> as follows:</p>
<ul>
<li>
for the first fraction, <span class="math inline"><em>f</em><sub><em>i</em></sub></span>, in the list for which <span class="math inline"><em>n</em><em>f</em><sub><em>i</em></sub></span> is an integer, replace <span class="math inline"><em>n</em></span> with <span class="math inline"><em>n</em><em>f</em><sub><em>i</em></sub></span> ;
</li>
<li>
repeat this rule until no fraction in the list produces an integer when multiplied by <span class="math inline"><em>n</em></span>, then halt.
</li>
</ul>
<p>Conway gave a program for primes in FRACTRAN:</p>
<p><span class="math inline">$\\dfrac{17}{91}$</span>, <span class="math inline">$\\dfrac{78}{85}$</span>, <span class="math inline">$\\dfrac{19}{51}$</span>, <span class="math inline">$\\dfrac{23}{38}$</span>, <span class="math inline">$\\dfrac{29}{33}$</span>, <span class="math inline">$\\dfrac{77}{29}$</span>, <span class="math inline">$\\dfrac{95}{23}$</span>, <span class="math inline">$\\dfrac{77}{19}$</span>, <span class="math inline">$\\dfrac{1}{17}$</span>, <span class="math inline">$\\dfrac{11}{13}$</span>, <span class="math inline">$\\dfrac{13}{11}$</span>, <span class="math inline">$\\dfrac{15}{14}$</span>, <span class="math inline">$\\dfrac{15}{2}$</span>, <span class="math inline">$\\dfrac{55}{1}$</span></p>
<p>Starting with <span class="math inline"><em>n</em> = 2</span>, this FRACTRAN program will change <span class="math inline"><em>n</em></span> to <span class="math inline">$15=2\\times (\\frac{15}{2})$</span>, then <span class="math inline">$825=15\\times (\\frac{55}{1})$</span>, generating the following sequence of integers:</p>
<p><span class="math inline">2</span>, <span class="math inline">15</span>, <span class="math inline">825</span>, <span class="math inline">725</span>, <span class="math inline">1925</span>, <span class="math inline">2275</span>, <span class="math inline">425</span>, <span class="math inline">390</span>, <span class="math inline">330</span>, <span class="math inline">290</span>, <span class="math inline">770</span>, <span class="math inline">$\\ldots$</span></p>
<p>After 2, this sequence contains the following powers of 2:</p>
<p><span class="math inline">2<sup>2</sup> = 4</span>, <span class="math inline">2<sup>3</sup> = 8</span>, <span class="math inline">2<sup>5</sup> = 32</span>, <span class="math inline">2<sup>7</sup> = 128</span>, <span class="math inline">2<sup>11</sup> = 2048</span>, <span class="math inline">2<sup>13</sup> = 8192</span>, <span class="math inline">2<sup>17</sup> = 131072</span>, <span class="math inline">2<sup>19</sup> = 524288</span>, <span class="math inline">$\\ldots$</span></p>
<p>which are the prime powers of 2.</p>
<h1 id="instructions">–instructions–</h1>
<p>Write a function that takes a fractran program as a string parameter and returns the first 10 numbers of the program as an array. If the result does not have 10 numbers then return the numbers as is.</p>
<h1 id="hints">–hints–</h1>
<p><code>fractran</code> should be a function.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">assert</span>(<span class="kw">typeof</span> fractran <span class="op">==</span> <span class="st">&#39;function&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p><code>fractran("3/2, 1/3")</code> should return an array.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">assert</span>(<span class="va">Array</span>.<span class="at">isArray</span>(<span class="at">fractran</span>(<span class="st">&#39;3/2, 1/3&#39;</span>)))<span class="op">;</span></a></code></pre></div>
<p><code>fractran("3/2, 1/3")</code> should return <code>[ 2, 3, 1 ]</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">fractran</span>(<span class="st">&#39;3/2, 1/3&#39;</span>)<span class="op">,</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">1</span>])<span class="op">;</span></a></code></pre></div>
<p><code>fractran("3/2, 5/3, 1/5")</code> should return <code>[ 2, 3, 5, 1 ]</code>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">fractran</span>(<span class="st">&#39;3/2, 5/3, 1/5&#39;</span>)<span class="op">,</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">1</span>])<span class="op">;</span></a></code></pre></div>
<p><code>fractran("3/2, 6/3")</code> should return <code>[ 2, 3, 6, 9, 18, 27, 54, 81, 162, 243 ]</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">fractran</span>(<span class="st">&#39;3/2, 6/3&#39;</span>)<span class="op">,</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">54</span><span class="op">,</span> <span class="dv">81</span><span class="op">,</span> <span class="dv">162</span><span class="op">,</span> <span class="dv">243</span>])<span class="op">;</span></a></code></pre></div>
<p><code>fractran("2/7, 7/2")</code> should return <code>[ 2, 7, 2, 7, 2, 7, 2, 7, 2, 7 ]</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(<span class="at">fractran</span>(<span class="st">&#39;2/7, 7/2&#39;</span>)<span class="op">,</span> [<span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">7</span>])<span class="op">;</span></a></code></pre></div>
<p><code>fractran("17/91, 78/85, 19/51, 23/38, 29/33, 77/29, 95/23, 77/19, 1/17, 11/13, 13/11, 15/14, 15/2, 55/1")</code> should return <code>[ 2, 15, 825, 725, 1925, 2275, 425, 390, 330, 290 ]</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">assert</span>.<span class="at">deepEqual</span>(</a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="at">fractran</span>(</a>
<a class="sourceLine" id="cb7-3" title="3">    <span class="st">&#39;17/91, 78/85, 19/51, 23/38, 29/33, 77/29, 95/23, 77/19, 1/17, 11/13, 13/11, 15/14, 15/2, 55/1&#39;</span></a>
<a class="sourceLine" id="cb7-4" title="4">  )<span class="op">,</span></a>
<a class="sourceLine" id="cb7-5" title="5">  [<span class="dv">2</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">825</span><span class="op">,</span> <span class="dv">725</span><span class="op">,</span> <span class="dv">1925</span><span class="op">,</span> <span class="dv">2275</span><span class="op">,</span> <span class="dv">425</span><span class="op">,</span> <span class="dv">390</span><span class="op">,</span> <span class="dv">330</span><span class="op">,</span> <span class="dv">290</span>]</a>
<a class="sourceLine" id="cb7-6" title="6">)<span class="op">;</span></a></code></pre></div>
<h1 id="seed">–seed–</h1>
<h2 id="seed-contents">–seed-contents–</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">function</span> <span class="at">fractran</span>(progStr) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="op">}</span></a></code></pre></div>
<h1 id="solutions">–solutions–</h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">function</span> <span class="at">fractran</span>(progStr)<span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">var</span> num <span class="op">=</span> <span class="kw">new</span> <span class="at">Array</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="kw">var</span> den <span class="op">=</span> <span class="kw">new</span> <span class="at">Array</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4">  <span class="kw">var</span> val <span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="kw">var</span> out<span class="op">=</span><span class="st">&quot;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="kw">function</span> <span class="at">compile</span>(prog)<span class="op">{</span></a>
<a class="sourceLine" id="cb9-7" title="7">    <span class="kw">var</span> regex <span class="op">=</span> <span class="ss">/</span><span class="sc">\s*(\d*)\s*\/\s*(\d*)\s*(</span><span class="ss">.</span><span class="sc">*)</span><span class="ss">/m</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="cf">while</span>(<span class="va">regex</span>.<span class="at">test</span>(prog))<span class="op">{</span></a>
<a class="sourceLine" id="cb9-9" title="9">      <span class="va">num</span>.<span class="at">push</span>(<span class="va">regex</span>.<span class="at">exec</span>(prog)[<span class="dv">1</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb9-10" title="10">      <span class="va">den</span>.<span class="at">push</span>(<span class="va">regex</span>.<span class="at">exec</span>(prog)[<span class="dv">2</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb9-11" title="11">      prog <span class="op">=</span> <span class="va">regex</span>.<span class="at">exec</span>(prog)[<span class="dv">3</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb9-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-13" title="13">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-14" title="14"></a>
<a class="sourceLine" id="cb9-15" title="15">  <span class="kw">function</span> <span class="at">step</span>(val)<span class="op">{</span></a>
<a class="sourceLine" id="cb9-16" title="16">    <span class="kw">var</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-17" title="17">    <span class="cf">while</span>(i<span class="op">&lt;</span><span class="va">den</span>.<span class="at">length</span> <span class="op">&amp;&amp;</span> val<span class="op">%</span>den[i] <span class="op">!=</span> <span class="dv">0</span>) i<span class="op">++;</span></a>
<a class="sourceLine" id="cb9-18" title="18">    <span class="cf">return</span> num[i]<span class="op">*</span>val/den[i]<span class="op">;</span></a>
<a class="sourceLine" id="cb9-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-20" title="20"></a>
<a class="sourceLine" id="cb9-21" title="21">  <span class="kw">var</span> seq<span class="op">=</span>[]</a>
<a class="sourceLine" id="cb9-22" title="22"></a>
<a class="sourceLine" id="cb9-23" title="23">  <span class="kw">function</span> <span class="at">exec</span>(val)<span class="op">{</span></a>
<a class="sourceLine" id="cb9-24" title="24">    <span class="kw">var</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-25" title="25">    <span class="cf">while</span>(val <span class="op">&amp;&amp;</span> i<span class="op">&lt;</span>limit)<span class="op">{</span></a>
<a class="sourceLine" id="cb9-26" title="26">      <span class="va">seq</span>.<span class="at">push</span>(val)</a>
<a class="sourceLine" id="cb9-27" title="27">      val <span class="op">=</span> <span class="at">step</span>(val)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-28" title="28">      i <span class="op">++;</span></a>
<a class="sourceLine" id="cb9-29" title="29">    <span class="op">}</span></a>
<a class="sourceLine" id="cb9-30" title="30">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-31" title="31"></a>
<a class="sourceLine" id="cb9-32" title="32">  <span class="co">// Main</span></a>
<a class="sourceLine" id="cb9-33" title="33">  <span class="at">compile</span>(progStr)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-34" title="34">  <span class="kw">var</span> limit <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-35" title="35">  <span class="at">exec</span>(<span class="dv">2</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-36" title="36">  <span class="cf">return</span> seq<span class="op">;</span></a>
<a class="sourceLine" id="cb9-37" title="37"><span class="op">}</span></a></code></pre></div>
