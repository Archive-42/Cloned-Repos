<h1 id="description">–description–</h1>
<p>The previous challenges covered component <code>state</code> and how to initialize state in the <code>constructor</code>. There is also a way to change the component’s <code>state</code>. React provides a method for updating component <code>state</code> called <code>setState</code>. You call the <code>setState</code> method within your component class like so: <code>this.setState()</code>, passing in an object with key-value pairs. The keys are your state properties and the values are the updated state data. For instance, if we were storing a <code>username</code> in state and wanted to update it, it would look like this:</p>
<pre class="jsx"><code>this.setState({
  username: &#39;Lewis&#39;
});</code></pre>
<p>React expects you to never modify <code>state</code> directly, instead always use <code>this.setState()</code> when state changes occur. Also, you should note that React may batch multiple state updates in order to improve performance. What this means is that state updates through the <code>setState</code> method can be asynchronous. There is an alternative syntax for the <code>setState</code> method which provides a way around this problem. This is rarely needed but it’s good to keep it in mind! Please consult the <a href="https://facebook.github.io/react/docs/state-and-lifecycle.html">React documentation</a> for further details.</p>
<h1 id="instructions">–instructions–</h1>
<p>There is a <code>button</code> element in the code editor which has an <code>onClick()</code> handler. This handler is triggered when the <code>button</code> receives a click event in the browser, and runs the <code>handleClick</code> method defined on <code>MyComponent</code>. Within the <code>handleClick</code> method, update the component <code>state</code> using <code>this.setState()</code>. Set the <code>name</code> property in <code>state</code> to equal the string <code>React Rocks!</code>.</p>
<p>Click the button and watch the rendered state update. Don’t worry if you don’t fully understand how the click handler code works at this point. It’s covered in upcoming challenges.</p>
<h1 id="hints">–hints–</h1>
<p>The state of <code>MyComponent</code> should initialize with the key value pair <code>{ name: Initial State }</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(MyComponent)).<span class="at">state</span>(<span class="st">&#39;name&#39;</span>) <span class="op">===</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="st">&#39;Initial State&#39;</span></a>
<a class="sourceLine" id="cb2-4" title="4">)<span class="op">;</span></a></code></pre></div>
<p><code>MyComponent</code> should render an <code>h1</code> header.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="at">assert</span>(<span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(MyComponent)).<span class="at">find</span>(<span class="st">&#39;h1&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span>)<span class="op">;</span></a></code></pre></div>
<p>The rendered <code>h1</code> header should contain text rendered from the component’s state.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="kw">const</span> waitForIt <span class="op">=</span> (fn) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">new</span> <span class="at">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="at">resolve</span>(<span class="at">fn</span>())<span class="op">,</span> <span class="dv">250</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">  <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(MyComponent))<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="kw">const</span> first <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="va">mockedComponent</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;TestName&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> <span class="va">mockedComponent</span>.<span class="at">html</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">  <span class="op">};</span></a>
<a class="sourceLine" id="cb4-9" title="9">  <span class="kw">const</span> firstValue <span class="op">=</span> <span class="cf">await</span> <span class="at">first</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-10" title="10">  <span class="at">assert</span>(<span class="ss">/&lt;h1&gt;TestName&lt;</span><span class="sc">\/</span><span class="ss">h1&gt;/</span>.<span class="at">test</span>(firstValue))<span class="op">;</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>Calling the <code>handleClick</code> method on <code>MyComponent</code> should set the name property in state to equal <code>React Rocks!</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">const</span> waitForIt <span class="op">=</span> (fn) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">new</span> <span class="at">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="at">resolve</span>(<span class="at">fn</span>())<span class="op">,</span> <span class="dv">250</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">  <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(MyComponent))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="kw">const</span> first <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="va">mockedComponent</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;Before&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> <span class="va">mockedComponent</span>.<span class="at">state</span>(<span class="st">&#39;name&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-8" title="8">  <span class="op">};</span></a>
<a class="sourceLine" id="cb5-9" title="9">  <span class="kw">const</span> second <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-10" title="10">    <span class="va">mockedComponent</span>.<span class="at">instance</span>().<span class="at">handleClick</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-11" title="11">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> <span class="va">mockedComponent</span>.<span class="at">state</span>(<span class="st">&#39;name&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-12" title="12">  <span class="op">};</span></a>
<a class="sourceLine" id="cb5-13" title="13">  <span class="kw">const</span> firstValue <span class="op">=</span> <span class="cf">await</span> <span class="at">first</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-14" title="14">  <span class="kw">const</span> secondValue <span class="op">=</span> <span class="cf">await</span> <span class="at">second</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-15" title="15">  <span class="at">assert</span>(firstValue <span class="op">===</span> <span class="st">&#39;Before&#39;</span> <span class="op">&amp;&amp;</span> secondValue <span class="op">===</span> <span class="st">&#39;React Rocks!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="op">};</span></a></code></pre></div>
<h1 id="seed">–seed–</h1>
<h2 id="after-user-code">–after-user-code–</h2>
<pre class="jsx"><code>ReactDOM.render(&lt;MyComponent /&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<h2 id="seed-contents">–seed-contents–</h2>
<pre class="jsx"><code>class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      name: &#39;Initial State&#39;
    };
    this.handleClick = this.handleClick.bind(this);
  }
  handleClick() {
    // Change code below this line

    // Change code above this line
  }
  render() {
    return (
      &lt;div&gt;
        &lt;button onClick={this.handleClick}&gt;Click Me&lt;/button&gt;
        &lt;h1&gt;{this.state.name}&lt;/h1&gt;
      &lt;/div&gt;
    );
  }
};</code></pre>
<h1 id="solutions">–solutions–</h1>
<pre class="jsx"><code>class MyComponent extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      name: &#39;Initial State&#39;
    };
    this.handleClick = this.handleClick.bind(this);
  }
  handleClick() {
     // Change code below this line
    this.setState({
      name: &#39;React Rocks!&#39;
    });
    // Change code above this line
  }
  render() {
    return (
      &lt;div&gt;
        &lt;button onClick = {this.handleClick}&gt;Click Me&lt;/button&gt;
        &lt;h1&gt;{this.state.name}&lt;/h1&gt;
      &lt;/div&gt;
    );
  }
};</code></pre>
