<h1 id="description">–description–</h1>
<p>You’re almost done! Recall that you wrote all the Redux code so that Redux could control the state management of your React messages app. Now that Redux is connected, you need to extract the state management out of the <code>Presentational</code> component and into Redux. Currently, you have Redux connected, but you are handling the state locally within the <code>Presentational</code> component.</p>
<h1 id="instructions">–instructions–</h1>
<p>In the <code>Presentational</code> component, first, remove the <code>messages</code> property in the local <code>state</code>. These messages will be managed by Redux. Next, modify the <code>submitMessage()</code> method so that it dispatches <code>submitNewMessage()</code> from <code>this.props</code>, and pass in the current message input from local <code>state</code> as an argument. Because you removed <code>messages</code> from local state, remove the <code>messages</code> property from the call to <code>this.setState()</code> here as well. Finally, modify the <code>render()</code> method so that it maps over the messages received from <code>props</code> rather than <code>state</code>.</p>
<p>Once these changes are made, the app will continue to function the same, except Redux manages the state. This example also illustrates how a component may have local <code>state</code>: your component still tracks user input locally in its own <code>state</code>. You can see how Redux provides a useful state management framework on top of React. You achieved the same result using only React’s local state at first, and this is usually possible with simple apps. However, as your apps become larger and more complex, so does your state management, and this is the problem Redux solves.</p>
<h1 id="hints">–hints–</h1>
<p>The <code>AppWrapper</code> should render to the page.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb1-2" title="2">  (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="cf">return</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;AppWrapper&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb1-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>The <code>Presentational</code> component should render to page.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb2-2" title="2">  (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="cf">return</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb2-6" title="6">)<span class="op">;</span></a></code></pre></div>
<p>The <code>Presentational</code> component should render an <code>h2</code>, <code>input</code>, <code>button</code>, and <code>ul</code> elements.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb3-2" title="2">  (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">const</span> PresentationalComponent <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb3-6" title="6">      <span class="va">PresentationalComponent</span>.<span class="at">find</span>(<span class="st">&#39;div&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb3-7" title="7">      <span class="va">PresentationalComponent</span>.<span class="at">find</span>(<span class="st">&#39;h2&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb3-8" title="8">      <span class="va">PresentationalComponent</span>.<span class="at">find</span>(<span class="st">&#39;button&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb3-9" title="9">      <span class="va">PresentationalComponent</span>.<span class="at">find</span>(<span class="st">&#39;ul&#39;</span>).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb3-10" title="10">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb3-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>The <code>Presentational</code> component should receive <code>messages</code> from the Redux store as a prop.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb4-2" title="2">  (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="kw">const</span> PresentationalComponent <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5">    <span class="kw">const</span> props <span class="op">=</span> <span class="va">PresentationalComponent</span>.<span class="at">props</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="cf">return</span> <span class="va">Array</span>.<span class="at">isArray</span>(<span class="va">props</span>.<span class="at">messages</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7">  <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb4-8" title="8">)<span class="op">;</span></a></code></pre></div>
<p>The <code>Presentational</code> component should receive the <code>submitMessage</code> action creator as a prop.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb5-2" title="2">  (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4">    <span class="kw">const</span> PresentationalComponent <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="kw">const</span> props <span class="op">=</span> <span class="va">PresentationalComponent</span>.<span class="at">props</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="cf">return</span> <span class="kw">typeof</span> <span class="va">props</span>.<span class="at">submitNewMessage</span> <span class="op">===</span> <span class="st">&#39;function&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb5-8" title="8">)<span class="op">;</span></a></code></pre></div>
<p>The state of the <code>Presentational</code> component should contain one property, <code>input</code>, which is initialized to an empty string.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="at">assert</span>(</a>
<a class="sourceLine" id="cb6-2" title="2">  (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="kw">const</span> PresentationalState <span class="op">=</span> mockedComponent</a>
<a class="sourceLine" id="cb6-5" title="5">      .<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>)</a>
<a class="sourceLine" id="cb6-6" title="6">      .<span class="at">instance</span>().<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-7" title="7">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb6-8" title="8">      <span class="kw">typeof</span> <span class="va">PresentationalState</span>.<span class="at">input</span> <span class="op">===</span> <span class="st">&#39;string&#39;</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb6-9" title="9">      <span class="va">Object</span>.<span class="at">keys</span>(PresentationalState).<span class="at">length</span> <span class="op">===</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb6-10" title="10">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="op">}</span>)()</a>
<a class="sourceLine" id="cb6-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>Typing in the <code>input</code> element should update the state of the <code>Presentational</code> component.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3">  <span class="kw">const</span> testValue <span class="op">=</span> <span class="st">&#39;__MOCK__INPUT__&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-4" title="4">  <span class="kw">const</span> waitForIt <span class="op">=</span> (fn) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb7-5" title="5">    <span class="kw">new</span> <span class="at">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="at">resolve</span>(<span class="at">fn</span>())<span class="op">,</span> <span class="dv">100</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6">  <span class="kw">const</span> causeChange <span class="op">=</span> (c<span class="op">,</span> v) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb7-7" title="7">    <span class="va">c</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">simulate</span>(<span class="st">&#39;change&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">target</span><span class="op">:</span> <span class="op">{</span> <span class="dt">value</span><span class="op">:</span> v <span class="op">}</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-8" title="8">  <span class="kw">let</span> initialInput <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">find</span>(<span class="st">&#39;input&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-9" title="9">  <span class="kw">const</span> changed <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-10" title="10">    <span class="at">causeChange</span>(mockedComponent<span class="op">,</span> testValue)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> mockedComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-12" title="12">  <span class="op">};</span></a>
<a class="sourceLine" id="cb7-13" title="13">  <span class="kw">const</span> updated <span class="op">=</span> <span class="cf">await</span> <span class="at">changed</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-14" title="14">  <span class="kw">const</span> updatedInput <span class="op">=</span> <span class="va">updated</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">find</span>(<span class="st">&#39;input&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-15" title="15">  <span class="at">assert</span>(</a>
<a class="sourceLine" id="cb7-16" title="16">    <span class="va">initialInput</span>.<span class="at">props</span>().<span class="at">value</span> <span class="op">===</span> <span class="st">&#39;&#39;</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb7-17" title="17">      <span class="va">updatedInput</span>.<span class="at">props</span>().<span class="at">value</span> <span class="op">===</span> <span class="st">&#39;__MOCK__INPUT__&#39;</span></a>
<a class="sourceLine" id="cb7-18" title="18">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="op">};</span></a></code></pre></div>
<p>Dispatching the <code>submitMessage</code> on the <code>Presentational</code> component should update Redux store and clear the input in local state.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="kw">const</span> waitForIt <span class="op">=</span> (fn) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb8-4" title="4">    <span class="kw">new</span> <span class="at">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="at">resolve</span>(<span class="at">fn</span>())<span class="op">,</span> <span class="dv">100</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="kw">let</span> beforeProps <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">props</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="kw">const</span> testValue <span class="op">=</span> <span class="st">&#39;__TEST__EVENT__INPUT__&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="kw">const</span> causeChange <span class="op">=</span> (c<span class="op">,</span> v) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="va">c</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">simulate</span>(<span class="st">&#39;change&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">target</span><span class="op">:</span> <span class="op">{</span> <span class="dt">value</span><span class="op">:</span> v <span class="op">}</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-9" title="9">  <span class="kw">const</span> changed <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-10" title="10">    <span class="at">causeChange</span>(mockedComponent<span class="op">,</span> testValue)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-11" title="11">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> mockedComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-12" title="12">  <span class="op">};</span></a>
<a class="sourceLine" id="cb8-13" title="13">  <span class="kw">const</span> clickButton <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-14" title="14">    <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;button&#39;</span>).<span class="at">simulate</span>(<span class="st">&#39;click&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-15" title="15">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> mockedComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-16" title="16">  <span class="op">};</span></a>
<a class="sourceLine" id="cb8-17" title="17">  <span class="kw">const</span> afterChange <span class="op">=</span> <span class="cf">await</span> <span class="at">changed</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-18" title="18">  <span class="kw">const</span> afterChangeInput <span class="op">=</span> <span class="va">afterChange</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">props</span>().<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-19" title="19">  <span class="kw">const</span> afterClick <span class="op">=</span> <span class="cf">await</span> <span class="at">clickButton</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-20" title="20">  <span class="kw">const</span> afterProps <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">props</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-21" title="21">  <span class="at">assert</span>(</a>
<a class="sourceLine" id="cb8-22" title="22">    <span class="va">beforeProps</span>.<span class="va">messages</span>.<span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb8-23" title="23">      afterChangeInput <span class="op">===</span> testValue <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb8-24" title="24">      <span class="va">afterProps</span>.<span class="va">messages</span>.<span class="at">pop</span>() <span class="op">===</span> testValue <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb8-25" title="25">      <span class="va">afterClick</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">props</span>().<span class="at">value</span> <span class="op">===</span> <span class="st">&#39;&#39;</span></a>
<a class="sourceLine" id="cb8-26" title="26">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="op">};</span></a></code></pre></div>
<p>The <code>Presentational</code> component should render the <code>messages</code> from the Redux store.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="kw">const</span> mockedComponent <span class="op">=</span> <span class="va">Enzyme</span>.<span class="at">mount</span>(<span class="va">React</span>.<span class="at">createElement</span>(AppWrapper))<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3">  <span class="kw">const</span> waitForIt <span class="op">=</span> (fn) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb9-4" title="4">    <span class="kw">new</span> <span class="at">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="at">resolve</span>(<span class="at">fn</span>())<span class="op">,</span> <span class="dv">100</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5">  <span class="kw">let</span> beforeProps <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">props</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="kw">const</span> testValue <span class="op">=</span> <span class="st">&#39;__TEST__EVENT__INPUT__&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="kw">const</span> causeChange <span class="op">=</span> (c<span class="op">,</span> v) <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb9-8" title="8">    <span class="va">c</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">simulate</span>(<span class="st">&#39;change&#39;</span><span class="op">,</span> <span class="op">{</span> <span class="dt">target</span><span class="op">:</span> <span class="op">{</span> <span class="dt">value</span><span class="op">:</span> v <span class="op">}</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-9" title="9">  <span class="kw">const</span> changed <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-10" title="10">    <span class="at">causeChange</span>(mockedComponent<span class="op">,</span> testValue)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-11" title="11">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> mockedComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-12" title="12">  <span class="op">};</span></a>
<a class="sourceLine" id="cb9-13" title="13">  <span class="kw">const</span> clickButton <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-14" title="14">    <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;button&#39;</span>).<span class="at">simulate</span>(<span class="st">&#39;click&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-15" title="15">    <span class="cf">return</span> <span class="at">waitForIt</span>(() <span class="kw">=&gt;</span> mockedComponent)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-16" title="16">  <span class="op">};</span></a>
<a class="sourceLine" id="cb9-17" title="17">  <span class="kw">const</span> afterChange <span class="op">=</span> <span class="cf">await</span> <span class="at">changed</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-18" title="18">  <span class="kw">const</span> afterChangeInput <span class="op">=</span> <span class="va">afterChange</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">props</span>().<span class="at">value</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-19" title="19">  <span class="kw">const</span> afterClick <span class="op">=</span> <span class="cf">await</span> <span class="at">clickButton</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-20" title="20">  <span class="kw">const</span> afterProps <span class="op">=</span> <span class="va">mockedComponent</span>.<span class="at">find</span>(<span class="st">&#39;Presentational&#39;</span>).<span class="at">props</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-21" title="21">  <span class="at">assert</span>(</a>
<a class="sourceLine" id="cb9-22" title="22">    <span class="va">beforeProps</span>.<span class="va">messages</span>.<span class="at">length</span> <span class="op">===</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb9-23" title="23">      afterChangeInput <span class="op">===</span> testValue <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb9-24" title="24">      <span class="va">afterProps</span>.<span class="va">messages</span>.<span class="at">pop</span>() <span class="op">===</span> testValue <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb9-25" title="25">      <span class="va">afterClick</span>.<span class="at">find</span>(<span class="st">&#39;input&#39;</span>).<span class="at">props</span>().<span class="at">value</span> <span class="op">===</span> <span class="st">&#39;&#39;</span> <span class="op">&amp;&amp;</span></a>
<a class="sourceLine" id="cb9-26" title="26">      <span class="va">afterClick</span>.<span class="at">find</span>(<span class="st">&#39;ul&#39;</span>).<span class="at">childAt</span>(<span class="dv">0</span>).<span class="at">text</span>() <span class="op">===</span> testValue</a>
<a class="sourceLine" id="cb9-27" title="27">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="op">};</span></a></code></pre></div>
<h1 id="seed">–seed–</h1>
<h2 id="after-user-code">–after-user-code–</h2>
<pre class="jsx"><code>ReactDOM.render(&lt;AppWrapper /&gt;, document.getElementById(&#39;root&#39;))</code></pre>
<h2 id="seed-contents">–seed-contents–</h2>
<pre class="jsx"><code>// Redux:
const ADD = &#39;ADD&#39;;

const addMessage = (message) =&gt; {
  return {
    type: ADD,
    message: message
  }
};

const messageReducer = (state = [], action) =&gt; {
  switch (action.type) {
    case ADD:
      return [
        ...state,
        action.message
      ];
    default:
      return state;
  }
};

const store = Redux.createStore(messageReducer);

// React:
const Provider = ReactRedux.Provider;
const connect = ReactRedux.connect;

// Change code below this line
class Presentational extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      input: &#39;&#39;,
      messages: []
    }
    this.handleChange = this.handleChange.bind(this);
    this.submitMessage = this.submitMessage.bind(this);
  }
  handleChange(event) {
    this.setState({
      input: event.target.value
    });
  }
  submitMessage() {
    this.setState((state) =&gt; ({
      input: &#39;&#39;,
      messages: state.messages.concat(state.input)
    }));
  }
  render() {
    return (
      &lt;div&gt;
        &lt;h2&gt;Type in a new Message:&lt;/h2&gt;
        &lt;input
          value={this.state.input}
          onChange={this.handleChange}/&gt;&lt;br/&gt;
        &lt;button onClick={this.submitMessage}&gt;Submit&lt;/button&gt;
        &lt;ul&gt;
          {this.state.messages.map( (message, idx) =&gt; {
              return (
                 &lt;li key={idx}&gt;{message}&lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    );
  }
};
// Change code above this line

const mapStateToProps = (state) =&gt; {
  return {messages: state}
};

const mapDispatchToProps = (dispatch) =&gt; {
  return {
    submitNewMessage: (message) =&gt; {
      dispatch(addMessage(message))
    }
  }
};

const Container = connect(mapStateToProps, mapDispatchToProps)(Presentational);

class AppWrapper extends React.Component {
  render() {
    return (
      &lt;Provider store={store}&gt;
        &lt;Container/&gt;
      &lt;/Provider&gt;
    );
  }
};</code></pre>
<h1 id="solutions">–solutions–</h1>
<pre class="jsx"><code>// Redux:
const ADD = &#39;ADD&#39;;

const addMessage = (message) =&gt; {
  return {
    type: ADD,
    message: message
  }
};

const messageReducer = (state = [], action) =&gt; {
  switch (action.type) {
    case ADD:
      return [
        ...state,
        action.message
      ];
    default:
      return state;
  }
};

const store = Redux.createStore(messageReducer);

// React:
const Provider = ReactRedux.Provider;
const connect = ReactRedux.connect;

// Change code below this line
class Presentational extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      input: &#39;&#39;
    }
 this.handleChange = this.handleChange.bind(this);
 this.submitMessage = this.submitMessage.bind(this);
  }
  handleChange(event) {
    this.setState({
      input: event.target.value
    });
  }
  submitMessage() {
    this.props.submitNewMessage(this.state.input);
    this.setState({
      input: &#39;&#39;
    });
  }
  render() {
    return (
      &lt;div&gt;
        &lt;h2&gt;Type in a new Message:&lt;/h2&gt;
        &lt;input
          value={this.state.input}
          onChange={this.handleChange}/&gt;&lt;br/&gt;
        &lt;button onClick={this.submitMessage}&gt;Submit&lt;/button&gt;
        &lt;ul&gt;
          {this.props.messages.map( (message, idx) =&gt; {
              return (
                 &lt;li key={idx}&gt;{message}&lt;/li&gt;
              )
            })
          }
        &lt;/ul&gt;
      &lt;/div&gt;
    );
  }
};
// Change code above this line

const mapStateToProps = (state) =&gt; {
  return {messages: state}
};

const mapDispatchToProps = (dispatch) =&gt; {
  return {
    submitNewMessage: (message) =&gt; {
      dispatch(addMessage(message))
    }
  }
};

const Container = connect(mapStateToProps, mapDispatchToProps)(Presentational);

class AppWrapper extends React.Component {
  render() {
    return (
      &lt;Provider store={store}&gt;
        &lt;Container/&gt;
      &lt;/Provider&gt;
    );
  }
};</code></pre>
