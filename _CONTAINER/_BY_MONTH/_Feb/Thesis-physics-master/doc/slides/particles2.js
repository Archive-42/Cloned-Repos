var COMPILED=!0,goog=goog||{};goog.global=this;goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b};goog.define=function(a,b){var c=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e;e=c.shift();)if(goog.isDefAndNotNull(d[e]))d=d[e];else return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var d;a=a.replace(/\\/g,"/");for(var e=goog.dependencies_,g=0;d=b[g];g++)e.nameToPath[d]=a,a in e.pathToNames||(e.pathToNames[a]={}),e.pathToNames[a][d]=!0;for(d=0;b=c[d];d++)a in e.requires||(e.requires[a]={}),e.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?"),d=-1==d?c.length:
d;if("base.js"==c.substr(d-7,7)){goog.basePath=c.substr(0,d-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('\x3cscript type\x3d"text/javascript" src\x3d"'+
a+'"\x3e\x3c/script\x3e');return!0}return!1},goog.writeScripts_=function(){function a(e){if(!(e in d.written)){if(!(e in d.visited)&&(d.visited[e]=!0,e in d.requires))for(var f in d.requires[e])if(!goog.isProvided_(f))if(f in d.nameToPath)a(d.nameToPath[f]);else throw Error("Undefined nameToPath for "+f);e in c||(c[e]=!0,b.push(e))}}var b=[],c={},d=goog.dependencies_,e;for(e in goog.included_)d.written[e]||a(e);for(e=0;e<b.length;e++)if(b[e])goog.importScript_(goog.basePath+b[e]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ \x3d 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")},d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};return b?a+"-"+d(b):d(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},d;for(d in c){var e=(""+c[d]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+d+"\\}","gi"),e)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),g=!1,f=a.constructor;f;f=f.superClass_&&f.superClass_.constructor)if(f.prototype[b]===d)g=!0;else if(g)return f.prototype[b].apply(a,
e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};var smash={Particle:function(){this.velocityY=this.velocityX=this.positionY=this.positionX=0.1;this.lifespan=this.age=0;this.isDead=!1}};smash.Particle.prototype.step=function(){this.positionX+=this.velocityX;this.positionY+=this.velocityY;this.age++};smash.Particle.prototype.reset=function(){this.lifespan=this.age=this.velocityY=this.velocityX=this.positionY=this.positionX=0;this.isDead=!1};smash.ParticleEmitter=function(){this.angle=this.positionY=this.positionX=0.1;this.velocity=10.1;this.velocitySpread=0.2;this.spread=10*Math.PI/180;this.lifespan=50;this.productionRate=10};smash.ParticleEmitter.prototype.setAngle=function(a){this.angle=Math.PI*a/180};smash.ParticleEmitter.prototype.setVelocity=function(a){this.velocity=a};smash.ParticleEmitter.prototype.setVelocitySpread=function(a){this.velocitySpread=a};
smash.ParticleEmitter.prototype.setSpread=function(a){this.spread=Math.PI*a/180};smash.ParticleEmitter.prototype.setLifespan=function(a){this.lifespan=a};smash.ParticleEmitter.prototype.setProductionRate=function(a){this.productionRate=a};
smash.ParticleEmitter.prototype.getNewParticles=function(){for(var a=[],b=0;b<this.productionRate;b++){var c=new smash.Particle;c.lifespan=this.lifespan;c.positionX=this.positionX;c.positionY=this.positionY;c.velocityX=Math.sin(this.angle+(Math.random()-0.5)*this.spread)*this.velocity*this.velocitySpread;c.velocityY=Math.cos(this.angle+(Math.random()-0.5)*this.spread)*this.velocity*(1+(Math.random()-0.5)*this.velocitySpread);a.push(c)}return a};smash.flags={};smash.flags.DRAWING_ENABLED=!0;smash.ParticleSystem2=function(){this.particles=[];this.deadParticles=[];this.emitters=[];smash.flags.DRAWING_ENABLED&&(this.canvas=window.document.createElement("canvas"),this.canvas.width=smash.ParticleSystem2.CANVAS_WIDTH,this.canvas.height=smash.ParticleSystem2.CANVAS_HEIGHT,window.document.body.appendChild(this.canvas),this.context=this.canvas.getContext("2d"),this.imageData=this.context.getImageData(0,0,smash.ParticleSystem2.CANVAS_WIDTH,smash.ParticleSystem2.CANVAS_HEIGHT),this.pixels=this.imageData.data)};
smash.ParticleSystem2.CANVAS_WIDTH=1200;smash.ParticleSystem2.CANVAS_HEIGHT=400;
smash.ParticleSystem2.prototype.step=function(){if(smash.flags.DRAWING_ENABLED)for(var a=0;a<4*smash.ParticleSystem2.CANVAS_WIDTH*smash.ParticleSystem2.CANVAS_HEIGHT;a+=4)this.pixels[a]=0,this.pixels[a+1]=0,this.pixels[a+2]=0,this.pixels[a+3]=0;for(var b=0;b<this.emitters.length;b++)for(var c=this.emitters[b],a=0;a<c.productionRate;a++){var d=this.deadParticles.pop();void 0!==d?(d=this.particles[d],d.reset()):(d=new smash.Particle,this.particles.push(d));d.lifespan=c.lifespan;d.positionX=c.positionX;
d.positionY=c.positionY;d.velocityX=Math.sin(c.angle+(Math.random()-0.5)*c.spread)*c.velocity*c.velocitySpread;d.velocityY=Math.cos(c.angle+(Math.random()-0.5)*c.spread)*c.velocity*(1+(Math.random()-0.5)*c.velocitySpread)}for(a=0;a<this.particles.length;a++){d=this.particles[a];d.step();if(0>d.positionX||d.positionX>=smash.ParticleSystem2.CANVAS_WIDTH||0>d.positionY||d.positionY>=smash.ParticleSystem2.CANVAS_HEIGHT||d.age>d.lifespan)this.deadParticles.push(a),d.isDead=!0;smash.flags.DRAWING_ENABLED&&
!d.isDead&&(b=4*(Math.round(d.positionY)*smash.ParticleSystem2.CANVAS_WIDTH+Math.round(d.positionX)),this.pixels[b]=Math.round(80*d.velocityX),this.pixels[b+1]=Math.round(80*d.velocityX),this.pixels[b+2]=255-Math.round(255*(d.age/d.lifespan)),this.pixels[b+3]=255)}smash.flags.DRAWING_ENABLED&&this.context.putImageData(this.imageData,0,0)};smash.ParticleSystem2.prototype.addEmitter=function(a){this.emitters.push(a)};var system=new smash.ParticleSystem2,emitter=new smash.ParticleEmitter;emitter.positionX=600;emitter.positionY=100;emitter.setVelocity(3);emitter.setSpread(30);emitter.setProductionRate(100);system.addEmitter(emitter);var emitter2=new smash.ParticleEmitter;emitter2.positionX=200;emitter2.positionY=300;emitter2.setVelocity(1);emitter2.setVelocitySpread(0.75);emitter2.setSpread(60);emitter2.setLifespan(100);emitter2.setAngle(90);emitter2.setProductionRate(100);system.addEmitter(emitter2);
if(smash.flags.DRAWING_ENABLED){var stats=new Stats;stats.setMode(0);stats.domElement.style.position="absolute";stats.domElement.style.left="0px";stats.domElement.style.top="0px";document.body.appendChild(stats.domElement);window.addEventListener("load",function(){var a=function(){stats.begin();system.step();window.requestAnimationFrame(a);stats.end()};window.requestAnimationFrame(a)},!0)}else for(var i=0;1E3>i;i++)system.step();
