!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t){e.exports=lodash},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(2)},function(e,t,n){"use strict";var o=n(3),r=(n.n(o),n(4)),l=(n.n(r),n(5)),a=n(6),i=n(7),c=n.n(i),__=(wp.data.withSelect,wp.i18n.__),s=wp.blocks,u=s.registerBlockType,p=s.createBlock,m=wp.components,d=m.Icon,b=(m.Button,function(){return wp.element.createElement(d,{icon:wp.element.createElement("svg",{viewBox:"0 0 220 220",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("g",{fillRule:"evenodd"},wp.element.createElement("path",{d:"M97 122.98c7.125 7.117 18.678 7.117 25.804 0 7.126-7.12 7.126-18.66 0-25.779L57.766 32.34c-7.126-7.119-18.679-7.119-25.805 0-7.126 7.118-7.126 18.66 0 25.778L97 122.98zm96.175 50.994c0 10.066-8.169 18.228-18.247 18.228-10.077 0-18.247-8.162-18.247-18.228V45.227c0-10.066 8.17-18.227 18.247-18.227 10.078 0 18.247 8.161 18.247 18.227v128.747z",opacity:".7"}),wp.element.createElement("path",{d:"M187.863 32.339c-7.126-7.118-18.68-7.118-25.806 0L97.02 97.2c-7.126 7.119-7.126 18.659 0 25.778s18.679 7.119 25.805 0l65.038-64.862c7.125-7.118 7.125-18.66 0-25.778M44.746 27C34.669 27 26.5 35.161 26.5 45.228v128.746c0 10.068 8.169 18.23 18.246 18.23 10.078 0 18.248-8.162 18.248-18.23V45.228C62.994 35.161 54.824 27 44.746 27m148.429 146.974c0 10.066-8.169 18.228-18.247 18.228-10.077 0-18.247-8.162-18.247-18.228 0-10.067 8.17-18.228 18.247-18.228 10.078 0 18.247 8.161 18.247 18.228"})))})});u("media-cloud/mux-video-block",{title:__("Mux Video"),icon:b,category:"mediacloud",keywords:[__("mux"),__("video")],supports:{align:!0},attributes:c.a,transforms:{from:[{type:"block",blocks:["core/video"],isMatch:function(e){if(!e.hasOwnProperty("id")||null===e.id)return!1;var t=wp.data.select("core").getMedia(e.id);return!("undefined"===typeof t||null===t||!t.hasOwnProperty("media_details"))&&!!t.media_details.hasOwnProperty("mux")},transform:function(e){var t=wp.data.select("core").getMedia(e.id);return e.muxId=t.media_details.mux.muxId,p("media-cloud/mux-video-block",e)}}]},edit:l.a,save:a.a})},function(e,t){},function(e,t){},function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=wp.blob,s=(c.getBlobByURL,c.isBlobURL,wp.blockEditor),u=(s.BlockIcon,s.InspectorControls),p=(s.MediaPlaceholder,s.MediaUpload),m=s.MediaUploadCheck,d=s.BlockControls,b=s.RichText,f=wp.components,w=f.Disabled,h=f.BaseControl,g=f.SelectControl,y=f.ToggleControl,v=f.PanelBody,E=f.IconButton,k=f.Toolbar,x=f.withNotices,P=f.Button,_=wp.element.Fragment,I=n(0),C=I.isEmpty,O=(wp.editor.mediaUpload,wp.element),M=O.Component,B=O.createRef,A=wp.i18n,__=A.__,T=A.sprintf,j=wp.compose,S=j.compose,N=j.withInstanceId,R=["video"],L=["image"],D=function(e){function t(){r(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={editing:!e.props.attributes.muxId},e.videoPlayer=B(),e.posterImageButton=B(),e}return a(t,e),i(t,[{key:"toggleAttribute",value:function(e){var t=this;return function(n){t.props.setAttributes(o({},e,n))}}},{key:"selectPoster",value:function(e){this.props.setAttributes({poster:e.url})}},{key:"render",value:function(){var e=this,t=this.props.attributes,n=t.autoplay,o=t.caption,r=t.controls,l=t.loop,a=t.muted,i=t.playsInline,c=t.poster,s=t.preload,f=t.src,x=t.outputDimensions,I=this.state.editing,O=this.props,M=O.className,B=O.instanceId,A=O.isSelected,j=O.setAttributes,S=function(){e.setState({editing:!0})},N=function(t){if(!t.hasOwnProperty("mux"))return void alert("This is not a Mux video.");var n=null;t.hasOwnProperty("image")&&null!==t.image&&(n=t.image.src),j({id:t.id,muxId:t.mux.muxId,src:t.mux.src,poster:n}),e.setState({editing:!1})};if(I)return wp.element.createElement("div",{className:"mux-uploader-container"},wp.element.createElement(m,null,wp.element.createElement(p,{onSelect:N,allowedTypes:R,render:function(e){var t=e.open;return wp.element.createElement(P,{className:"button",onClick:t},"Open Media Library")}})));var D="video-block__poster-image-description-"+B;return wp.element.createElement(_,null,wp.element.createElement(d,null,wp.element.createElement(k,null,wp.element.createElement(E,{className:"components-icon-button components-toolbar__control",label:__("Edit video"),onClick:S,icon:"edit"}))),wp.element.createElement(u,null,wp.element.createElement(v,{title:__("Video Settings")},wp.element.createElement(y,{label:__("Autoplay"),onChange:this.toggleAttribute("autoplay"),checked:n,help:this.getAutoplayHelp}),wp.element.createElement(y,{label:__("Loop"),onChange:this.toggleAttribute("loop"),checked:l}),wp.element.createElement(y,{label:__("Muted"),onChange:this.toggleAttribute("muted"),checked:a}),wp.element.createElement(y,{label:__("Playback Controls"),onChange:this.toggleAttribute("controls"),checked:r}),wp.element.createElement(y,{label:__("Play inline"),onChange:this.toggleAttribute("playsInline"),checked:i}),wp.element.createElement(y,{label:__("Output Dimensions"),onChange:this.toggleAttribute("outputDimensions"),checked:x}),wp.element.createElement(g,{label:__("Preload"),value:s,onChange:function(e){return j({preload:e})},options:[{value:"auto",label:__("Auto")},{value:"metadata",label:__("Metadata")},{value:"none",label:__("None")}]}),wp.element.createElement(m,null,wp.element.createElement(h,{className:"editor-video-poster-control"},wp.element.createElement(h.VisualLabel,null,__("Poster Image")),wp.element.createElement(p,{title:__("Select Poster Image"),onSelect:this.selectPoster.bind(this),allowedTypes:L,render:function(t){var n=t.open;return wp.element.createElement(P,{isDefault:!0,onClick:n,ref:e.posterImageButton,"aria-describedby":D},__(e.props.attributes.poster?"Replace image":"Select Poster Image"))}}),wp.element.createElement("p",{id:D,hidden:!0},this.props.attributes.poster?T(__("The current poster image url is %s"),this.props.attributes.poster):__("There is no poster image currently selected")),!!this.props.attributes.poster&&wp.element.createElement(P,{onClick:this.onRemovePoster,isLink:!0,isDestructive:!0},__("Remove Poster Image")))))),wp.element.createElement("figure",{className:M},wp.element.createElement(w,null,wp.element.createElement("video",{controls:r,poster:c,src:f,ref:this.videoPlayer})),(!C(o)||A)&&wp.element.createElement(b,{tagName:"figcaption",placeholder:__("Write caption\u2026"),value:o,onChange:function(e){return j({caption:e})},inlineToolbar:!0})))}}]),t}(M);t.a=S([x,N])(D)},function(e,t,n){"use strict";function o(e){var t=e.attributes,n=t.id,o=t.autoplay,a=t.caption,c=t.controls,s=t.loop,u=t.muted,p=t.poster,m=t.preload,d=(t.src,t.muxId),b=t.playsInline,f=t.outputDimensions,w=wp.data.select("core").getMedia(n),h={};return f&&"undefined"!==typeof w&&w.hasOwnProperty("media_details")&&w.media_details.width>0&&w.media_details.height>0&&(h.width=w.media_details.width,h.height=w.media_details.height),wp.element.createElement("figure",null,d&&wp.element.createElement("video",r({autoPlay:o,controls:c,loop:s,muted:u,poster:p,preload:"metadata"!==m?m:void 0,playsInline:b},h),wp.element.createElement("source",null)),!i(a)&&wp.element.createElement(l.Content,{tagName:"figcaption",value:a}))}t.a=o;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=wp.blockEditor.RichText,a=n(0),i=a.isEmpty},function(e,t){e.exports={autoplay:{type:"boolean",source:"attribute",selector:"video",attribute:"autoplay"},caption:{type:"string",source:"html",selector:"figcaption"},controls:{type:"boolean",source:"attribute",selector:"video",attribute:"controls",default:!0},id:{type:"number"},muxId:{type:"string"},outputDimensions:{type:"boolean"},loop:{type:"boolean",source:"attribute",selector:"video",attribute:"loop"},muted:{type:"boolean",source:"attribute",selector:"video",attribute:"muted"},poster:{type:"string",source:"attribute",selector:"video",attribute:"poster"},preload:{type:"string",source:"attribute",selector:"video",attribute:"preload",default:"metadata"},src:{type:"string",source:"attribute",selector:"video",attribute:"src"},playsInline:{type:"boolean",source:"attribute",selector:"video",attribute:"playsinline",default:!0}}}]);