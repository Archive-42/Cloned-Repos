<!DOCTYPE html>
<html>
  <head>
<script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam-cell.nr-data.net","errorBeacon":"bam-cell.nr-data.net","licenseKey":"98ebaa2fbd","applicationID":"233526624","transactionName":"c11aERNaXltSERdDR19YUQYVGltZUwZA","queueTime":3,"applicationTime":230,"agent":""}</script>
<script>(window.NREUM||(NREUM={})).loader_config={licenseKey:"98ebaa2fbd",applicationID:"233526624"};window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var i=t[n]={exports:{}};e[n][0].call(i.exports,function(t){var i=e[n][1][t];return r(i||t)},i,i.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,n){function r(){}function i(e,t,n){return function(){return o(e,[u.now()].concat(c(arguments)),t?null:this,n),t?void 0:this}}var o=e("handle"),a=e(6),c=e(7),f=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",l=p+"ixn-";a(d,function(e,t){s[t]=i(p+t,!0,"api")}),s.addPageAction=i(p+"addPageAction",!0),s.setCurrentRouteName=i(p+"routeName",!0),t.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,i="function"==typeof t;return o(l+"tracer",[u.now(),e,n],r),function(){if(f.emit((i?"":"no-")+"fn-start",[u.now(),r,i],n),i)try{return t.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],n),e}finally{f.emit("fn-end",[u.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=i(l+t)}),newrelic.noticeError=function(e,t){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,t])}},{}],2:[function(e,t,n){function r(){return c.exists&&performance.now?Math.round(performance.now()):(o=Math.max((new Date).getTime(),o))-a}function i(){return o}var o=(new Date).getTime(),a=o,c=e(8);t.exports=r,t.exports.offset=a,t.exports.getLastTimestamp=i},{}],3:[function(e,t,n){function r(e,t){var n=e.getEntries();n.forEach(function(e){"first-paint"===e.name?d("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&d("timing",["fcp",Math.floor(e.startTime)])})}function i(e,t){var n=e.getEntries();n.length>0&&d("lcp",[n[n.length-1]])}function o(e){e.getEntries().forEach(function(e){e.hadRecentInput||d("cls",[e])})}function a(e){if(e instanceof m&&!g){var t=Math.round(e.timeStamp),n={type:e.type};t<=p.now()?n.fid=p.now()-t:t>p.offset&&t<=Date.now()?(t-=p.offset,n.fid=p.now()-t):t=p.now(),g=!0,d("timing",["fi",t,n])}}function c(e){d("pageHide",[p.now(),e])}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var f,u,s,d=e("handle"),p=e("loader"),l=e(5),m=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){f=new PerformanceObserver(r);try{f.observe({entryTypes:["paint"]})}catch(v){}u=new PerformanceObserver(i);try{u.observe({entryTypes:["largest-contentful-paint"]})}catch(v){}s=new PerformanceObserver(o);try{s.observe({type:"layout-shift",buffered:!0})}catch(v){}}if("addEventListener"in document){var g=!1,w=["click","keydown","mousedown","pointerdown","touchstart"];w.forEach(function(e){document.addEventListener(e,a,!1)})}l(c)}},{}],4:[function(e,t,n){function r(e,t){if(!i)return!1;if(e!==i)return!1;if(!t)return!0;if(!o)return!1;for(var n=o.split("."),r=t.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var c=navigator.userAgent,f=c.match(a);f&&c.indexOf("Chrome")===-1&&c.indexOf("Chromium")===-1&&(i="Safari",o=f[1])}t.exports={agent:i,version:o,match:r}},{}],5:[function(e,t,n){function r(e){function t(){e(a&&document[a]?document[a]:document[i]?"hidden":"visible")}"addEventListener"in document&&o&&document.addEventListener(o,t,!1)}t.exports=r;var i,o,a;"undefined"!=typeof document.hidden?(i="hidden",o="visibilitychange",a="visibilityState"):"undefined"!=typeof document.msHidden?(i="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",o="webkitvisibilitychange",a="webkitVisibilityState")},{}],6:[function(e,t,n){function r(e,t){var n=[],r="",o=0;for(r in e)i.call(e,r)&&(n[o]=t(r,e[r]),o+=1);return n}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],7:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(i<0?0:i);++r<i;)o[r]=e[t+r];return o}t.exports=r},{}],8:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,t,n){function r(){}function i(e){function t(e){return e&&e instanceof r?e:e?u(e,f,a):a()}function n(n,r,i,o,a){if(a!==!1&&(a=!0),!l.aborted||o){e&&a&&e(n,r,i);for(var c=t(i),f=v(n),u=f.length,s=0;s<u;s++)f[s].apply(c,r);var p=d[h[n]];return p&&p.push([b,n,r,c]),c}}function o(e,t){y[e]=v(e).concat(t)}function m(e,t){var n=y[e];if(n)for(var r=0;r<n.length;r++)n[r]===t&&n.splice(r,1)}function v(e){return y[e]||[]}function g(e){return p[e]=p[e]||i(n)}function w(e,t){s(e,function(e,n){t=t||"feature",h[n]=t,t in d||(d[t]=[])})}var y={},h={},b={on:o,addEventListener:o,removeEventListener:m,emit:n,get:g,listeners:v,context:t,buffer:w,abort:c,aborted:!1};return b}function o(e){return u(e,f,a)}function a(){return new r}function c(){(d.api||d.feature)&&(l.aborted=!0,d=l.backlog={})}var f="nr@context",u=e("gos"),s=e(6),d={},p={},l=t.exports=i();t.exports.getOrSetContext=o,l.backlog=d},{}],gos:[function(e,t,n){function r(e,t,n){if(i.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[t]=r,r}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){i.buffer([e],r),i.emit(e,t,n)}var i=e("ee").get("handle");t.exports=r,r.ee=i},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!x++){var e=b.info=NREUM.info,t=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return u.abort();f(y,function(t,n){e[t]||(e[t]=n)});var n=a();c("mark",["onload",n+b.offset],null,"api"),c("timing",["load",n]);var r=p.createElement("script");r.src="https://"+e.agent,t.parentNode.insertBefore(r,t)}}function i(){"complete"===p.readyState&&o()}function o(){c("mark",["domContent",a()+b.offset],null,"api")}var a=e(2),c=e("handle"),f=e(6),u=e("ee"),s=e(4),d=window,p=d.document,l="addEventListener",m="attachEvent",v=d.XMLHttpRequest,g=v&&v.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:v,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1194.min.js"},h=v&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),b=t.exports={offset:a.getLastTimestamp(),now:a,origin:w,features:{},xhrWrappable:h,userAgent:s};e(1),e(3),p[l]?(p[l]("DOMContentLoaded",o,!1),d[l]("load",r,!1)):(p[m]("onreadystatechange",i),d[m]("onload",r)),c("mark",["firstbyte",a.getLastTimestamp()],null,"api");var x=0},{}],"wrap-function":[function(e,t,n){function r(e,t){function n(t,n,r,f,u){function nrWrapper(){var o,a,s,p;try{a=this,o=d(arguments),s="function"==typeof r?r(o,a):r||{}}catch(l){i([l,"",[o,a,f],s],e)}c(n+"start",[o,a,f],s,u);try{return p=t.apply(a,o)}catch(m){throw c(n+"err",[o,a,m],s,u),m}finally{c(n+"end",[o,a,p],s,u)}}return a(t)?t:(n||(n=""),nrWrapper[p]=t,o(t,nrWrapper,e),nrWrapper)}function r(e,t,r,i,o){r||(r="");var c,f,u,s="-"===r.charAt(0);for(u=0;u<t.length;u++)f=t[u],c=e[f],a(c)||(e[f]=n(c,s?f+r:r,i,f,o))}function c(n,r,o,a){if(!m||t){var c=m;m=!0;try{e.emit(n,r,o,t,a)}catch(f){i([f,n,r,o],e)}m=c}}return e||(e=s),n.inPlace=r,n.flag=p,n}function i(e,t){t||(t=s);try{t.emit("internal-error",e)}catch(n){}}function o(e,t,n){if(Object.defineProperty&&Object.keys)try{var r=Object.keys(e);return r.forEach(function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){return e[n]=t,t}})}),t}catch(o){i([o],n)}for(var a in e)l.call(e,a)&&(t[a]=e[a]);return t}function a(e){return!(e&&e instanceof Function&&e.apply&&!e[p])}function c(e,t){var n=t(e);return n[p]=e,o(e,n,s),n}function f(e,t,n){var r=e[t];e[t]=c(r,n)}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;++n)t[n]=arguments[n];return t}var s=e("ee"),d=e(7),p="nr@original",l=Object.prototype.hasOwnProperty,m=!1;t.exports=r,t.exports.wrapFunction=c,t.exports.wrapInPlace=f,t.exports.argsToArray=u},{}]},{},["loader"]);</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-6242674-23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-6242674-23', { 'optimize_id': 'GTM-T48MRN9'});
    </script>

    <title>Returns</title>
<meta name="description" content="Make your functions return something meaningful, typed, and safe!">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://awesomeopensource.com/project/dry-python/returns">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

      /* copy template below */
      /* ------------------- */
      /* ----------------- */
      /* ----------------- */

      /*ipad and below */


      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {

      }

      /* end template copy */
      /* ----------------- */
      /* ----------------- */
      /* ----------------- */

      /*ipad and below */
      .show_on_phones {
        display: block;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .show_on_phones {
          display: none;
        }
      }

      .twenty_px_padding_top {
        padding-top: 20px;
      }

      /*ipad and below */
      .projects_category_explorer_left_column {
        max-width: 0;
        margin-right: 0;
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_category_explorer_left_column {
          min-width: 20%;
          margin-right: 5%;
          display: block;
        }
      }

      /*ipad and below */
      .projects_list_right_column {
        min-width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_right_column {
          min-width: 75%;
        }
      }

      .display_flex {
        display: flex;
      }

      .margin_bottom_15 {
        margin-bottom: 15px;
      }

      /*ipad and below */
      .image-gallery-image {
        width: 100% !important;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .image-gallery-image {
          width: 1280px !important;
        }
      }

      /*ipad and below */
      .aos_sponsorship_link {
        font-size: 14px;
        font-weight: bold;
        color: blue;
        text-decoration: underline;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_sponsorship_link {
          font-size: 18px;
          font-weight: bold;
          color: blue;
          text-decoration: underline;
        }
      }

      /*ipad and below */
      .aos_desktop_right_ads_container {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_desktop_right_ads_container {
          display: block;
        }
      }

      /*ipad and below */
      .aos_project_screen_container {
        margin-left: 5%;
        margin-right: 5%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_screen_container {
          margin-left: 5%;
          margin-right: 0;
          display: flex;
        }
      }

      /*ipad and below */
      .aos_project_inner_screen_container {
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_inner_screen_container {
          width: 95%;
        }
      }

      /*ipad and below
      .aos_license_text_metadata {
        margin-top: 0 !important;
      }

      everything larger than ipad
      @media screen and (min-width: 1024px) {
        .aos_license_text_metadata {
          margin-top: 0 !important;
        }
      }*/

      /*ipad and below */
      .projects_list_ad_slot_1 {
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_ad_slot_1 {
          height: fit-content;
        }
      }

      /*ipad and below */
      .projects_list_ad_slot_2 {
        height: fit-content;
        margin-top: -34px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_ad_slot_2 {
          height: fit-content;
          margin-top: 0;
        }
      }

      /*ipad and below */
      .project_page_ad_slot_1 {
        display: block;
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .project_page_ad_slot_1 {
          display: block;
          height: fit-content;
        }
      }

      /*ipad and below */
      .project_page_ad_slot_2 {
        display: block;
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .project_page_ad_slot_2 {
          display: block;
          height: fit-content;
        }
      }

      /*ipad and below */
      .aos_category_explorer_category_container {
        background-color: white;
        padding: 10px;
        margin-bottom: 0px;
        border-bottom: 1px solid lightgray;
        border-left: 1px solid lightgray;
        border-right: 1px solid lightgray;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_category_explorer_category_container {
          background-color: white;
          padding: 10px;
          margin-bottom: 0px;
          border-bottom: 1px solid lightgray;
          border-left: 1px solid lightgray;
          border-right: 1px solid lightgray;
        }
      }

      .aos_category_explorer_category_container:first-child {
        border-top: 1px solid lightgray;
      }

      /*ipad and below */
      .aos_topic_count {
        font-size: 10px;
        color: #4f4f4f;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topic_count {
          font-size: 16px;
          color: #4f4f4f;
        }
      }

      /*ipad and below */
      .aos_topic_icon {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topic_icon {
          font-size: 14px;
          display: inline-block;
        }
      }

      /*ipad and below */
      .aos_project_count {
        color: #4f4f4f;
        font-size: 14px;
        font-weight: bold;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_count {
          font-size: 14px;
          font-weight: bold;
        }
      }

      /*ipad and below */
      .aos_project_star {
        font-size: 14px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_star {
          font-size: 14px;
          /*margin-right: 7px;*/
        }
      }

      /*ipad and below */
      .aos_project_metadata_trademark_notice {
        font-size: 8px;
        color: gray;
        margin-top: 10px;
        border-bottom: 1px solid lightgray;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_trademark_notice {
          font-size: 12px;
          color: gray;
          margin-top: 20px;
          border-bottom: 1px solid lightgray;
        }
      }

      /*ipad and below */
      .aos_project_metadata_description {
        margin-bottom: 10px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_description {
          margin-bottom: 5px;
        }
      }

      .aos_project_metadata {
        display: inline-block;
        margin-bottom: 10px;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata {
          display: inline-block;
          margin-bottom: 10px;
          width: 100%;
        }
      }

      /*ipad and below */
      .aos_project_metadata_content {
        /*border-bottom: 1px solid lightgray;*/
        font-size: 16px;
        color: #000000;
        font-weight: 300;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_content {
          /*border-bottom: 1px solid lightgray;*/
          font-size: 16px;
          color: #000000;
          font-weight: 300;
        }
      }

      /*ipad and below */
      .aos_project_metadata_header {
        color: #808080;
        margin-bottom: 10px;
        margin-top: 10px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_header {
          color: #808080;
          margin-bottom: 10px;
          margin-top: 10px;
          font-size: 16px;
        }
      }

      aos_project_metadata_header:hover {
        color: #808080;
      }

      /*ipad and below */
      .aos_project_metadata_title {
        font-size: 20px;
        margin-bottom: 5px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_title {
          font-size: 30px;
          margin-bottom: 10px;
        }
      }

      /*ipad and below */
      .aos_app_container {
        display: flex;
        flex-direction: row;
        width: 100%;
        margin-bottom: 2px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_app_container {
          display: flex;
          flex-direction: row;
          width: 100%;
          margin-bottom: 0;
        }
      }

      @media screen and (min-width: 1025px) {
        .aos_desktop_ad_spacer {
          margin-top: 5px;
          margin-bottom: 5px;
        }
      }

      /*ipad and below */
      .aos_show_ad_on_mobile {
        display: none;
      }

      @media screen and (max-width: 1024px) {
        .aos_show_ad_on_mobile {
          /*display: inline-block;*/
          display: block; /*adsense recommended*/
        }
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1025px) {
        .aos_show_ad_on_desktop {
          /*display: inline-block;*/
          display: block; /*adsense recommended*/
        }
      }

      /*ipad and below */
      @media screen and (max-width: 1024px) {
        .aos_show_ad_on_desktop {
          display: none;
        }
      }

      /*ipad and below */
      .aos_filter_topics_input {
        font-size: 16px;
        padding: 10px;
        border: 1px solid lightgray;
        background-color: white;
        border-radius: 10px;
        box-shadow: 1px 1px 5px lightgrey;
        margin-bottom: 20px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_filter_topics_input {
          font-size: 20px;
          padding: 10px;
          border: 1px solid lightgray;
          background-color: white;
          border-radius: 10px;
          box-shadow: 1px 1px 5px lightgrey;
          margin-bottom: 20px;
        }
      }

      /* ipad and below */
      .aos_topics_project {
        font-family: helvetica, arial, sans-serif;
        font-size: 12px;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topics_project {
          font-family: helvetica, arial, sans-serif;
          margin-bottom: 0;
          font-size: 20px;
          border-radius: 10px;
          padding: 0;
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          width: 100%;
        }
      }

      /* ipad and below
      .aos_topics_sidebar {
        font-family: helvetica, arial, sans-serif;
        font-size: 12px;
        margin-left: 2%;
        margin-right: 2%;
        width: 94%;
        padding: 0;
        display: flex;
        flex-direction: column;
      }

       everything larger than ipad
      @media screen and (min-width: 1024px) {
        .aos_topics_sidebar {
          font-family: helvetica, arial, sans-serif;
          margin-left: 5%;
          margin-right: 2%;
          width: 30%;
          margin-bottom: 0;
          font-size: 20px;
          border-radius: 10px;
          padding: 0;
          display: flex;
          flex-direction: column;
        }
      }*/

      /*ipad and below */
      .aos_pill_box {
        display: flex;
        color: black;
        border-radius: 5px;
        padding: 2px;
        margin: 2px;
        align-items: center;
        border-color: black;
        background-color: white;
        font-size: 12px;
        border: 1px solid black;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pill_box {
          display: flex;
          color: black;
          border-radius: 5px;
          padding: 5px;
          margin: 10px;
          align-items: center;
          border: 0;
          background-color: white;
          box-shadow: 1px 1px 10px 1px rgba(0,0,0,0.25);
          font-size: 16px;
        }
      }

      /*ipad and below */
      .aos_selected_topics_text_container {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_selected_topics_text_container {
          margin-left: 25px;
          margin-right: 10px;
          margin-bottom: 10px;
          margin-top: 10px;
          padding: 5px;
          font-weight: bold;
          font-size: 20px;
          white-space: nowrap;
          display: inline-block;
        }
      }

      /*ipad and below */
      .aos_pagenavigator_links_container {
        display: flex;
        justify-content: space-around;
        font-size: 12px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pagenavigator_links_container {
          display: flex;
          justify-content: space-around;
          font-size: 16px;
        }
      }

      /*ipad and below */
      .aos_project_container {
        padding-bottom: 20px;
        padding-left: 0;
        padding-right: 0;
        padding-top: 5px;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_container {
          /*border-radius: 10px;*/
          padding-bottom: 20px;
          padding-left: 0;
          padding-right: 0;
          padding-top: 5px;
          width: 100%;
        }
      }

      /*ipad and below */
      .aos_project_description {
        font-size: 16px;
        width: 100%;
        font-weight: 300; /* match adsense */
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_description {
          font-size: 16px;
          font-weight: 300; /* match adsense */
        }
      }

      /*ipad and below */
      .aos_project_title {
        font-size: 20px;
        margin-bottom: 2px;
        font-weight: 400; /* match adsense */
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_title {
          font-size: 20px;
          margin-bottom: 2px;
          font-weight: 400; /* match adsense */
        }
      }

      .aos_project_title a :hover {
        text-decoration: none !important;
      }

      .aos_no_underline:hover {
        text-decoration: none !important;
      }

      .aos_grey_link:hover {
        color: #808080 !important;
      }

      .aos_grey_link {
        color: #808080 !important;
      }

      /*ipad and below */
      .category_topic_filter_container {
        width: 94%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .category_topic_filter_container {
          width: 94%;
        }
      }

      /*ipad and below */
      .aos_projects_container {
        font-family: helvetica, arial, sans-serif;
        margin-right: 2%;
        width: 96%; /* won't insert an ad this small (68%), but bigger and it overflows to the right with some topics that are long */
        font-size: 14px;
        margin-bottom: 5px;
        margin-left: 2%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_projects_container {
          font-family: helvetica, arial, sans-serif;
          margin-right: 0;
          width: 90%; /* was 53 before removing right margin spacer / ad container */
          font-size: 18px;
          margin-bottom: 5px;
          min-width: 800px;
          margin-left: 5%;
        }
      }

      /*ipad and below */
      .aos_pagenavigator_container {
        display: flex;
        justify-content: center;
        font-size: 9px;
        margin-bottom: 0;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pagenavigator_container {
          display: flex;
          justify-content: center;
          font-size: 16px;
          margin-bottom: 10px;
        }
      }

      /*ipad and below */
      .aos_header_title_container_ipad_and_smaller {
        font-size: 12px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 134px;
        white-space: nowrap;
        flex-direction: column;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_header_title_container_ipad_and_smaller {
          display: none;
        }
      }


      /*ipad and below */
      .aos_header_title_container_larger_than_ipad {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_header_title_container_larger_than_ipad {
          display: block;
        }
      }

      /*ipad and below */
      .aos_logo_image {
        height: 25px;
        width: 25px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_logo_image {
          height: 50px;
          width: 50px;
        }
      }

      /*ipad and below */
      .aos_fixed_footer_container {
        display: flex;
        margin-left: 0;
        margin-right: 0;
        margin-top: 2px;
        width: 100%;
        justify-content: center;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_fixed_footer_container {
          display: flex;
          margin-left: 5%;
          margin-right: 20%;
          margin-top: 5px;
          margin-bottom: 5px;
          width: 75%;
          justify-content: center;
        }
      }

      /*ipad and below */
      .aos_fixed_header_container {
        margin-left: 2%;
        margin-right: 2%;
        margin-top: 4px;
        margin-bottom: 2px;
        width: 96%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_fixed_header_container {
          margin-left: 5%;
          margin-right: 20%;
          margin-top: 5px;
          margin-bottom: 5px;
          width: 75%;
        }
      }

      /*ipad and below */
      body {
        margin-top: 0;
        margin-right: 0;
        margin-bottom: 0;
        margin-left: 0;
        padding: 0
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        body {
          margin-top: 0;
          margin-right: 0;
          margin-bottom: 0;
          margin-left: 0;
          padding: 0
        }
      }

      /* ipad and below */
      .aos_topics_sidebar_link {
        width: 100%;
        margin-bottom: 10px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 14px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topics_sidebar_link {
          width: 100%;
          margin-bottom: 10px;
          font-size: 18px;
        }
      }

      html {
        margin: 0;
        padding: 0
      }

      a {
        color: #000000;
        text-decoration: none;
      }

      a:visited {
        text-decoration: none;
      }

      a:hover {
        /*color: #0366d6;*/
        color: #000000; /* match adsense */
        text-decoration: underline;
      }

      .AOS_Pill:hover {
        text-decoration: none;
      }

      /* MIT licensed github-markdown.css */
      /* https://github.com/sindresorhus/github-markdown-css */
      @font-face {
        font-family: octicons-link;
        src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
      }
      .markdown-body {
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
        line-height: 1.5;
        color: #24292e;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-size: 16px;
        line-height: 1.5;
        word-wrap: break-word;
      }
      .markdown-body .pl-c {
        color: #6a737d;
      }
      .markdown-body .pl-c1,
      .markdown-body .pl-s .pl-v {
        color: #005cc5;
      }
      .markdown-body .pl-e,
      .markdown-body .pl-en {
        color: #6f42c1;
      }
      .markdown-body .pl-smi,
      .markdown-body .pl-s .pl-s1 {
        color: #24292e;
      }
      .markdown-body .pl-ent {
        color: #22863a;
      }
      .markdown-body .pl-k {
        color: #d73a49;
      }
      .markdown-body .pl-s,
      .markdown-body .pl-pds,
      .markdown-body .pl-s .pl-pse .pl-s1,
      .markdown-body .pl-sr,
      .markdown-body .pl-sr .pl-cce,
      .markdown-body .pl-sr .pl-sre,
      .markdown-body .pl-sr .pl-sra {
        color: #032f62;
      }
      .markdown-body .pl-v,
      .markdown-body .pl-smw {
        color: #e36209;
      }
      .markdown-body .pl-bu {
        color: #b31d28;
      }
      .markdown-body .pl-ii {
        color: #fafbfc;
        background-color: #b31d28;
      }
      .markdown-body .pl-c2 {
        color: #fafbfc;
        background-color: #d73a49;
      }
      .markdown-body .pl-c2::before {
        content: "^M";
      }
      .markdown-body .pl-sr .pl-cce {
        font-weight: bold;
        color: #22863a;
      }
      .markdown-body .pl-ml {
        color: #735c0f;
      }
      .markdown-body .pl-mh,
      .markdown-body .pl-mh .pl-en,
      .markdown-body .pl-ms {
        font-weight: bold;
        color: #005cc5;
      }
      .markdown-body .pl-mi {
        font-style: italic;
        color: #24292e;
      }
      .markdown-body .pl-mb {
        font-weight: bold;
        color: #24292e;
      }
      .markdown-body .pl-md {
        color: #b31d28;
        background-color: #ffeef0;
      }
      .markdown-body .pl-mi1 {
        color: #22863a;
        background-color: #f0fff4;
      }
      .markdown-body .pl-mc {
        color: #e36209;
        background-color: #ffebda;
      }
      .markdown-body .pl-mi2 {
        color: #f6f8fa;
        background-color: #005cc5;
      }
      .markdown-body .pl-mdr {
        font-weight: bold;
        color: #6f42c1;
      }
      .markdown-body .pl-ba {
        color: #586069;
      }
      .markdown-body .pl-sg {
        color: #959da5;
      }
      .markdown-body .pl-corl {
        text-decoration: underline;
        color: #032f62;
      }
      .markdown-body .octicon {
        display: inline-block;
        vertical-align: text-top;
        fill: currentColor;
      }
      .markdown-body a {
        background-color: transparent;
      }
      .markdown-body a:active,
      .markdown-body a:hover {
        outline-width: 0;
      }
      .markdown-body strong {
        font-weight: inherit;
      }
      .markdown-body strong {
        font-weight: bolder;
      }
      .markdown-body h1 {
        font-size: 2em;
        margin: 0.67em 0;
      }
      .markdown-body img {
        border-style: none;
      }
      .markdown-body code,
      .markdown-body kbd,
      .markdown-body pre {
        font-family: monospace, monospace;
        font-size: 1em;
      }
      .markdown-body hr {
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }
      .markdown-body input {
        font: inherit;
        margin: 0;
      }
      .markdown-body input {
        overflow: visible;
      }
      .markdown-body [type="checkbox"] {
        box-sizing: border-box;
        padding: 0;
      }
      .markdown-body * {
        box-sizing: border-box;
      }
      .markdown-body input {
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
      }
      .markdown-body a {
        color: #0366d6;
        text-decoration: none;
      }
      .markdown-body a:hover {
        text-decoration: underline;
      }
      .markdown-body strong {
        font-weight: 600;
      }
      .markdown-body hr {
        height: 0;
        margin: 15px 0;
        overflow: hidden;
        background: transparent;
        border: 0;
        border-bottom: 1px solid #dfe2e5;
      }
      .markdown-body hr::before {
        display: table;
        content: "";
      }
      .markdown-body hr::after {
        display: table;
        clear: both;
        content: "";
      }
      .markdown-body table {
        border-spacing: 0;
        border-collapse: collapse;
      }
      .markdown-body td,
      .markdown-body th {
        padding: 0;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body h1 {
        font-size: 32px;
        font-weight: 600;
      }
      .markdown-body h2 {
        font-size: 24px;
        font-weight: 600;
      }
      .markdown-body h3 {
        font-size: 20px;
        font-weight: 600;
      }
      .markdown-body h4 {
        font-size: 16px;
        font-weight: 600;
      }
      .markdown-body h5 {
        font-size: 14px;
        font-weight: 600;
      }
      .markdown-body h6 {
        font-size: 12px;
        font-weight: 600;
      }
      .markdown-body p {
        margin-top: 0;
        margin-bottom: 10px;
      }
      .markdown-body blockquote {
        margin: 0;
      }
      .markdown-body ul,
      .markdown-body ol {
        padding-left: 0;
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body ol ol,
      .markdown-body ul ol {
        list-style-type: lower-roman;
      }
      .markdown-body ul ul ol,
      .markdown-body ul ol ol,
      .markdown-body ol ul ol,
      .markdown-body ol ol ol {
        list-style-type: lower-alpha;
      }
      .markdown-body dd {
        margin-left: 0;
      }
      .markdown-body code {
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        font-size: 12px;
      }
      .markdown-body pre {
        margin-top: 0;
        margin-bottom: 0;
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        font-size: 12px;
      }
      .markdown-body .octicon {
        vertical-align: text-bottom;
      }
      .markdown-body .pl-0 {
        padding-left: 0 !important;
      }
      .markdown-body .pl-1 {
        padding-left: 4px !important;
      }
      .markdown-body .pl-2 {
        padding-left: 8px !important;
      }
      .markdown-body .pl-3 {
        padding-left: 16px !important;
      }
      .markdown-body .pl-4 {
        padding-left: 24px !important;
      }
      .markdown-body .pl-5 {
        padding-left: 32px !important;
      }
      .markdown-body .pl-6 {
        padding-left: 40px !important;
      }
      .markdown-body::before {
        display: table;
        content: "";
      }
      .markdown-body::after {
        display: table;
        clear: both;
        content: "";
      }
      .markdown-body>*:first-child {
        margin-top: 0 !important;
      }
      .markdown-body>*:last-child {
        margin-bottom: 0 !important;
      }
      .markdown-body a:not([href]) {
        color: inherit;
        text-decoration: none;
      }
      .markdown-body .anchor {
        float: left;
        padding-right: 4px;
        margin-left: -20px;
        line-height: 1;
      }
      .markdown-body .anchor:focus {
        outline: none;
      }
      .markdown-body p,
      .markdown-body blockquote,
      .markdown-body ul,
      .markdown-body ol,
      .markdown-body dl,
      .markdown-body table,
      .markdown-body pre {
        margin-top: 0;
        margin-bottom: 16px;
      }
      .markdown-body hr {
        height: 0.25em;
        padding: 0;
        margin: 24px 0;
        background-color: #e1e4e8;
        border: 0;
      }
      .markdown-body blockquote {
        padding: 0 1em;
        color: #6a737d;
        border-left: 0.25em solid #dfe2e5;
      }
      .markdown-body blockquote>:first-child {
        margin-top: 0;
      }
      .markdown-body blockquote>:last-child {
        margin-bottom: 0;
      }
      .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font-size: 11px;
        line-height: 10px;
        color: #444d56;
        vertical-align: middle;
        background-color: #fafbfc;
        border: solid 1px #c6cbd1;
        border-bottom-color: #959da5;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #959da5;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        margin-top: 24px;
        margin-bottom: 16px;
        font-weight: 600;
        line-height: 1.25;
      }
      .markdown-body h1 .octicon-link,
      .markdown-body h2 .octicon-link,
      .markdown-body h3 .octicon-link,
      .markdown-body h4 .octicon-link,
      .markdown-body h5 .octicon-link,
      .markdown-body h6 .octicon-link {
        color: #1b1f23;
        vertical-align: middle;
        visibility: hidden;
      }
      .markdown-body h1:hover .anchor,
      .markdown-body h2:hover .anchor,
      .markdown-body h3:hover .anchor,
      .markdown-body h4:hover .anchor,
      .markdown-body h5:hover .anchor,
      .markdown-body h6:hover .anchor {
        text-decoration: none;
      }
      .markdown-body h1:hover .anchor .octicon-link,
      .markdown-body h2:hover .anchor .octicon-link,
      .markdown-body h3:hover .anchor .octicon-link,
      .markdown-body h4:hover .anchor .octicon-link,
      .markdown-body h5:hover .anchor .octicon-link,
      .markdown-body h6:hover .anchor .octicon-link {
        visibility: visible;
      }
      .markdown-body h1 {
        padding-bottom: 0.3em;
        font-size: 2em;
        border-bottom: 1px solid #eaecef;
      }
      .markdown-body h2 {
        padding-bottom: 0.3em;
        font-size: 1.5em;
        border-bottom: 1px solid #eaecef;
      }
      .markdown-body h3 {
        font-size: 1.25em;
      }
      .markdown-body h4 {
        font-size: 1em;
      }
      .markdown-body h5 {
        font-size: 0.875em;
      }
      .markdown-body h6 {
        font-size: 0.85em;
        color: #6a737d;
      }
      .markdown-body ul,
      .markdown-body ol {
        padding-left: 2em;
      }
      .markdown-body ul ul,
      .markdown-body ul ol,
      .markdown-body ol ol,
      .markdown-body ol ul {
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body li {
        word-wrap: break-all;
      }
      .markdown-body li>p {
        margin-top: 16px;
      }
      .markdown-body li+li {
        margin-top: 0.25em;
      }
      .markdown-body dl {
        padding: 0;
      }
      .markdown-body dl dt {
        padding: 0;
        margin-top: 16px;
        font-size: 1em;
        font-style: italic;
        font-weight: 600;
      }
      .markdown-body dl dd {
        padding: 0 16px;
        margin-bottom: 16px;
      }
      .markdown-body table {
        display: block;
        width: 100%;
        overflow: auto;
      }
      .markdown-body table th {
        font-weight: 600;
      }
      .markdown-body table th,
      .markdown-body table td {
        padding: 6px 13px;
        border: 1px solid #dfe2e5;
      }
      .markdown-body table tr {
        background-color: #fff;
        border-top: 1px solid #c6cbd1;
      }
      .markdown-body table tr:nth-child(2n) {
        background-color: #f6f8fa;
      }
      .markdown-body img {
        max-width: 100%;
        box-sizing: content-box;
        background-color: #fff;
      }
      .markdown-body img[align=right] {
        padding-left: 20px;
      }
      .markdown-body img[align=left] {
        padding-right: 20px;
      }
      .markdown-body code {
        padding: 0.2em 0.4em;
        margin: 0;
        font-size: 85%;
        background-color: rgba(27,31,35,0.05);
        border-radius: 3px;
      }
      .markdown-body pre {
        word-wrap: normal;
      }
      .markdown-body pre>code {
        padding: 0;
        margin: 0;
        font-size: 100%;
        word-break: normal;
        white-space: pre;
        background: transparent;
        border: 0;
      }
      .markdown-body .highlight {
        margin-bottom: 16px;
      }
      .markdown-body .highlight pre {
        margin-bottom: 0;
        word-break: normal;
      }
      .markdown-body .highlight pre,
      .markdown-body pre {
        padding: 16px;
        overflow: auto;
        font-size: 85%;
        line-height: 1.45;
        background-color: #f6f8fa;
        border-radius: 3px;
      }
      .markdown-body pre code {
        display: inline;
        max-width: auto;
        padding: 0;
        margin: 0;
        overflow: visible;
        line-height: inherit;
        word-wrap: normal;
        background-color: transparent;
        border: 0;
      }
      .markdown-body .full-commit .btn-outline:not(:disabled):hover {
        color: #005cc5;
        border-color: #005cc5;
      }
      .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font: 11px "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        line-height: 10px;
        color: #444d56;
        vertical-align: middle;
        background-color: #fafbfc;
        border: solid 1px #d1d5da;
        border-bottom-color: #c6cbd1;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #c6cbd1;
      }
      .markdown-body :checked+.radio-label {
        position: relative;
        z-index: 1;
        border-color: #0366d6;
      }
      .markdown-body .task-list-item {
        list-style-type: none;
      }
      .markdown-body .task-list-item+.task-list-item {
        margin-top: 3px;
      }
      .markdown-body .task-list-item input {
        margin: 0 0.2em 0.25em -1.6em;
        vertical-align: middle;
      }
      .markdown-body hr {
        border-bottom-color: #eee;
      }
      /* github-markdown.css overrides */
      .markdown-body h2 {
        margin-bottom: 0;
        margin-top: 0;
      }

      .hll { background-color: #ffffcc }
      .c { color: #008000 } /* Comment */
      .err { border: 1px solid #FF0000 } /* Error */
      .k { color: #0000ff } /* Keyword */
      .cm { color: #008000 } /* Comment.Multiline */
      .cp { color: #0000ff } /* Comment.Preproc */
      .c1 { color: #008000 } /* Comment.Single */
      .cs { color: #008000 } /* Comment.Special */
      .ge { font-style: italic } /* Generic.Emph */
      .gh { font-weight: bold } /* Generic.Heading */
      .gp { font-weight: bold } /* Generic.Prompt */
      .gs { font-weight: bold } /* Generic.Strong */
      .gu { font-weight: bold } /* Generic.Subheading */
      .kc { color: #0000ff } /* Keyword.Constant */
      .kd { color: #0000ff } /* Keyword.Declaration */
      .kn { color: #0000ff } /* Keyword.Namespace */
      .kp { color: #0000ff } /* Keyword.Pseudo */
      .kr { color: #0000ff } /* Keyword.Reserved */
      .kt { color: #2b91af } /* Keyword.Type */
      .s { color: #a31515 } /* Literal.String */
      .nc { color: #2b91af } /* Name.Class */
      .ow { color: #0000ff } /* Operator.Word */
      .sb { color: #a31515 } /* Literal.String.Backtick */
      .sc { color: #a31515 } /* Literal.String.Char */
      .sd { color: #a31515 } /* Literal.String.Doc */
      .s2 { color: #a31515 } /* Literal.String.Double */
      .se { color: #a31515 } /* Literal.String.Escape */
      .sh { color: #a31515 } /* Literal.String.Heredoc */
      .si { color: #a31515 } /* Literal.String.Interpol */
      .sx { color: #a31515 } /* Literal.String.Other */
      .sr { color: #a31515 } /* Literal.String.Regex */
      .s1 { color: #a31515 } /* Literal.String.Single */
      .ss { color: #a31515 } /* Literal.String.Symbol */

    </style>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Product",
  "name": "dry-python/returns",
  "description": "Make your functions return something meaningful, typed, and safe!",
  "url": "https://awesomeopensource.com/project/dry-python/returns",
  "sku": "project/dry-python/returns",
  "mpn": "project/dry-python/returns",
  "image": "https://github.com/dry-python.png",
  "brand": {
    "@type": "Brand",
    "name": "dry-python/returns",
    "logo": "https://github.com/dry-python.png"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.94",
    "ratingCount": "1534"
  }
}
</script>


    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="HU65Zk+royJg0yQOezH8D//uJrWrYsBAglOLkFFP0BAf+1DNPtGuoXlhUr6O+D1fxYGF8t4OQm3ZD1Y2PB1xqg==" />
  <script async src='/cdn-cgi/bm/cv/669835187/api.js'></script></head>

  <body>
    <script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","rorVersion":"11.2.1","rorPro":false,"href":"http://awesomeopensource.com/project/dry-python/returns","location":"/project/dry-python/returns","scheme":"http","host":"awesomeopensource.com","port":null,"pathname":"/project/dry-python/returns","search":null,"httpAcceptLanguage":null,"serverSide":false}</script>
<div id="Root-react-component-dedb1ca5-e13c-4f0e-ba0e-bacf0e6eda7c"><div style="font-family:helvetica, arial, sans-serif" data-reactroot=""><div class="aos_fixed_header_container"><div class="display_flex margin_bottom_15"><div style="margin-right:1%;display:flex;align-items:center"><a href="https://awesomeopensource.com" title="Awesome Open Source Home" rel="canonical"><img src="https://awesomeopensource.com/awesome.gif" class="aos_logo_image"/></a></div><div class="aos_header_title_container_larger_than_ipad"><div style="white-space:nowrap;font-size:24px;font-weight:bold;display:flex;flex-direction:row;align-items:center;height:100%"><div>Awesome Open Source</div></div></div><div class="aos_header_title_container_ipad_and_smaller"><div>Awesome Open Source</div></div><div style="display:flex;flex-wrap:wrap"></div></div><div></div></div><div class="aos_project_screen_container"><div class="aos_project_inner_screen_container"><div class="aos_project_metadata"><div class="aos_project_metadata_title">Returns</div><div class="aos_project_metadata_description">Make your functions return something meaningful, typed, and safe!</div><div class="aos_project_metadata_header">Stars</div><span class="aos_project_metadata_content">1,534</span><div class="project_page_ad_slot_1"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-gv-v+1t-u+27" data-ad-client="ca-pub-1878397330895234" data-ad-slot="5649017589"></ins></div><div class="aos_project_metadata_header aos_license_text_metadata">License</div><span class="aos_project_metadata_content">bsd-2-clause</span><span><div class="aos_project_metadata_header"><a href="https://returns.rtfd.io" target="_blank" class="aos_grey_link" rel="nofollow">Homepage</a></div> <span class="aos_project_metadata_content"><a href="https://returns.rtfd.io" target="_blank">https://returns.rtfd.io</a></span></span><div class="aos_project_metadata_header"><a href="https://github.com/dry-python/returns" target="_blank" class="aos_grey_link" rel="nofollow">Repository</a></div><span class="aos_project_metadata_content"><a href="https://github.com/dry-python/returns" target="_blank">https://github.com/dry-python/returns</a></span><div class="aos_project_metadata_header"><a href="https://github.com/dry-python/returns/issues" target="_blank" class="aos_grey_link" rel="nofollow">Open Issues</a></div><span class="aos_project_metadata_content"><a href="https://github.com/dry-python/returns/issues" target="_blank">37</a></span><div class="aos_project_metadata_header">Most Recent Commit</div><span class="aos_project_metadata_content">3 days ago</span><div class="aos_project_metadata_header">Related Projects</div><span class="aos_project_metadata_content"><a href="https://awesomeopensource.com/projects/python"><div style="display:block;text-decoration:none;padding-bottom:10px">python<span> (<!-- -->49,729<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/hacktoberfest"><div style="display:block;text-decoration:none;padding-bottom:10px">hacktoberfest<span> (<!-- -->4,238<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/python3"><div style="display:block;text-decoration:none;padding-bottom:10px">python3<span> (<!-- -->1,466<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/functional-programming"><div style="display:block;text-decoration:none;padding-bottom:10px">functional-programming<span> (<!-- -->457<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/fp"><div style="display:block;text-decoration:none;padding-bottom:10px">fp<span> (<!-- -->51<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/type-safety"><div style="display:block;text-decoration:none;padding-bottom:10px">type-safety<span> (<!-- -->49<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/mypy"><div style="display:block;text-decoration:none;padding-bottom:10px">mypy<span> (<!-- -->25<!-- -->)</span></div></a></span></div><div class="markdown-body"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p><a href="https://github.com/dry-python/returns" rel="nofollow"><img src="https://raw.githubusercontent.com/dry-python/brand/master/logo/returns_white-outline.png" alt="Returns logo" style="max-width:100%;"></a></p>
<hr>
<p><a href="https://github.com/dry-python/returns/actions?query=workflow%3Atest" rel="nofollow"><img src="https://github.com/dry-python/returns/workflows/test/badge.svg?branch=master&amp;event=push" alt="Build Status" style="max-width:100%;"></a>
<a href="https://codecov.io/gh/dry-python/returns" rel="nofollow"><img src="https://codecov.io/gh/dry-python/returns/branch/master/graph/badge.svg" alt="codecov" style="max-width:100%;"></a>
<a href="https://returns.readthedocs.io/en/latest/?badge=latest" rel="nofollow"><img src="https://readthedocs.org/projects/returns/badge/?version=latest" alt="Documentation Status" style="max-width:100%;"></a>
<a href="https://pypi.org/project/returns/" rel="nofollow"><img src="https://img.shields.io/pypi/pyversions/returns.svg" alt="Python Version" style="max-width:100%;"></a>
<a href="https://github.com/wemake-services/wemake-python-styleguide" rel="nofollow"><img src="https://img.shields.io/badge/style-wemake-000000.svg" alt="wemake-python-styleguide" style="max-width:100%;"></a>
<a href="https://t.me/drypython" rel="nofollow"><img src="https://img.shields.io/badge/chat-join-blue?logo=telegram" alt="Telegram chat" style="max-width:100%;"></a>
<a href="https://repl.it/@sobolevn/returns#ex.py" rel="nofollow"><img src="https://repl.it/badge/github/sobolevn/returns" alt="Demo" style="max-width:100%;"></a></p>
<hr>
<p>Make your functions return something meaningful, typed, and safe!</p>
<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>
<ul>
<li>Brings functional programming to Python land</li>
<li>Provides a bunch of primitives to write declarative business logic</li>
<li>Enforces better architecture</li>
<li>Fully typed with annotations and checked with <code>mypy</code>, <a href="https://www.python.org/dev/peps/pep-0561/" rel="nofollow">PEP561 compatible</a>
</li>
<li>Adds emulated Higher Kinded Types support</li>
<li>Provides type-safe interfaces to create your own data-types with enforced laws</li>
<li>Has a bunch of helpers for better composition</li>
<li>Pythonic and pleasant to write and to read 🐍</li>
<li>Support functions and coroutines, framework agnostic</li>
<li>Easy to start: has lots of docs, tests, and tutorials</li>
</ul>
<p><a href="https://returns.readthedocs.io/en/latest/pages/quickstart.html" rel="nofollow">Quickstart</a> right now!</p>
<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>
<pre lang="bash" class="highlight-bash">pip <span class="nb">install </span>returns
</pre>
<p>You are also required to <a href="https://returns.readthedocs.io/en/latest/pages/container.html#type-safety" rel="nofollow">configure</a>
<code>mypy</code> correctly and install our plugin
to fix <a href="https://github.com/python/mypy/issues/3157" rel="nofollow">this existing issue</a>:</p>
<pre lang="ini" class="highlight-ini"><span class="c"># In setup.cfg or mypy.ini:
</span><span class="nn">[mypy]</span>
<span class="py">plugins</span> <span class="p">=</span>
  <span class="err">returns.contrib.mypy.returns_plugin</span>
</pre>
<p>We also recommend to use the same <code>mypy</code> settings <a href="https://github.com/wemake-services/wemake-python-styleguide/blob/master/styles/mypy.toml" rel="nofollow">we use</a>.</p>
<p>Make sure you know how to get started, <a href="https://returns.readthedocs.io/en/latest/" rel="nofollow">check out our docs</a>!
<a href="https://repl.it/@sobolevn/returns#ex.py" rel="nofollow">Try our demo</a>.</p>
<h2>
<a id="contents" class="anchor" href="#contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contents</h2>
<ul>
<li>
<a href="#maybe-container">Maybe container</a> that allows you to write <code>None</code>-free code</li>
<li>
<a href="#requirescontext-container">RequiresContext container</a> that allows you to use typed functional dependency injection</li>
<li>
<a href="#result-container">Result container</a> that let's you to get rid of exceptions</li>
<li>
<a href="#io-container">IO container</a> and <a href="#troublesome-io">IOResult</a> that marks all impure operations and structures them</li>
<li>
<a href="#future-container">Future container</a> and <a href="#async-code-without-exceptions">FutureResult</a> to work with <code>async</code> code</li>
<li>
<a href="https://returns.readthedocs.io/en/latest/pages/create-your-own-container.html" rel="nofollow">Write your own container!</a> You would still have all the features for your own types (including full existing code reuse and type-safety)</li>
</ul>
<h2>
<a id="maybe-container" class="anchor" href="#maybe-container" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Maybe container</h2>
<p><code>None</code> is called the <a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/" rel="nofollow">worst mistake in the history of Computer Science</a>.</p>
<p>So, what can we do to check for <code>None</code> in our programs?
You can use builtin <a href="https://mypy.readthedocs.io/en/stable/kinds_of_types.html#optional-types-and-the-none-type" rel="nofollow">Optional</a> type
and write a lot of <code>if some is not None:</code> conditions.
But, <strong>having <code>null</code> checks here and there makes your code unreadable</strong>.</p>
<pre lang="python" class="highlight-python"><span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">User</span><span class="p">]</span>
<span class="n">discount_program</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s">'DiscountProgram'</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span>

<span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
     <span class="n">balance</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">get_balance</span><span class="p">()</span>
     <span class="k">if</span> <span class="n">balance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
         <span class="n">credit</span> <span class="o">=</span> <span class="n">balance</span><span class="o">.</span><span class="n">credit_amount</span><span class="p">()</span>
         <span class="k">if</span> <span class="n">credit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">credit</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
             <span class="n">discount_program</span> <span class="o">=</span> <span class="n">choose_discount</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span>
</pre>
<p>Or you can use
<a href="https://returns.readthedocs.io/en/latest/pages/maybe.html" rel="nofollow">Maybe</a> container!
It consists of <code>Some</code> and <code>Nothing</code> types,
representing existing state and empty (instead of <code>None</code>) state respectively.</p>
<pre lang="python" class="highlight-python"><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="nn">returns.maybe</span> <span class="kn">import</span> <span class="n">Maybe</span><span class="p">,</span> <span class="n">maybe</span>

<span class="nd">@maybe</span>  <span class="c"># decorator to convert existing Optional[int] to Maybe[int]</span>
<span class="k">def</span> <span class="nf">bad_function</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="o">...</span>

<span class="n">maybe_number</span><span class="p">:</span> <span class="n">Maybe</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">bad_function</span><span class="p">()</span><span class="o">.</span><span class="n">bind_optional</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">number</span><span class="p">:</span> <span class="n">number</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">)</span>
<span class="c"># =&gt; Maybe will return Some[float] only if there's a non-None value</span>
<span class="c">#    Otherwise, will return Nothing</span>
</pre>
<p>You can be sure that <code>.bind_optional()</code> method won't be called for <code>Nothing</code>.
Forget about <code>None</code>-related errors forever!</p>
<p>We can also bind a <code>Optional</code>-returning function over a container.
To achieve this, we are going to use <code>.bind_optional</code> method.</p>
<p>And that's how your initial refactored code will look like:</p>
<pre lang="python" class="highlight-python"><span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">User</span><span class="p">]</span>

<span class="c"># Type hint here is optional, it only helps the reader here:</span>
<span class="n">discount_program</span><span class="p">:</span> <span class="n">Maybe</span><span class="p">[</span><span class="s">'DiscountProgram'</span><span class="p">]</span> <span class="o">=</span> <span class="n">Maybe</span><span class="o">.</span><span class="n">from_optional</span><span class="p">(</span>
    <span class="n">user</span><span class="p">,</span>
<span class="p">)</span><span class="o">.</span><span class="n">bind_optional</span><span class="p">(</span>  <span class="c"># This won't be called if `user is None`</span>
    <span class="k">lambda</span> <span class="n">real_user</span><span class="p">:</span> <span class="n">real_user</span><span class="o">.</span><span class="n">get_balance</span><span class="p">(),</span>
<span class="p">)</span><span class="o">.</span><span class="n">bind_optional</span><span class="p">(</span>  <span class="c"># This won't be called if `real_user.get_balance()` is None</span>
    <span class="k">lambda</span> <span class="n">balance</span><span class="p">:</span> <span class="n">balance</span><span class="o">.</span><span class="n">credit_amount</span><span class="p">(),</span>
<span class="p">)</span><span class="o">.</span><span class="n">bind_optional</span><span class="p">(</span>  <span class="c"># And so on!</span>
    <span class="k">lambda</span> <span class="n">credit</span><span class="p">:</span> <span class="n">choose_discount</span><span class="p">(</span><span class="n">credit</span><span class="p">)</span> <span class="k">if</span> <span class="n">credit</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="bp">None</span><span class="p">,</span>
<span class="p">)</span>
</pre>
<p>Much better, isn't it?</p>
<h2>
<a id="requirescontext-container" class="anchor" href="#requirescontext-container" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>RequiresContext container</h2>
<p>Many developers do use some kind of dependency injection in Python.
And usually it is based on the idea
that there's some kind of a container and assembly process.</p>
<p>Functional approach is much simpler!</p>
<p>Imagine that you have a <code>django</code> based game, where you award users with points for each guessed letter in a word (unguessed letters are marked as <code>'.'</code>):</p>
<pre lang="python" class="highlight-python"><span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpRequest</span><span class="p">,</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">words_app.logic</span> <span class="kn">import</span> <span class="n">calculate_points</span>

<span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">HttpRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
    <span class="n">user_word</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'word'</span><span class="p">]</span>  <span class="c"># just an example</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">calculate_points</span><span class="p">(</span><span class="n">user_word</span><span class="p">)</span>
    <span class="o">...</span>  <span class="c"># later you show the result to user somehow</span>

<span class="c"># Somewhere in your `words_app/logic.py`:</span>

<span class="k">def</span> <span class="nf">calculate_points</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">guessed_letters_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">letter</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span> <span class="k">if</span> <span class="n">letter</span> <span class="o">!=</span> <span class="s">'.'</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">_award_points_for_letters</span><span class="p">(</span><span class="n">guessed_letters_count</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_award_points_for_letters</span><span class="p">(</span><span class="n">guessed</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">guessed</span> <span class="o">&lt;</span> <span class="mi">5</span> <span class="k">else</span> <span class="n">guessed</span>  <span class="c"># minimum 6 points possible!</span>
</pre>
<p>Awesome! It works, users are happy, your logic is pure and awesome.
But, later you decide to make the game more fun:
let's make the minimal accountable letters threshold
configurable for an extra challenge.</p>
<p>You can just do it directly:</p>
<pre lang="python" class="highlight-python"><span class="k">def</span> <span class="nf">_award_points_for_letters</span><span class="p">(</span><span class="n">guessed</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">threshold</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">guessed</span> <span class="o">&lt;</span> <span class="n">threshold</span> <span class="k">else</span> <span class="n">guessed</span>
</pre>
<p>The problem is that <code>_award_points_for_letters</code> is deeply nested.
And then you have to pass <code>threshold</code> through the whole callstack,
including <code>calculate_points</code> and all other functions that might be on the way.
All of them will have to accept <code>threshold</code> as a parameter!
This is not useful at all!
Large code bases will struggle a lot from this change.</p>
<p>Ok, you can directly use <code>django.settings</code> (or similar)
in your <code>_award_points_for_letters</code> function.
And <strong>ruin your pure logic with framework specific details</strong>. That's ugly!</p>
<p>Or you can use <code>RequiresContext</code> container. Let's see how our code changes:</p>
<pre lang="python" class="highlight-python"><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpRequest</span><span class="p">,</span> <span class="n">HttpResponse</span>
<span class="kn">from</span> <span class="nn">words_app.logic</span> <span class="kn">import</span> <span class="n">calculate_points</span>

<span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="n">HttpRequest</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">HttpResponse</span><span class="p">:</span>
    <span class="n">user_word</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s">'word'</span><span class="p">]</span>  <span class="c"># just an example</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">calculate_points</span><span class="p">(</span><span class="n">user_words</span><span class="p">)(</span><span class="n">settings</span><span class="p">)</span>  <span class="c"># passing the dependencies</span>
    <span class="o">...</span>  <span class="c"># later you show the result to user somehow</span>

<span class="c"># Somewhere in your `words_app/logic.py`:</span>

<span class="kn">from</span> <span class="nn">typing_extensions</span> <span class="kn">import</span> <span class="n">Protocol</span>
<span class="kn">from</span> <span class="nn">returns.context</span> <span class="kn">import</span> <span class="n">RequiresContext</span>

<span class="k">class</span> <span class="nc">_Deps</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>  <span class="c"># we rely on abstractions, not direct values or types</span>
    <span class="n">WORD_THRESHOLD</span><span class="p">:</span> <span class="nb">int</span>

<span class="k">def</span> <span class="nf">calculate_points</span><span class="p">(</span><span class="n">word</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RequiresContext</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">_Deps</span><span class="p">]:</span>
    <span class="n">guessed_letters_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">letter</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span> <span class="k">if</span> <span class="n">letter</span> <span class="o">!=</span> <span class="s">'.'</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">_award_points_for_letters</span><span class="p">(</span><span class="n">guessed_letters_count</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">_award_points_for_letters</span><span class="p">(</span><span class="n">guessed</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RequiresContext</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">_Deps</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">RequiresContext</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">deps</span><span class="p">:</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">guessed</span> <span class="o">&lt;</span> <span class="n">deps</span><span class="o">.</span><span class="n">WORD_THRESHOLD</span> <span class="k">else</span> <span class="n">guessed</span><span class="p">,</span>
    <span class="p">)</span>
</pre>
<p>And now you can pass your dependencies in a really direct and explicit way.
And have the type-safety to check what you pass to cover your back.
Check out <a href="https://returns.readthedocs.io/en/latest/pages/context.html" rel="nofollow">RequiresContext</a> docs for more. There you will learn how to make <code>'.'</code> also configurable.</p>
<p>We also have <a href="https://returns.readthedocs.io/en/latest/pages/context.html#requirescontextresult-container" rel="nofollow">RequiresContextResult</a>
for context-related operations that might fail. And also <a href="https://returns.readthedocs.io/en/latest/pages/context.html#requirescontextioresult-container" rel="nofollow">RequiresContextIOResult</a> and <a href="https://returns.readthedocs.io/en/latest/pages/context.html#requirescontextfutureresult-container" rel="nofollow">RequiresContextFutureResult</a>.</p>
<h2>
<a id="result-container" class="anchor" href="#result-container" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Result container</h2>
<p>Please, make sure that you are also aware of
<a href="https://fsharpforfunandprofit.com/rop/" rel="nofollow">Railway Oriented Programming</a>.</p>
<h3>
<a id="straight-forward-approach" class="anchor" href="#straight-forward-approach" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Straight-forward approach</h3>
<p>Consider this code that you can find in <strong>any</strong> <code>python</code> project.</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">fetch_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'UserProfile'</span><span class="p">:</span>
    <span class="s">"""Fetches UserProfile dict from foreign API."""</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/api/users/{0}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre>
<p>Seems legit, does it not?
It also seems like a pretty straightforward code to test.
All you need is to mock <code>requests.get</code> to return the structure you need.</p>
<p>But, there are hidden problems in this tiny code sample
that are almost impossible to spot at the first glance.</p>
<h3>
<a id="hidden-problems" class="anchor" href="#hidden-problems" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hidden problems</h3>
<p>Let's have a look at the exact same code,
but with the all hidden problems explained.</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">fetch_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'UserProfile'</span><span class="p">:</span>
    <span class="s">"""Fetches UserProfile dict from foreign API."""</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/api/users/{0}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span>

    <span class="c"># What if we try to find user that does not exist?</span>
    <span class="c"># Or network will go down? Or the server will return 500?</span>
    <span class="c"># In this case the next line will fail with an exception.</span>
    <span class="c"># We need to handle all possible errors in this function</span>
    <span class="c"># and do not return corrupt data to consumers.</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

    <span class="c"># What if we have received invalid JSON?</span>
    <span class="c"># Next line will raise an exception!</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre>
<p>Now, all (probably all?) problems are clear.
How can we be sure that this function will be safe
to use inside our complex business logic?</p>
<p>We really cannot be sure!
We will have to create <strong>lots</strong> of <code>try</code> and <code>except</code> cases
just to catch the expected exceptions. Our code will become complex and unreadable with all this mess!</p>
<p>Or we can go with the top level <code>except Exception:</code> case
to catch literally everything.
And this way we would end up with catching unwanted ones.
This approach can hide serious problems from us for a long time.</p>
<h3>
<a id="pipe-example" class="anchor" href="#pipe-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Pipe example</h3>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">returns.result</span> <span class="kn">import</span> <span class="n">Result</span><span class="p">,</span> <span class="n">safe</span>
<span class="kn">from</span> <span class="nn">returns.pipeline</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">returns.pointfree</span> <span class="kn">import</span> <span class="n">bind</span>

<span class="k">def</span> <span class="nf">fetch_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Result</span><span class="p">[</span><span class="s">'UserProfile'</span><span class="p">,</span> <span class="nb">Exception</span><span class="p">]:</span>
    <span class="s">"""Fetches `UserProfile` TypedDict from foreign API."""</span>
    <span class="k">return</span> <span class="n">flow</span><span class="p">(</span>
        <span class="n">user_id</span><span class="p">,</span>
        <span class="n">_make_request</span><span class="p">,</span>
        <span class="n">bind</span><span class="p">(</span><span class="n">_parse_json</span><span class="p">),</span>
    <span class="p">)</span>

<span class="nd">@safe</span>
<span class="k">def</span> <span class="nf">_make_request</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="c"># TODO: we are not yet done with this example, read more about `IO`:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/api/users/{0}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="nd">@safe</span>
<span class="k">def</span> <span class="nf">_parse_json</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'UserProfile'</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre>
<p>Now we have a clean and a safe and declarative way
to express our business needs:</p>
<ul>
<li>We start from making a request, that might fail at any moment,</li>
<li>Then parsing the response if the request was successful,</li>
<li>And then return the result.</li>
</ul>
<p>Now, instead of returning regular values
we return values wrapped inside a special container
thanks to the
<a href="https://returns.readthedocs.io/en/latest/pages/result.html#safe" rel="nofollow">@safe</a>
decorator. It will return <a href="https://returns.readthedocs.io/en/latest/pages/result.html" rel="nofollow">Success[YourType] or Failure[Exception]</a>.
And will never throw exception at us!</p>
<p>We also use <a href="https://returns.readthedocs.io/en/latest/pages/pipeline.html#flow" rel="nofollow">flow</a>
and <a href="https://returns.readthedocs.io/en/latest/pages/pointfree.html#bind" rel="nofollow">bind</a>
functions for handy and declarative composition.</p>
<p>This way we can be sure that our code won't break in
random places due to some implicit exception.
Now we control all parts and are prepared for the explicit errors.</p>
<p>We are not yet done with this example,
let's continue to improve it in the next chapter.</p>
<h2>
<a id="io-container" class="anchor" href="#io-container" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>IO container</h2>
<p>Let's look at our example from another angle.
All its functions look like regular ones:
it is impossible to tell whether they are <a href="https://en.wikipedia.org/wiki/Pure_function" rel="nofollow">pure</a>
or impure from the first sight.</p>
<p>It leads to a very important consequence:
<em>we start to mix pure and impure code together</em>.
We should not do that!</p>
<p>When these two concepts are mixed
we suffer really bad when testing or reusing it.
Almost everything should be pure by default.
And we should explicitly mark impure parts of the program.</p>
<p>That's why we have created <code>IO</code> container
to mark impure functions that never fail.</p>
<p>These impure functions use <code>random</code>, current datetime, environment, or console:</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">datetime</span> <span class="k">as</span> <span class="n">dt</span>

<span class="kn">from</span> <span class="nn">returns.io</span> <span class="kn">import</span> <span class="n">IO</span>

<span class="k">def</span> <span class="nf">get_random_number</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">IO</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>  <span class="c"># or use `@impure` decorator</span>
    <span class="k">return</span> <span class="n">IO</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c"># isn't pure, because random</span>

<span class="n">now</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">IO</span><span class="p">[</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">]]</span> <span class="o">=</span> <span class="n">impure</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">)</span>

<span class="nd">@impure</span>
<span class="k">def</span> <span class="nf">return_and_show_next_number</span><span class="p">(</span><span class="n">previous</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">next_number</span> <span class="o">=</span> <span class="n">previous</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">print</span><span class="p">(</span><span class="n">next_number</span><span class="p">)</span>  <span class="c"># isn't pure, because does IO</span>
    <span class="k">return</span> <span class="n">next_number</span>
</pre>
<p>Now we can clearly see which functions are pure and which ones are impure.
This helps us a lot in building large applications, unit testing you code,
and composing business logic together.</p>
<h3>
<a id="troublesome-io" class="anchor" href="#troublesome-io" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Troublesome IO</h3>
<p>As it was already said, we use <code>IO</code> when we handle functions that do not fail.</p>
<p>What if our function can fail and is impure?
Like <code>requests.get()</code> we had earlier in our example.</p>
<p>Then we have to use a special <code>IOResult</code> type instead of a regular <code>Result</code>.
Let's find the difference:</p>
<ul>
<li>Our <code>_parse_json</code> function always returns
the same result (hopefully) for the same input:
you can either parse valid <code>json</code> or fail on invalid one.
That's why we return pure <code>Result</code>, there's no <code>IO</code> inside</li>
<li>Our <code>_make_request</code> function is impure and can fail.
Try to send two similar requests with and without internet connection.
The result will be different for the same input.
That's why we must use <code>IOResult</code> here: it can fail and has <code>IO</code>
</li>
</ul>
<p>So, in order to fulfill our requirement and separate pure code from impure one,
we have to refactor our example.</p>
<h3>
<a id="explicit-io" class="anchor" href="#explicit-io" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Explicit IO</h3>
<p>Let's make our <a href="https://returns.readthedocs.io/en/latest/pages/io.html" rel="nofollow">IO</a>
explicit!</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">returns.io</span> <span class="kn">import</span> <span class="n">IOResult</span><span class="p">,</span> <span class="n">impure_safe</span>
<span class="kn">from</span> <span class="nn">returns.result</span> <span class="kn">import</span> <span class="n">safe</span>
<span class="kn">from</span> <span class="nn">returns.pipeline</span> <span class="kn">import</span> <span class="n">flow</span>
<span class="kn">from</span> <span class="nn">returns.pointfree</span> <span class="kn">import</span> <span class="n">bind_result</span>

<span class="k">def</span> <span class="nf">fetch_user_profile</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">IOResult</span><span class="p">[</span><span class="s">'UserProfile'</span><span class="p">,</span> <span class="nb">Exception</span><span class="p">]:</span>
    <span class="s">"""Fetches `UserProfile` TypedDict from foreign API."""</span>
    <span class="k">return</span> <span class="n">flow</span><span class="p">(</span>
        <span class="n">user_id</span><span class="p">,</span>
        <span class="n">_make_request</span><span class="p">,</span>
        <span class="c"># before: def (Response) -&gt; UserProfile</span>
        <span class="c"># after safe: def (Response) -&gt; ResultE[UserProfile]</span>
        <span class="c"># after bind_result: def (IOResultE[Response]) -&gt; IOResultE[UserProfile]</span>
        <span class="n">bind_result</span><span class="p">(</span><span class="n">_parse_json</span><span class="p">),</span>
    <span class="p">)</span>

<span class="nd">@impure_safe</span>
<span class="k">def</span> <span class="nf">_make_request</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/api/users/{0}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user_id</span><span class="p">))</span>
    <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="nd">@safe</span>
<span class="k">def</span> <span class="nf">_parse_json</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'UserProfile'</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</pre>
<p>And later we can use <a href="https://returns.readthedocs.io/en/latest/pages/io.html#unsafe-perform-io" rel="nofollow">unsafe_perform_io</a>
somewhere at the top level of our program to get the pure (or "real") value.</p>
<p>As a result of this refactoring session, we know everything about our code:</p>
<ul>
<li>Which parts can fail,</li>
<li>Which parts are impure,</li>
<li>How to compose them in a smart, readable, and typesafe manner.</li>
</ul>
<h2>
<a id="future-container" class="anchor" href="#future-container" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Future container</h2>
<p>There are several issues with <code>async</code> code in Python:</p>
<ol>
<li>You cannot call <code>async</code> function from a sync one</li>
<li>Any unexpectedly thrown exception can ruin your whole event loop</li>
<li>Ugly composition with lots of <code>await</code> statements</li>
</ol>
<p><code>Future</code> and <code>FutureResult</code> containers solve these issues!</p>
<h3>
<a id="mixing-sync-and-async-code" class="anchor" href="#mixing-sync-and-async-code" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mixing sync and async code</h3>
<p>The main feature of <a href="https://returns.readthedocs.io/en/latest/pages/future.html" rel="nofollow">Future</a>
is that it allows to run async code
while maintaining sync context. Let's see an example.</p>
<p>Let's say we have two functions,
the <code>first</code> one returns a number and the <code>second</code> one increments it:</p>
<pre lang="python" class="highlight-python"><span class="k">async</span> <span class="k">def</span> <span class="nf">first</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">second</span><span class="p">():</span>  <span class="c"># How can we call `first()` from here?</span>
    <span class="k">return</span> <span class="n">first</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>  <span class="c"># Boom! Don't do this. We illustrate a problem here.</span>
</pre>
<p>If we try to just run <code>first()</code>, we will just create an unawaited coroutine.
It won't return the value we want.</p>
<p>But, if we would try to run <code>await first()</code>,
then we would need to change <code>second</code> to be <code>async</code>.
And sometimes it is not possible for various reasons.</p>
<p>However, with <code>Future</code> we can "pretend" to call async code from sync code:</p>
<pre lang="python" class="highlight-python"><span class="kn">from</span> <span class="nn">returns.future</span> <span class="kn">import</span> <span class="n">Future</span>

<span class="k">def</span> <span class="nf">second</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Future</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">Future</span><span class="p">(</span><span class="n">first</span><span class="p">())</span><span class="o">.</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">num</span><span class="p">:</span> <span class="n">num</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</pre>
<p>Without touching our <code>first</code> async function
or making <code>second</code> async we have achieved our goal.
Now, our async value is incremented inside a sync function.</p>
<p>However, <code>Future</code> still requires to be executed inside a proper eventloop:</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">anyio</span>  <span class="c"># or asyncio, or any other lib</span>

<span class="c"># We can then pass our `Future` to any library: asyncio, trio, curio.</span>
<span class="c"># And use any event loop: regular, uvloop, even a custom one, etc</span>
<span class="k">assert</span> <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">second</span><span class="p">()</span><span class="o">.</span><span class="n">awaitable</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre>
<p>As you can see <code>Future</code> allows you
to work with async functions from a sync context.
And to mix these two realms together.
Use raw <code>Future</code> for operations that cannot fail or raise exceptions.
Pretty much the same logic we had with our <code>IO</code> container.</p>
<h3>
<a id="async-code-without-exceptions" class="anchor" href="#async-code-without-exceptions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Async code without exceptions</h3>
<p>We have already covered how <a href="#result-container"><code>Result</code></a> works
for both pure and impure code.
The main idea is: we don't raise exceptions, we return them.
It is <strong>especially</strong> critical in async code,
because a single exception can ruin
all our coroutines running in a single eventloop.</p>
<p>We have a handy combination of <code>Future</code> and <code>Result</code> containers: <code>FutureResult</code>.
Again, this is exactly like <code>IOResult</code>, but for impure async code.
Use it when your <code>Future</code> might have problems:
like HTTP requests or filesystem operations.</p>
<p>You can easily turn any wild throwing coroutine into a calm <code>FutureResult</code>:</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">anyio</span>
<span class="kn">from</span> <span class="nn">returns.future</span> <span class="kn">import</span> <span class="n">future_safe</span>
<span class="kn">from</span> <span class="nn">returns.io</span> <span class="kn">import</span> <span class="n">IOFailure</span>

<span class="nd">@future_safe</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">raising</span><span class="p">():</span>
    <span class="k">raise</span> <span class="nb">ValueError</span><span class="p">(</span><span class="s">'Not so fast!'</span><span class="p">)</span>

<span class="n">ioresult</span> <span class="o">=</span> <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">raising</span><span class="o">.</span><span class="n">awaitable</span><span class="p">)</span>  <span class="c"># all `Future`s return IO containers</span>
<span class="k">assert</span> <span class="n">ioresult</span> <span class="o">==</span> <span class="n">IOFailure</span><span class="p">(</span><span class="nb">ValueError</span><span class="p">(</span><span class="s">'Not so fast!'</span><span class="p">))</span>  <span class="c"># True</span>
</pre>
<p>Using <code>FutureResult</code> will keep your code safe from exceptions.
You can always <code>await</code> or execute inside an eventloop any <code>FutureResult</code>
to get sync <code>IOResult</code> instance to work with it in a sync manner.</p>
<h3>
<a id="better-async-composition" class="anchor" href="#better-async-composition" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Better async composition</h3>
<p>Previously, you had to do quite a lot of <code>await</code>ing while writing <code>async</code> code:</p>
<pre lang="python" class="highlight-python"><span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'User'</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">get_user_permissions</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="s">'User'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'Permissions'</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">ensure_allowed</span><span class="p">(</span><span class="n">permissions</span><span class="p">:</span> <span class="s">'Permissions'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c"># Also, don't forget to handle all possible errors with `try / except`!</span>
    <span class="n">user</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>  <span class="c"># We will await each time we use a coro!</span>
    <span class="n">permissions</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_user_permissions</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
    <span class="k">return</span> <span class="k">await</span> <span class="n">ensure_allowed</span><span class="p">(</span><span class="n">permissions</span><span class="p">)</span>
</pre>
<p>Some people are ok with it, but some people don't like this imperative style.
The problem is that there was no choice.</p>
<p>But now, you can do the same thing in functional style!
With the help of <code>Future</code> and <code>FutureResult</code> containers:</p>
<pre lang="python" class="highlight-python"><span class="kn">import</span> <span class="nn">anyio</span>
<span class="kn">from</span> <span class="nn">returns.future</span> <span class="kn">import</span> <span class="n">FutureResultE</span><span class="p">,</span> <span class="n">future_safe</span>
<span class="kn">from</span> <span class="nn">returns.io</span> <span class="kn">import</span> <span class="n">IOSuccess</span><span class="p">,</span> <span class="n">IOFailure</span>

<span class="nd">@future_safe</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">fetch_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'User'</span><span class="p">:</span>
    <span class="o">...</span>

<span class="nd">@future_safe</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">get_user_permissions</span><span class="p">(</span><span class="n">user</span><span class="p">:</span> <span class="s">'User'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s">'Permissions'</span><span class="p">:</span>
    <span class="o">...</span>

<span class="nd">@future_safe</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">ensure_allowed</span><span class="p">(</span><span class="n">permissions</span><span class="p">:</span> <span class="s">'Permissions'</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="o">...</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FutureResultE</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
    <span class="c"># We can now turn `main` into a sync function, it does not `await` at all.</span>
    <span class="c"># We also don't care about exceptions anymore, they are already handled.</span>
    <span class="k">return</span> <span class="n">fetch_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">get_user_permissions</span><span class="p">)</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">ensure_allowed</span><span class="p">)</span>

<span class="n">correct_user_id</span><span class="p">:</span> <span class="nb">int</span>  <span class="c"># has required permissions</span>
<span class="n">banned_user_id</span><span class="p">:</span> <span class="nb">int</span>  <span class="c"># does not have required permissions</span>
<span class="n">wrong_user_id</span><span class="p">:</span> <span class="nb">int</span>  <span class="c"># does not exist</span>

<span class="c"># We can have correct business results:</span>
<span class="k">assert</span> <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">correct_user_id</span><span class="p">)</span><span class="o">.</span><span class="n">awaitable</span><span class="p">)</span> <span class="o">==</span> <span class="n">IOSuccess</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">banned_user_id</span><span class="p">)</span><span class="o">.</span><span class="n">awaitable</span><span class="p">)</span> <span class="o">==</span> <span class="n">IOSuccess</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>

<span class="c"># Or we can have errors along the way:</span>
<span class="k">assert</span> <span class="n">anyio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">(</span><span class="n">wrong_user_id</span><span class="p">)</span><span class="o">.</span><span class="n">awaitable</span><span class="p">)</span> <span class="o">==</span> <span class="n">IOFailure</span><span class="p">(</span>
    <span class="n">UserDoesNotExistError</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
<span class="p">)</span>
</pre>
<p>Or even something really fancy:</p>
<pre lang="python" class="highlight-python"><span class="kn">from</span> <span class="nn">returns.pointfree</span> <span class="kn">import</span> <span class="n">bind</span>
<span class="kn">from</span> <span class="nn">returns.pipeline</span> <span class="kn">import</span> <span class="n">flow</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">user_id</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FutureResultE</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
    <span class="k">return</span> <span class="n">flow</span><span class="p">(</span>
        <span class="n">fetch_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">),</span>
        <span class="n">bind</span><span class="p">(</span><span class="n">get_user_permissions</span><span class="p">),</span>
        <span class="n">bind</span><span class="p">(</span><span class="n">ensure_allowed</span><span class="p">),</span>
    <span class="p">)</span>
</pre>
<p>Later we can also refactor our logical functions to be sync
and to return <code>FutureResult</code>.</p>
<p>Lovely, isn't it?</p>
<h2>
<a id="more" class="anchor" href="#more" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More!</h2>
<p>Want more?
<a href="https://returns.readthedocs.io" rel="nofollow">Go to the docs!</a>
Or <a href="https://repl.it/@sobolevn/returns#ex.py" rel="nofollow">try our demo</a>.
Or read these articles:</p>
<ul>
<li><a href="https://sobolevn.me/2019/02/python-exceptions-considered-an-antipattern" rel="nofollow">Python exceptions considered an anti-pattern</a></li>
<li><a href="https://sobolevn.me/2019/03/enforcing-srp" rel="nofollow">Enforcing Single Responsibility Principle in Python</a></li>
<li><a href="https://sobolevn.me/2020/02/typed-functional-dependency-injection" rel="nofollow">Typed functional Dependency Injection in Python</a></li>
<li><a href="https://sobolevn.me/2020/06/how-async-should-have-been" rel="nofollow">How Async Should Have Been</a></li>
<li><a href="https://sobolevn.me/2020/10/higher-kinded-types-in-python" rel="nofollow">Higher Kinded Types in Python</a></li>
</ul>
<p>Do you have an article to submit? Feel free to open a pull request!</p>
<p align="center">— ⭐️ —</p>
<p align="center"><i>Drylabs maintains dry-python and helps those who want to use it inside their organizations.</i></p>
<p align="center"><i>Read more at <a href="https://drylabs.io" rel="nofollow">drylabs.io</a></i></p>
<script type="text/javascript">(function(){window['__CF$cv$params']={r:'6120b896ef48e738',m:'da8129baa641eb5eab45ae297fb6942b07a37c76-1610725497-1800-ASptPo4ivSWv5RCT711bvnGJ81eH2bPGaGpi6E7yQh7igf3LDNcydfsX5qu5/d4CMNfZOUB8/HNnMnx2TswhJqWP07PC2qjbUZDiV8Swt4PRsCG5l813VdLsgkzbhTjFp9o4qQeALovTIiQMWUI2VOg=',s:[0x32542a7c11,0xa06007ccd2],}})();</script></body></html>
</div><div><br/><div style="border:1px solid gray;border-radius:5px;background-color:lightgray;padding:2%"><div style="font-size:24px;font-weight:bold;margin-bottom:10px">Get A Weekly Email With Trending Projects For These Topics</div><div style="margin-bottom:10px">No Spam.  Unsubscribe easily at any time.</div><div><div><input type="checkbox" name="topics" value="python"/> <!-- -->python<!-- --> (<!-- -->49,729<!-- -->) </div><div><input type="checkbox" name="topics" value="hacktoberfest"/> <!-- -->hacktoberfest<!-- --> (<!-- -->4,238<!-- -->) </div><div><input type="checkbox" name="topics" value="python3"/> <!-- -->python3<!-- --> (<!-- -->1,466<!-- -->) </div><div><input type="checkbox" name="topics" value="functional-programming"/> <!-- -->functional-programming<!-- --> (<!-- -->457<!-- -->) </div><div><input type="checkbox" name="topics" value="fp"/> <!-- -->fp<!-- --> (<!-- -->51<!-- -->) </div><div><input type="checkbox" name="topics" value="type-safety"/> <!-- -->type-safety<!-- --> (<!-- -->49<!-- -->) </div><div><input type="checkbox" name="topics" value="mypy"/> <!-- -->mypy<!-- --> (<!-- -->25<!-- -->) </div></div><div><input type="email" style="width:95%;margin-top:10px;margin-bottom:10px;padding:5px;font-size:20px;border-radius:5px" name="email" placeholder="Your email address"/></div><div><input type="submit" style="color:white;background-color:#0366d6;font-size:20px;border:1px solid black;border-radius:5px;padding:5px;cursor:pointer" value="Subscribe"/></div></div></div><h2>Find Open Source By Browsing 7,000 Topics Across 59 Categories</h2><div class="aos_topics_sidebar" style="margin:0;width:100%"><div class="category_topic_filter_container"><input style="width:100%" placeholder="Search, browse and combine topics" value="" class="aos_filter_topics_input"/></div><div style="display:block;box-shadow:1px 1px 5px lightgray"><a data-category-name="Advertising" href="https://awesomeopensource.com/categories/advertising"><div class="aos_category_explorer_category_container" data-category-name="Advertising"><span data-category-name="Advertising">Advertising<span data-category-name="Advertising" class="aos_project_count"> 📦 <!-- -->10</span></span></div></a><a data-category-name="All Projects" href="https://awesomeopensource.com/projects"><div class="aos_category_explorer_category_container" data-category-name="All Projects"><span data-category-name="All Projects">All Projects</span></div></a><a data-category-name="Application Programming Interfaces" href="https://awesomeopensource.com/categories/application-programming-interfaces"><div class="aos_category_explorer_category_container" data-category-name="Application Programming Interfaces"><span data-category-name="Application Programming Interfaces">Application Programming Interfaces<span data-category-name="Application Programming Interfaces" class="aos_project_count"> 📦 <!-- -->124</span></span></div></a><a data-category-name="Applications" href="https://awesomeopensource.com/categories/applications"><div class="aos_category_explorer_category_container" data-category-name="Applications"><span data-category-name="Applications">Applications<span data-category-name="Applications" class="aos_project_count"> 📦 <!-- -->192</span></span></div></a><a data-category-name="Artificial Intelligence" href="https://awesomeopensource.com/categories/artificial-intelligence"><div class="aos_category_explorer_category_container" data-category-name="Artificial Intelligence"><span data-category-name="Artificial Intelligence">Artificial Intelligence<span data-category-name="Artificial Intelligence" class="aos_project_count"> 📦 <!-- -->78</span></span></div></a><a data-category-name="Blockchain" href="https://awesomeopensource.com/categories/blockchain"><div class="aos_category_explorer_category_container" data-category-name="Blockchain"><span data-category-name="Blockchain">Blockchain<span data-category-name="Blockchain" class="aos_project_count"> 📦 <!-- -->73</span></span></div></a><a data-category-name="Build Tools" href="https://awesomeopensource.com/categories/build-tools"><div class="aos_category_explorer_category_container" data-category-name="Build Tools"><span data-category-name="Build Tools">Build Tools<span data-category-name="Build Tools" class="aos_project_count"> 📦 <!-- -->113</span></span></div></a><a data-category-name="Cloud Computing" href="https://awesomeopensource.com/categories/cloud-computing"><div class="aos_category_explorer_category_container" data-category-name="Cloud Computing"><span data-category-name="Cloud Computing">Cloud Computing<span data-category-name="Cloud Computing" class="aos_project_count"> 📦 <!-- -->80</span></span></div></a><a data-category-name="Code Quality" href="https://awesomeopensource.com/categories/code-quality"><div class="aos_category_explorer_category_container" data-category-name="Code Quality"><span data-category-name="Code Quality">Code Quality<span data-category-name="Code Quality" class="aos_project_count"> 📦 <!-- -->28</span></span></div></a><a data-category-name="Collaboration" href="https://awesomeopensource.com/categories/collaboration"><div class="aos_category_explorer_category_container" data-category-name="Collaboration"><span data-category-name="Collaboration">Collaboration<span data-category-name="Collaboration" class="aos_project_count"> 📦 <!-- -->32</span></span></div></a><a data-category-name="Command Line Interface" href="https://awesomeopensource.com/categories/command-line-interface"><div class="aos_category_explorer_category_container" data-category-name="Command Line Interface"><span data-category-name="Command Line Interface">Command Line Interface<span data-category-name="Command Line Interface" class="aos_project_count"> 📦 <!-- -->49</span></span></div></a><a data-category-name="Community" href="https://awesomeopensource.com/categories/community"><div class="aos_category_explorer_category_container" data-category-name="Community"><span data-category-name="Community">Community<span data-category-name="Community" class="aos_project_count"> 📦 <!-- -->83</span></span></div></a><a data-category-name="Companies" href="https://awesomeopensource.com/categories/companies"><div class="aos_category_explorer_category_container" data-category-name="Companies"><span data-category-name="Companies">Companies<span data-category-name="Companies" class="aos_project_count"> 📦 <!-- -->60</span></span></div></a><a data-category-name="Compilers" href="https://awesomeopensource.com/categories/compilers"><div class="aos_category_explorer_category_container" data-category-name="Compilers"><span data-category-name="Compilers">Compilers<span data-category-name="Compilers" class="aos_project_count"> 📦 <!-- -->63</span></span></div></a><a data-category-name="Computer Science" href="https://awesomeopensource.com/categories/computer-science"><div class="aos_category_explorer_category_container" data-category-name="Computer Science"><span data-category-name="Computer Science">Computer Science<span data-category-name="Computer Science" class="aos_project_count"> 📦 <!-- -->80</span></span></div></a><a data-category-name="Configuration Management" href="https://awesomeopensource.com/categories/configuration-management"><div class="aos_category_explorer_category_container" data-category-name="Configuration Management"><span data-category-name="Configuration Management">Configuration Management<span data-category-name="Configuration Management" class="aos_project_count"> 📦 <!-- -->42</span></span></div></a><a data-category-name="Content Management" href="https://awesomeopensource.com/categories/content-management"><div class="aos_category_explorer_category_container" data-category-name="Content Management"><span data-category-name="Content Management">Content Management<span data-category-name="Content Management" class="aos_project_count"> 📦 <!-- -->175</span></span></div></a><a data-category-name="Control Flow" href="https://awesomeopensource.com/categories/control-flow"><div class="aos_category_explorer_category_container" data-category-name="Control Flow"><span data-category-name="Control Flow">Control Flow<span data-category-name="Control Flow" class="aos_project_count"> 📦 <!-- -->213</span></span></div></a><a data-category-name="Data Formats" href="https://awesomeopensource.com/categories/data-formats"><div class="aos_category_explorer_category_container" data-category-name="Data Formats"><span data-category-name="Data Formats">Data Formats<span data-category-name="Data Formats" class="aos_project_count"> 📦 <!-- -->78</span></span></div></a><a data-category-name="Data Processing" href="https://awesomeopensource.com/categories/data-processing"><div class="aos_category_explorer_category_container" data-category-name="Data Processing"><span data-category-name="Data Processing">Data Processing<span data-category-name="Data Processing" class="aos_project_count"> 📦 <!-- -->276</span></span></div></a><a data-category-name="Data Storage" href="https://awesomeopensource.com/categories/data-storage"><div class="aos_category_explorer_category_container" data-category-name="Data Storage"><span data-category-name="Data Storage">Data Storage<span data-category-name="Data Storage" class="aos_project_count"> 📦 <!-- -->135</span></span></div></a><a data-category-name="Economics" href="https://awesomeopensource.com/categories/economics"><div class="aos_category_explorer_category_container" data-category-name="Economics"><span data-category-name="Economics">Economics<span data-category-name="Economics" class="aos_project_count"> 📦 <!-- -->64</span></span></div></a><a data-category-name="Frameworks" href="https://awesomeopensource.com/categories/frameworks"><div class="aos_category_explorer_category_container" data-category-name="Frameworks"><span data-category-name="Frameworks">Frameworks<span data-category-name="Frameworks" class="aos_project_count"> 📦 <!-- -->215</span></span></div></a><a data-category-name="Games" href="https://awesomeopensource.com/categories/games"><div class="aos_category_explorer_category_container" data-category-name="Games"><span data-category-name="Games">Games<span data-category-name="Games" class="aos_project_count"> 📦 <!-- -->129</span></span></div></a><a data-category-name="Graphics" href="https://awesomeopensource.com/categories/graphics"><div class="aos_category_explorer_category_container" data-category-name="Graphics"><span data-category-name="Graphics">Graphics<span data-category-name="Graphics" class="aos_project_count"> 📦 <!-- -->110</span></span></div></a><a data-category-name="Hardware" href="https://awesomeopensource.com/categories/hardware"><div class="aos_category_explorer_category_container" data-category-name="Hardware"><span data-category-name="Hardware">Hardware<span data-category-name="Hardware" class="aos_project_count"> 📦 <!-- -->152</span></span></div></a><a data-category-name="Integrated Development Environments" href="https://awesomeopensource.com/categories/integrated-development-environments"><div class="aos_category_explorer_category_container" data-category-name="Integrated Development Environments"><span data-category-name="Integrated Development Environments">Integrated Development Environments<span data-category-name="Integrated Development Environments" class="aos_project_count"> 📦 <!-- -->49</span></span></div></a><a data-category-name="Learning Resources" href="https://awesomeopensource.com/categories/learning-resources"><div class="aos_category_explorer_category_container" data-category-name="Learning Resources"><span data-category-name="Learning Resources">Learning Resources<span data-category-name="Learning Resources" class="aos_project_count"> 📦 <!-- -->166</span></span></div></a><a data-category-name="Legal" href="https://awesomeopensource.com/categories/legal"><div class="aos_category_explorer_category_container" data-category-name="Legal"><span data-category-name="Legal">Legal<span data-category-name="Legal" class="aos_project_count"> 📦 <!-- -->29</span></span></div></a><a data-category-name="Libraries" href="https://awesomeopensource.com/categories/libraries"><div class="aos_category_explorer_category_container" data-category-name="Libraries"><span data-category-name="Libraries">Libraries<span data-category-name="Libraries" class="aos_project_count"> 📦 <!-- -->129</span></span></div></a><a data-category-name="Lists Of Projects" href="https://awesomeopensource.com/categories/lists-of-projects"><div class="aos_category_explorer_category_container" data-category-name="Lists Of Projects"><span data-category-name="Lists Of Projects">Lists Of Projects<span data-category-name="Lists Of Projects" class="aos_project_count"> 📦 <!-- -->22</span></span></div></a><a data-category-name="Machine Learning" href="https://awesomeopensource.com/categories/machine-learning"><div class="aos_category_explorer_category_container" data-category-name="Machine Learning"><span data-category-name="Machine Learning">Machine Learning<span data-category-name="Machine Learning" class="aos_project_count"> 📦 <!-- -->347</span></span></div></a><a data-category-name="Mapping" href="https://awesomeopensource.com/categories/mapping"><div class="aos_category_explorer_category_container" data-category-name="Mapping"><span data-category-name="Mapping">Mapping<span data-category-name="Mapping" class="aos_project_count"> 📦 <!-- -->64</span></span></div></a><a data-category-name="Marketing" href="https://awesomeopensource.com/categories/marketing"><div class="aos_category_explorer_category_container" data-category-name="Marketing"><span data-category-name="Marketing">Marketing<span data-category-name="Marketing" class="aos_project_count"> 📦 <!-- -->15</span></span></div></a><a data-category-name="Mathematics" href="https://awesomeopensource.com/categories/mathematics"><div class="aos_category_explorer_category_container" data-category-name="Mathematics"><span data-category-name="Mathematics">Mathematics<span data-category-name="Mathematics" class="aos_project_count"> 📦 <!-- -->55</span></span></div></a><a data-category-name="Media" href="https://awesomeopensource.com/categories/media"><div class="aos_category_explorer_category_container" data-category-name="Media"><span data-category-name="Media">Media<span data-category-name="Media" class="aos_project_count"> 📦 <!-- -->239</span></span></div></a><a data-category-name="Messaging" href="https://awesomeopensource.com/categories/messaging"><div class="aos_category_explorer_category_container" data-category-name="Messaging"><span data-category-name="Messaging">Messaging<span data-category-name="Messaging" class="aos_project_count"> 📦 <!-- -->98</span></span></div></a><a data-category-name="Networking" href="https://awesomeopensource.com/categories/networking"><div class="aos_category_explorer_category_container" data-category-name="Networking"><span data-category-name="Networking">Networking<span data-category-name="Networking" class="aos_project_count"> 📦 <!-- -->315</span></span></div></a><a data-category-name="Operating Systems" href="https://awesomeopensource.com/categories/operating-systems"><div class="aos_category_explorer_category_container" data-category-name="Operating Systems"><span data-category-name="Operating Systems">Operating Systems<span data-category-name="Operating Systems" class="aos_project_count"> 📦 <!-- -->89</span></span></div></a><a data-category-name="Operations" href="https://awesomeopensource.com/categories/operations"><div class="aos_category_explorer_category_container" data-category-name="Operations"><span data-category-name="Operations">Operations<span data-category-name="Operations" class="aos_project_count"> 📦 <!-- -->121</span></span></div></a><a data-category-name="Package Managers" href="https://awesomeopensource.com/categories/package-managers"><div class="aos_category_explorer_category_container" data-category-name="Package Managers"><span data-category-name="Package Managers">Package Managers<span data-category-name="Package Managers" class="aos_project_count"> 📦 <!-- -->55</span></span></div></a><a data-category-name="Programming Languages" href="https://awesomeopensource.com/categories/programming-languages"><div class="aos_category_explorer_category_container" data-category-name="Programming Languages"><span data-category-name="Programming Languages">Programming Languages<span data-category-name="Programming Languages" class="aos_project_count"> 📦 <!-- -->245</span></span></div></a><a data-category-name="Runtime Environments" href="https://awesomeopensource.com/categories/runtime-environments"><div class="aos_category_explorer_category_container" data-category-name="Runtime Environments"><span data-category-name="Runtime Environments">Runtime Environments<span data-category-name="Runtime Environments" class="aos_project_count"> 📦 <!-- -->100</span></span></div></a><a data-category-name="Science" href="https://awesomeopensource.com/categories/science"><div class="aos_category_explorer_category_container" data-category-name="Science"><span data-category-name="Science">Science<span data-category-name="Science" class="aos_project_count"> 📦 <!-- -->42</span></span></div></a><a data-category-name="Security" href="https://awesomeopensource.com/categories/security"><div class="aos_category_explorer_category_container" data-category-name="Security"><span data-category-name="Security">Security<span data-category-name="Security" class="aos_project_count"> 📦 <!-- -->396</span></span></div></a><a data-category-name="Social Media" href="https://awesomeopensource.com/categories/social-media"><div class="aos_category_explorer_category_container" data-category-name="Social Media"><span data-category-name="Social Media">Social Media<span data-category-name="Social Media" class="aos_project_count"> 📦 <!-- -->27</span></span></div></a><a data-category-name="Software Architecture" href="https://awesomeopensource.com/categories/software-architecture"><div class="aos_category_explorer_category_container" data-category-name="Software Architecture"><span data-category-name="Software Architecture">Software Architecture<span data-category-name="Software Architecture" class="aos_project_count"> 📦 <!-- -->72</span></span></div></a><a data-category-name="Software Development" href="https://awesomeopensource.com/categories/software-development"><div class="aos_category_explorer_category_container" data-category-name="Software Development"><span data-category-name="Software Development">Software Development<span data-category-name="Software Development" class="aos_project_count"> 📦 <!-- -->72</span></span></div></a><a data-category-name="Software Performance" href="https://awesomeopensource.com/categories/software-performance"><div class="aos_category_explorer_category_container" data-category-name="Software Performance"><span data-category-name="Software Performance">Software Performance<span data-category-name="Software Performance" class="aos_project_count"> 📦 <!-- -->58</span></span></div></a><a data-category-name="Software Quality" href="https://awesomeopensource.com/categories/software-quality"><div class="aos_category_explorer_category_container" data-category-name="Software Quality"><span data-category-name="Software Quality">Software Quality<span data-category-name="Software Quality" class="aos_project_count"> 📦 <!-- -->133</span></span></div></a><a data-category-name="Text Editors" href="https://awesomeopensource.com/categories/text-editors"><div class="aos_category_explorer_category_container" data-category-name="Text Editors"><span data-category-name="Text Editors">Text Editors<span data-category-name="Text Editors" class="aos_project_count"> 📦 <!-- -->49</span></span></div></a><a data-category-name="Text Processing" href="https://awesomeopensource.com/categories/text-processing"><div class="aos_category_explorer_category_container" data-category-name="Text Processing"><span data-category-name="Text Processing">Text Processing<span data-category-name="Text Processing" class="aos_project_count"> 📦 <!-- -->136</span></span></div></a><a data-category-name="User Interface" href="https://awesomeopensource.com/categories/user-interface"><div class="aos_category_explorer_category_container" data-category-name="User Interface"><span data-category-name="User Interface">User Interface<span data-category-name="User Interface" class="aos_project_count"> 📦 <!-- -->330</span></span></div></a><a data-category-name="User Interface Components" href="https://awesomeopensource.com/categories/user-interface-components"><div class="aos_category_explorer_category_container" data-category-name="User Interface Components"><span data-category-name="User Interface Components">User Interface Components<span data-category-name="User Interface Components" class="aos_project_count"> 📦 <!-- -->514</span></span></div></a><a data-category-name="Version Control" href="https://awesomeopensource.com/categories/version-control"><div class="aos_category_explorer_category_container" data-category-name="Version Control"><span data-category-name="Version Control">Version Control<span data-category-name="Version Control" class="aos_project_count"> 📦 <!-- -->30</span></span></div></a><a data-category-name="Virtualization" href="https://awesomeopensource.com/categories/virtualization"><div class="aos_category_explorer_category_container" data-category-name="Virtualization"><span data-category-name="Virtualization">Virtualization<span data-category-name="Virtualization" class="aos_project_count"> 📦 <!-- -->71</span></span></div></a><a data-category-name="Web Browsers" href="https://awesomeopensource.com/categories/web-browsers"><div class="aos_category_explorer_category_container" data-category-name="Web Browsers"><span data-category-name="Web Browsers">Web Browsers<span data-category-name="Web Browsers" class="aos_project_count"> 📦 <!-- -->42</span></span></div></a><a data-category-name="Web Servers" href="https://awesomeopensource.com/categories/web-servers"><div class="aos_category_explorer_category_container" data-category-name="Web Servers"><span data-category-name="Web Servers">Web Servers<span data-category-name="Web Servers" class="aos_project_count"> 📦 <!-- -->26</span></span></div></a><a data-category-name="Web User Interface" href="https://awesomeopensource.com/categories/web-user-interface"><div class="aos_category_explorer_category_container" data-category-name="Web User Interface"><span data-category-name="Web User Interface">Web User Interface<span data-category-name="Web User Interface" class="aos_project_count"> 📦 <!-- -->210</span></span></div></a></div></div><div class="aos_project_metadata_trademark_notice">&quot;<!-- -->Returns<!-- -->&quot; and other potentially trademarked words, copyrighted images and copyrighted readme contents likely belong to the legal entity who owns the &quot;<a href="https://github.com/dry-python" target="_blank">Dry <!-- -->Python</a>&quot; organization.  Awesome Open Source is not affiliated with the legal entity who owns the &quot;<a href="https://github.com/dry-python" target="_blank">Dry <!-- -->Python</a>&quot; organization.</div></div></div><div class="aos_fixed_footer_container"><br/></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Root" data-dom-id="Root-react-component-dedb1ca5-e13c-4f0e-ba0e-bacf0e6eda7c">{"topics":[{"id":null,"name":"javascript","count":67310},{"id":null,"name":"python","count":49729},{"id":null,"name":"java","count":30048},{"id":null,"name":"c-plus-plus","count":17339},{"id":null,"name":"php","count":15812},{"id":null,"name":"c","count":14340},{"id":null,"name":"go","count":14132},{"id":null,"name":"ruby","count":12268},{"id":null,"name":"c-sharp","count":11505},{"id":null,"name":"objective-c","count":10769}],"projectTopics":[{"id":null,"name":"fp","count":51},{"id":null,"name":"functional-programming","count":457},{"id":null,"name":"hacktoberfest","count":4238},{"id":null,"name":"mypy","count":25},{"id":null,"name":"python","count":49729},{"id":null,"name":"python3","count":1466},{"id":null,"name":"type-safety","count":49}],"selectedTopics":[],"currentUrl":"https://awesomeopensource.com/project/dry-python/returns","projects":[],"project":{"id":233571,"created_at":"2019-03-23T13:56:37.196Z","updated_at":"2021-01-14T04:18:51.401Z","markdown_readme":"\u003c!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"\u003e\n\u003chtml\u003e\u003cbody\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/dry-python/returns\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/dry-python/brand/master/logo/returns_white-outline.png\" alt=\"Returns logo\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/dry-python/returns/actions?query=workflow%3Atest\" rel=\"nofollow\"\u003e\u003cimg src=\"https://github.com/dry-python/returns/workflows/test/badge.svg?branch=master\u0026amp;event=push\" alt=\"Build Status\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://codecov.io/gh/dry-python/returns\" rel=\"nofollow\"\u003e\u003cimg src=\"https://codecov.io/gh/dry-python/returns/branch/master/graph/badge.svg\" alt=\"codecov\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://returns.readthedocs.io/en/latest/?badge=latest\" rel=\"nofollow\"\u003e\u003cimg src=\"https://readthedocs.org/projects/returns/badge/?version=latest\" alt=\"Documentation Status\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://pypi.org/project/returns/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/pypi/pyversions/returns.svg\" alt=\"Python Version\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://github.com/wemake-services/wemake-python-styleguide\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/style-wemake-000000.svg\" alt=\"wemake-python-styleguide\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://t.me/drypython\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/chat-join-blue?logo=telegram\" alt=\"Telegram chat\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://repl.it/@sobolevn/returns#ex.py\" rel=\"nofollow\"\u003e\u003cimg src=\"https://repl.it/badge/github/sobolevn/returns\" alt=\"Demo\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eMake your functions return something meaningful, typed, and safe!\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"features\" class=\"anchor\" href=\"#features\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eFeatures\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eBrings functional programming to Python land\u003c/li\u003e\n\u003cli\u003eProvides a bunch of primitives to write declarative business logic\u003c/li\u003e\n\u003cli\u003eEnforces better architecture\u003c/li\u003e\n\u003cli\u003eFully typed with annotations and checked with \u003ccode\u003emypy\u003c/code\u003e, \u003ca href=\"https://www.python.org/dev/peps/pep-0561/\" rel=\"nofollow\"\u003ePEP561 compatible\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003eAdds emulated Higher Kinded Types support\u003c/li\u003e\n\u003cli\u003eProvides type-safe interfaces to create your own data-types with enforced laws\u003c/li\u003e\n\u003cli\u003eHas a bunch of helpers for better composition\u003c/li\u003e\n\u003cli\u003ePythonic and pleasant to write and to read 🐍\u003c/li\u003e\n\u003cli\u003eSupport functions and coroutines, framework agnostic\u003c/li\u003e\n\u003cli\u003eEasy to start: has lots of docs, tests, and tutorials\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ca href=\"https://returns.readthedocs.io/en/latest/pages/quickstart.html\" rel=\"nofollow\"\u003eQuickstart\u003c/a\u003e right now!\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"installation\" class=\"anchor\" href=\"#installation\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eInstallation\u003c/h2\u003e\n\u003cpre lang=\"bash\" class=\"highlight-bash\"\u003epip \u003cspan class=\"nb\"\u003einstall \u003c/span\u003ereturns\n\u003c/pre\u003e\n\u003cp\u003eYou are also required to \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/container.html#type-safety\" rel=\"nofollow\"\u003econfigure\u003c/a\u003e\n\u003ccode\u003emypy\u003c/code\u003e correctly and install our plugin\nto fix \u003ca href=\"https://github.com/python/mypy/issues/3157\" rel=\"nofollow\"\u003ethis existing issue\u003c/a\u003e:\u003c/p\u003e\n\u003cpre lang=\"ini\" class=\"highlight-ini\"\u003e\u003cspan class=\"c\"\u003e# In setup.cfg or mypy.ini:\n\u003c/span\u003e\u003cspan class=\"nn\"\u003e[mypy]\u003c/span\u003e\n\u003cspan class=\"py\"\u003eplugins\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e\n  \u003cspan class=\"err\"\u003ereturns.contrib.mypy.returns_plugin\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eWe also recommend to use the same \u003ccode\u003emypy\u003c/code\u003e settings \u003ca href=\"https://github.com/wemake-services/wemake-python-styleguide/blob/master/styles/mypy.toml\" rel=\"nofollow\"\u003ewe use\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eMake sure you know how to get started, \u003ca href=\"https://returns.readthedocs.io/en/latest/\" rel=\"nofollow\"\u003echeck out our docs\u003c/a\u003e!\n\u003ca href=\"https://repl.it/@sobolevn/returns#ex.py\" rel=\"nofollow\"\u003eTry our demo\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"contents\" class=\"anchor\" href=\"#contents\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eContents\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#maybe-container\"\u003eMaybe container\u003c/a\u003e that allows you to write \u003ccode\u003eNone\u003c/code\u003e-free code\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#requirescontext-container\"\u003eRequiresContext container\u003c/a\u003e that allows you to use typed functional dependency injection\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#result-container\"\u003eResult container\u003c/a\u003e that let's you to get rid of exceptions\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#io-container\"\u003eIO container\u003c/a\u003e and \u003ca href=\"#troublesome-io\"\u003eIOResult\u003c/a\u003e that marks all impure operations and structures them\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#future-container\"\u003eFuture container\u003c/a\u003e and \u003ca href=\"#async-code-without-exceptions\"\u003eFutureResult\u003c/a\u003e to work with \u003ccode\u003easync\u003c/code\u003e code\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://returns.readthedocs.io/en/latest/pages/create-your-own-container.html\" rel=\"nofollow\"\u003eWrite your own container!\u003c/a\u003e You would still have all the features for your own types (including full existing code reuse and type-safety)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"maybe-container\" class=\"anchor\" href=\"#maybe-container\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMaybe container\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eNone\u003c/code\u003e is called the \u003ca href=\"https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/\" rel=\"nofollow\"\u003eworst mistake in the history of Computer Science\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSo, what can we do to check for \u003ccode\u003eNone\u003c/code\u003e in our programs?\nYou can use builtin \u003ca href=\"https://mypy.readthedocs.io/en/stable/kinds_of_types.html#optional-types-and-the-none-type\" rel=\"nofollow\"\u003eOptional\u003c/a\u003e type\nand write a lot of \u003ccode\u003eif some is not None:\u003c/code\u003e conditions.\nBut, \u003cstrong\u003ehaving \u003ccode\u003enull\u003c/code\u003e checks here and there makes your code unreadable\u003c/strong\u003e.\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eOptional\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\u003cspan class=\"n\"\u003ediscount_program\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eOptional\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'DiscountProgram'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n     \u003cspan class=\"n\"\u003ebalance\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget_balance\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n     \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ebalance\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n         \u003cspan class=\"n\"\u003ecredit\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ebalance\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecredit_amount\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n         \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ecredit\u003c/span\u003e \u003cspan class=\"ow\"\u003eis\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e \u003cspan class=\"ow\"\u003eand\u003c/span\u003e \u003cspan class=\"n\"\u003ecredit\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n             \u003cspan class=\"n\"\u003ediscount_program\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003echoose_discount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eOr you can use\n\u003ca href=\"https://returns.readthedocs.io/en/latest/pages/maybe.html\" rel=\"nofollow\"\u003eMaybe\u003c/a\u003e container!\nIt consists of \u003ccode\u003eSome\u003c/code\u003e and \u003ccode\u003eNothing\u003c/code\u003e types,\nrepresenting existing state and empty (instead of \u003ccode\u003eNone\u003c/code\u003e) state respectively.\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003etyping\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eOptional\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.maybe\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eMaybe\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emaybe\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@maybe\u003c/span\u003e  \u003cspan class=\"c\"\u003e# decorator to convert existing Optional[int] to Maybe[int]\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ebad_function\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eOptional\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003emaybe_number\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMaybe\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ebad_function\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebind_optional\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003enumber\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003enumber\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c\"\u003e# =\u0026gt; Maybe will return Some[float] only if there's a non-None value\u003c/span\u003e\n\u003cspan class=\"c\"\u003e#    Otherwise, will return Nothing\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eYou can be sure that \u003ccode\u003e.bind_optional()\u003c/code\u003e method won't be called for \u003ccode\u003eNothing\u003c/code\u003e.\nForget about \u003ccode\u003eNone\u003c/code\u003e-related errors forever!\u003c/p\u003e\n\u003cp\u003eWe can also bind a \u003ccode\u003eOptional\u003c/code\u003e-returning function over a container.\nTo achieve this, we are going to use \u003ccode\u003e.bind_optional\u003c/code\u003e method.\u003c/p\u003e\n\u003cp\u003eAnd that's how your initial refactored code will look like:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eOptional\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eUser\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e# Type hint here is optional, it only helps the reader here:\u003c/span\u003e\n\u003cspan class=\"n\"\u003ediscount_program\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMaybe\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'DiscountProgram'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eMaybe\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efrom_optional\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebind_optional\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e  \u003cspan class=\"c\"\u003e# This won't be called if `user is None`\u003c/span\u003e\n    \u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003ereal_user\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ereal_user\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget_balance\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebind_optional\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e  \u003cspan class=\"c\"\u003e# This won't be called if `real_user.get_balance()` is None\u003c/span\u003e\n    \u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003ebalance\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ebalance\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecredit_amount\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebind_optional\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e  \u003cspan class=\"c\"\u003e# And so on!\u003c/span\u003e\n    \u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003echoose_discount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecredit\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003ecredit\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eMuch better, isn't it?\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"requirescontext-container\" class=\"anchor\" href=\"#requirescontext-container\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eRequiresContext container\u003c/h2\u003e\n\u003cp\u003eMany developers do use some kind of dependency injection in Python.\nAnd usually it is based on the idea\nthat there's some kind of a container and assembly process.\u003c/p\u003e\n\u003cp\u003eFunctional approach is much simpler!\u003c/p\u003e\n\u003cp\u003eImagine that you have a \u003ccode\u003edjango\u003c/code\u003e based game, where you award users with points for each guessed letter in a word (unguessed letters are marked as \u003ccode\u003e'.'\u003c/code\u003e):\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003edjango.http\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpResponse\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ewords_app.logic\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculate_points\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eview\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euser_word\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePOST\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'word'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e  \u003cspan class=\"c\"\u003e# just an example\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epoints\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculate_points\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_word\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e  \u003cspan class=\"c\"\u003e# later you show the result to user somehow\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e# Somewhere in your `words_app/logic.py`:\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecalculate_points\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eword\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eguessed_letters_count\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"n\"\u003eletter\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eletter\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eword\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eletter\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e'.'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_award_points_for_letters\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eguessed_letters_count\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_award_points_for_letters\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eguessed\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eguessed\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"n\"\u003eguessed\u003c/span\u003e  \u003cspan class=\"c\"\u003e# minimum 6 points possible!\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eAwesome! It works, users are happy, your logic is pure and awesome.\nBut, later you decide to make the game more fun:\nlet's make the minimal accountable letters threshold\nconfigurable for an extra challenge.\u003c/p\u003e\n\u003cp\u003eYou can just do it directly:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_award_points_for_letters\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eguessed\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eguessed\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003ethreshold\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"n\"\u003eguessed\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe problem is that \u003ccode\u003e_award_points_for_letters\u003c/code\u003e is deeply nested.\nAnd then you have to pass \u003ccode\u003ethreshold\u003c/code\u003e through the whole callstack,\nincluding \u003ccode\u003ecalculate_points\u003c/code\u003e and all other functions that might be on the way.\nAll of them will have to accept \u003ccode\u003ethreshold\u003c/code\u003e as a parameter!\nThis is not useful at all!\nLarge code bases will struggle a lot from this change.\u003c/p\u003e\n\u003cp\u003eOk, you can directly use \u003ccode\u003edjango.settings\u003c/code\u003e (or similar)\nin your \u003ccode\u003e_award_points_for_letters\u003c/code\u003e function.\nAnd \u003cstrong\u003eruin your pure logic with framework specific details\u003c/strong\u003e. That's ugly!\u003c/p\u003e\n\u003cp\u003eOr you can use \u003ccode\u003eRequiresContext\u003c/code\u003e container. Let's see how our code changes:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003edjango.conf\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003esettings\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003edjango.http\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpResponse\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ewords_app.logic\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculate_points\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eview\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eHttpResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euser_word\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequest\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ePOST\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'word'\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e  \u003cspan class=\"c\"\u003e# just an example\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epoints\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ecalculate_points\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_words\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003esettings\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"c\"\u003e# passing the dependencies\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e  \u003cspan class=\"c\"\u003e# later you show the result to user somehow\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e# Somewhere in your `words_app/logic.py`:\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003etyping_extensions\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eProtocol\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.context\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eRequiresContext\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003e_Deps\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eProtocol\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e  \u003cspan class=\"c\"\u003e# we rely on abstractions, not direct values or types\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eWORD_THRESHOLD\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ecalculate_points\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eword\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003estr\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eRequiresContext\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_Deps\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eguessed_letters_count\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"n\"\u003eletter\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eletter\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003eword\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eletter\u003c/span\u003e \u003cspan class=\"o\"\u003e!=\u003c/span\u003e \u003cspan class=\"s\"\u003e'.'\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_award_points_for_letters\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eguessed_letters_count\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_award_points_for_letters\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eguessed\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eRequiresContext\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_Deps\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eRequiresContext\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003edeps\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eguessed\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003edeps\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eWORD_THRESHOLD\u003c/span\u003e \u003cspan class=\"k\"\u003eelse\u003c/span\u003e \u003cspan class=\"n\"\u003eguessed\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eAnd now you can pass your dependencies in a really direct and explicit way.\nAnd have the type-safety to check what you pass to cover your back.\nCheck out \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/context.html\" rel=\"nofollow\"\u003eRequiresContext\u003c/a\u003e docs for more. There you will learn how to make \u003ccode\u003e'.'\u003c/code\u003e also configurable.\u003c/p\u003e\n\u003cp\u003eWe also have \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/context.html#requirescontextresult-container\" rel=\"nofollow\"\u003eRequiresContextResult\u003c/a\u003e\nfor context-related operations that might fail. And also \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/context.html#requirescontextioresult-container\" rel=\"nofollow\"\u003eRequiresContextIOResult\u003c/a\u003e and \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/context.html#requirescontextfutureresult-container\" rel=\"nofollow\"\u003eRequiresContextFutureResult\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"result-container\" class=\"anchor\" href=\"#result-container\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eResult container\u003c/h2\u003e\n\u003cp\u003ePlease, make sure that you are also aware of\n\u003ca href=\"https://fsharpforfunandprofit.com/rop/\" rel=\"nofollow\"\u003eRailway Oriented Programming\u003c/a\u003e.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"straight-forward-approach\" class=\"anchor\" href=\"#straight-forward-approach\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eStraight-forward approach\u003c/h3\u003e\n\u003cp\u003eConsider this code that you can find in \u003cstrong\u003eany\u003c/strong\u003e \u003ccode\u003epython\u003c/code\u003e project.\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003erequests\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch_user_profile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'UserProfile'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"Fetches UserProfile dict from foreign API.\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'/api/users/{0}'\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eraise_for_status\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSeems legit, does it not?\nIt also seems like a pretty straightforward code to test.\nAll you need is to mock \u003ccode\u003erequests.get\u003c/code\u003e to return the structure you need.\u003c/p\u003e\n\u003cp\u003eBut, there are hidden problems in this tiny code sample\nthat are almost impossible to spot at the first glance.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"hidden-problems\" class=\"anchor\" href=\"#hidden-problems\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eHidden problems\u003c/h3\u003e\n\u003cp\u003eLet's have a look at the exact same code,\nbut with the all hidden problems explained.\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003erequests\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch_user_profile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'UserProfile'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"Fetches UserProfile dict from foreign API.\"\"\"\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'/api/users/{0}'\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e# What if we try to find user that does not exist?\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# Or network will go down? Or the server will return 500?\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# In this case the next line will fail with an exception.\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# We need to handle all possible errors in this function\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# and do not return corrupt data to consumers.\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eraise_for_status\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n    \u003cspan class=\"c\"\u003e# What if we have received invalid JSON?\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# Next line will raise an exception!\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eNow, all (probably all?) problems are clear.\nHow can we be sure that this function will be safe\nto use inside our complex business logic?\u003c/p\u003e\n\u003cp\u003eWe really cannot be sure!\nWe will have to create \u003cstrong\u003elots\u003c/strong\u003e of \u003ccode\u003etry\u003c/code\u003e and \u003ccode\u003eexcept\u003c/code\u003e cases\njust to catch the expected exceptions. Our code will become complex and unreadable with all this mess!\u003c/p\u003e\n\u003cp\u003eOr we can go with the top level \u003ccode\u003eexcept Exception:\u003c/code\u003e case\nto catch literally everything.\nAnd this way we would end up with catching unwanted ones.\nThis approach can hide serious problems from us for a long time.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"pipe-example\" class=\"anchor\" href=\"#pipe-example\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003ePipe example\u003c/h3\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003erequests\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.result\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eResult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esafe\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.pipeline\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eflow\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.pointfree\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch_user_profile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eResult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'UserProfile'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eException\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"Fetches `UserProfile` TypedDict from foreign API.\"\"\"\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eflow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_make_request\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_parse_json\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_make_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# TODO: we are not yet done with this example, read more about `IO`:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'/api/users/{0}'\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eraise_for_status\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_parse_json\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'UserProfile'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eNow we have a clean and a safe and declarative way\nto express our business needs:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWe start from making a request, that might fail at any moment,\u003c/li\u003e\n\u003cli\u003eThen parsing the response if the request was successful,\u003c/li\u003e\n\u003cli\u003eAnd then return the result.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNow, instead of returning regular values\nwe return values wrapped inside a special container\nthanks to the\n\u003ca href=\"https://returns.readthedocs.io/en/latest/pages/result.html#safe\" rel=\"nofollow\"\u003e@safe\u003c/a\u003e\ndecorator. It will return \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/result.html\" rel=\"nofollow\"\u003eSuccess[YourType] or Failure[Exception]\u003c/a\u003e.\nAnd will never throw exception at us!\u003c/p\u003e\n\u003cp\u003eWe also use \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/pipeline.html#flow\" rel=\"nofollow\"\u003eflow\u003c/a\u003e\nand \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/pointfree.html#bind\" rel=\"nofollow\"\u003ebind\u003c/a\u003e\nfunctions for handy and declarative composition.\u003c/p\u003e\n\u003cp\u003eThis way we can be sure that our code won't break in\nrandom places due to some implicit exception.\nNow we control all parts and are prepared for the explicit errors.\u003c/p\u003e\n\u003cp\u003eWe are not yet done with this example,\nlet's continue to improve it in the next chapter.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"io-container\" class=\"anchor\" href=\"#io-container\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIO container\u003c/h2\u003e\n\u003cp\u003eLet's look at our example from another angle.\nAll its functions look like regular ones:\nit is impossible to tell whether they are \u003ca href=\"https://en.wikipedia.org/wiki/Pure_function\" rel=\"nofollow\"\u003epure\u003c/a\u003e\nor impure from the first sight.\u003c/p\u003e\n\u003cp\u003eIt leads to a very important consequence:\n\u003cem\u003ewe start to mix pure and impure code together\u003c/em\u003e.\nWe should not do that!\u003c/p\u003e\n\u003cp\u003eWhen these two concepts are mixed\nwe suffer really bad when testing or reusing it.\nAlmost everything should be pure by default.\nAnd we should explicitly mark impure parts of the program.\u003c/p\u003e\n\u003cp\u003eThat's why we have created \u003ccode\u003eIO\u003c/code\u003e container\nto mark impure functions that never fail.\u003c/p\u003e\n\u003cp\u003eThese impure functions use \u003ccode\u003erandom\u003c/code\u003e, current datetime, environment, or console:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003erandom\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003edatetime\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003edt\u003c/span\u003e\n\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.io\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eIO\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_random_number\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eIO\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e  \u003cspan class=\"c\"\u003e# or use `@impure` decorator\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eIO\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erandint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e  \u003cspan class=\"c\"\u003e# isn't pure, because random\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eCallable\u003c/span\u003e\u003cspan class=\"p\"\u003e[[],\u003c/span\u003e \u003cspan class=\"n\"\u003eIO\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003edt\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edatetime\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eimpure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edt\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edatetime\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enow\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@impure\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003ereturn_and_show_next_number\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eprevious\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003enext_number\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eprevious\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enext_number\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"c\"\u003e# isn't pure, because does IO\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003enext_number\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eNow we can clearly see which functions are pure and which ones are impure.\nThis helps us a lot in building large applications, unit testing you code,\nand composing business logic together.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"troublesome-io\" class=\"anchor\" href=\"#troublesome-io\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTroublesome IO\u003c/h3\u003e\n\u003cp\u003eAs it was already said, we use \u003ccode\u003eIO\u003c/code\u003e when we handle functions that do not fail.\u003c/p\u003e\n\u003cp\u003eWhat if our function can fail and is impure?\nLike \u003ccode\u003erequests.get()\u003c/code\u003e we had earlier in our example.\u003c/p\u003e\n\u003cp\u003eThen we have to use a special \u003ccode\u003eIOResult\u003c/code\u003e type instead of a regular \u003ccode\u003eResult\u003c/code\u003e.\nLet's find the difference:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOur \u003ccode\u003e_parse_json\u003c/code\u003e function always returns\nthe same result (hopefully) for the same input:\nyou can either parse valid \u003ccode\u003ejson\u003c/code\u003e or fail on invalid one.\nThat's why we return pure \u003ccode\u003eResult\u003c/code\u003e, there's no \u003ccode\u003eIO\u003c/code\u003e inside\u003c/li\u003e\n\u003cli\u003eOur \u003ccode\u003e_make_request\u003c/code\u003e function is impure and can fail.\nTry to send two similar requests with and without internet connection.\nThe result will be different for the same input.\nThat's why we must use \u003ccode\u003eIOResult\u003c/code\u003e here: it can fail and has \u003ccode\u003eIO\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSo, in order to fulfill our requirement and separate pure code from impure one,\nwe have to refactor our example.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"explicit-io\" class=\"anchor\" href=\"#explicit-io\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eExplicit IO\u003c/h3\u003e\n\u003cp\u003eLet's make our \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/io.html\" rel=\"nofollow\"\u003eIO\u003c/a\u003e\nexplicit!\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003erequests\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.io\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eIOResult\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eimpure_safe\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.result\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003esafe\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.pipeline\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eflow\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.pointfree\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ebind_result\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch_user_profile\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eIOResult\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"s\"\u003e'UserProfile'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nb\"\u003eException\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"s\"\u003e\"\"\"Fetches `UserProfile` TypedDict from foreign API.\"\"\"\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eflow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_make_request\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e# before: def (Response) -\u0026gt; UserProfile\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e# after safe: def (Response) -\u0026gt; ResultE[UserProfile]\u003c/span\u003e\n        \u003cspan class=\"c\"\u003e# after bind_result: def (IOResultE[Response]) -\u0026gt; IOResultE[UserProfile]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebind_result\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003e_parse_json\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@impure_safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_make_request\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'/api/users/{0}'\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eformat\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eraise_for_status\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003e_parse_json\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003erequests\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'UserProfile'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eresponse\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejson\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eAnd later we can use \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/io.html#unsafe-perform-io\" rel=\"nofollow\"\u003eunsafe_perform_io\u003c/a\u003e\nsomewhere at the top level of our program to get the pure (or \"real\") value.\u003c/p\u003e\n\u003cp\u003eAs a result of this refactoring session, we know everything about our code:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWhich parts can fail,\u003c/li\u003e\n\u003cli\u003eWhich parts are impure,\u003c/li\u003e\n\u003cli\u003eHow to compose them in a smart, readable, and typesafe manner.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"future-container\" class=\"anchor\" href=\"#future-container\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eFuture container\u003c/h2\u003e\n\u003cp\u003eThere are several issues with \u003ccode\u003easync\u003c/code\u003e code in Python:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eYou cannot call \u003ccode\u003easync\u003c/code\u003e function from a sync one\u003c/li\u003e\n\u003cli\u003eAny unexpectedly thrown exception can ruin your whole event loop\u003c/li\u003e\n\u003cli\u003eUgly composition with lots of \u003ccode\u003eawait\u003c/code\u003e statements\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e\u003ccode\u003eFuture\u003c/code\u003e and \u003ccode\u003eFutureResult\u003c/code\u003e containers solve these issues!\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"mixing-sync-and-async-code\" class=\"anchor\" href=\"#mixing-sync-and-async-code\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMixing sync and async code\u003c/h3\u003e\n\u003cp\u003eThe main feature of \u003ca href=\"https://returns.readthedocs.io/en/latest/pages/future.html\" rel=\"nofollow\"\u003eFuture\u003c/a\u003e\nis that it allows to run async code\nwhile maintaining sync context. Let's see an example.\u003c/p\u003e\n\u003cp\u003eLet's say we have two functions,\nthe \u003ccode\u003efirst\u003c/code\u003e one returns a number and the \u003ccode\u003esecond\u003c/code\u003e one increments it:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003esecond\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e  \u003cspan class=\"c\"\u003e# How can we call `first()` from here?\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e  \u003cspan class=\"c\"\u003e# Boom! Don't do this. We illustrate a problem here.\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eIf we try to just run \u003ccode\u003efirst()\u003c/code\u003e, we will just create an unawaited coroutine.\nIt won't return the value we want.\u003c/p\u003e\n\u003cp\u003eBut, if we would try to run \u003ccode\u003eawait first()\u003c/code\u003e,\nthen we would need to change \u003ccode\u003esecond\u003c/code\u003e to be \u003ccode\u003easync\u003c/code\u003e.\nAnd sometimes it is not possible for various reasons.\u003c/p\u003e\n\u003cp\u003eHowever, with \u003ccode\u003eFuture\u003c/code\u003e we can \"pretend\" to call async code from sync code:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.future\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eFuture\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003esecond\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eFuture\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eFuture\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efirst\u003c/span\u003e\u003cspan class=\"p\"\u003e())\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003elambda\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003enum\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eWithout touching our \u003ccode\u003efirst\u003c/code\u003e async function\nor making \u003ccode\u003esecond\u003c/code\u003e async we have achieved our goal.\nNow, our async value is incremented inside a sync function.\u003c/p\u003e\n\u003cp\u003eHowever, \u003ccode\u003eFuture\u003c/code\u003e still requires to be executed inside a proper eventloop:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eanyio\u003c/span\u003e  \u003cspan class=\"c\"\u003e# or asyncio, or any other lib\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e# We can then pass our `Future` to any library: asyncio, trio, curio.\u003c/span\u003e\n\u003cspan class=\"c\"\u003e# And use any event loop: regular, uvloop, even a custom one, etc\u003c/span\u003e\n\u003cspan class=\"k\"\u003eassert\u003c/span\u003e \u003cspan class=\"n\"\u003eanyio\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esecond\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eawaitable\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eAs you can see \u003ccode\u003eFuture\u003c/code\u003e allows you\nto work with async functions from a sync context.\nAnd to mix these two realms together.\nUse raw \u003ccode\u003eFuture\u003c/code\u003e for operations that cannot fail or raise exceptions.\nPretty much the same logic we had with our \u003ccode\u003eIO\u003c/code\u003e container.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"async-code-without-exceptions\" class=\"anchor\" href=\"#async-code-without-exceptions\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eAsync code without exceptions\u003c/h3\u003e\n\u003cp\u003eWe have already covered how \u003ca href=\"#result-container\"\u003e\u003ccode\u003eResult\u003c/code\u003e\u003c/a\u003e works\nfor both pure and impure code.\nThe main idea is: we don't raise exceptions, we return them.\nIt is \u003cstrong\u003eespecially\u003c/strong\u003e critical in async code,\nbecause a single exception can ruin\nall our coroutines running in a single eventloop.\u003c/p\u003e\n\u003cp\u003eWe have a handy combination of \u003ccode\u003eFuture\u003c/code\u003e and \u003ccode\u003eResult\u003c/code\u003e containers: \u003ccode\u003eFutureResult\u003c/code\u003e.\nAgain, this is exactly like \u003ccode\u003eIOResult\u003c/code\u003e, but for impure async code.\nUse it when your \u003ccode\u003eFuture\u003c/code\u003e might have problems:\nlike HTTP requests or filesystem operations.\u003c/p\u003e\n\u003cp\u003eYou can easily turn any wild throwing coroutine into a calm \u003ccode\u003eFutureResult\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eanyio\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.future\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003efuture_safe\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.io\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eIOFailure\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@future_safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eraising\u003c/span\u003e\u003cspan class=\"p\"\u003e():\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eraise\u003c/span\u003e \u003cspan class=\"nb\"\u003eValueError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Not so fast!'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eioresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eanyio\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eraising\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eawaitable\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"c\"\u003e# all `Future`s return IO containers\u003c/span\u003e\n\u003cspan class=\"k\"\u003eassert\u003c/span\u003e \u003cspan class=\"n\"\u003eioresult\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eIOFailure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003eValueError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'Not so fast!'\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e  \u003cspan class=\"c\"\u003e# True\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eUsing \u003ccode\u003eFutureResult\u003c/code\u003e will keep your code safe from exceptions.\nYou can always \u003ccode\u003eawait\u003c/code\u003e or execute inside an eventloop any \u003ccode\u003eFutureResult\u003c/code\u003e\nto get sync \u003ccode\u003eIOResult\u003c/code\u003e instance to work with it in a sync manner.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"better-async-composition\" class=\"anchor\" href=\"#better-async-composition\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eBetter async composition\u003c/h3\u003e\n\u003cp\u003ePreviously, you had to do quite a lot of \u003ccode\u003eawait\u003c/code\u003eing while writing \u003ccode\u003easync\u003c/code\u003e code:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'User'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_user_permissions\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e'User'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'Permissions'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eensure_allowed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e'Permissions'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# Also, don't forget to handle all possible errors with `try / except`!\u003c/span\u003e\n    \u003cspan class=\"n\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003efetch_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e  \u003cspan class=\"c\"\u003e# We will await each time we use a coro!\u003c/span\u003e\n    \u003cspan class=\"n\"\u003epermissions\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eget_user_permissions\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"n\"\u003eensure_allowed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSome people are ok with it, but some people don't like this imperative style.\nThe problem is that there was no choice.\u003c/p\u003e\n\u003cp\u003eBut now, you can do the same thing in functional style!\nWith the help of \u003ccode\u003eFuture\u003c/code\u003e and \u003ccode\u003eFutureResult\u003c/code\u003e containers:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eanyio\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.future\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eFutureResultE\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003efuture_safe\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.io\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eIOSuccess\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eIOFailure\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@future_safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003efetch_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'User'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@future_safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eget_user_permissions\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e'User'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"s\"\u003e'Permissions'\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"nd\"\u003e@future_safe\u003c/span\u003e\n\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eensure_allowed\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epermissions\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s\"\u003e'Permissions'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"nb\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"o\"\u003e...\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eFutureResultE\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# We can now turn `main` into a sync function, it does not `await` at all.\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e# We also don't care about exceptions anymore, they are already handled.\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003efetch_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eget_user_permissions\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eensure_allowed\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003ecorrect_user_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e  \u003cspan class=\"c\"\u003e# has required permissions\u003c/span\u003e\n\u003cspan class=\"n\"\u003ebanned_user_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e  \u003cspan class=\"c\"\u003e# does not have required permissions\u003c/span\u003e\n\u003cspan class=\"n\"\u003ewrong_user_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e  \u003cspan class=\"c\"\u003e# does not exist\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e# We can have correct business results:\u003c/span\u003e\n\u003cspan class=\"k\"\u003eassert\u003c/span\u003e \u003cspan class=\"n\"\u003eanyio\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecorrect_user_id\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eawaitable\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eIOSuccess\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"k\"\u003eassert\u003c/span\u003e \u003cspan class=\"n\"\u003eanyio\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ebanned_user_id\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eawaitable\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eIOSuccess\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"c\"\u003e# Or we can have errors along the way:\u003c/span\u003e\n\u003cspan class=\"k\"\u003eassert\u003c/span\u003e \u003cspan class=\"n\"\u003eanyio\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ewrong_user_id\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\u003cspan class=\"o\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eawaitable\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eIOFailure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eUserDoesNotExistError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e...\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eOr even something really fancy:\u003c/p\u003e\n\u003cpre lang=\"python\" class=\"highlight-python\"\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.pointfree\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ereturns.pipeline\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eflow\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003emain\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nb\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eFutureResultE\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e]:\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003eflow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"n\"\u003efetch_user\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003euser_id\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eget_user_permissions\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eensure_allowed\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eLater we can also refactor our logical functions to be sync\nand to return \u003ccode\u003eFutureResult\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eLovely, isn't it?\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"more\" class=\"anchor\" href=\"#more\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMore!\u003c/h2\u003e\n\u003cp\u003eWant more?\n\u003ca href=\"https://returns.readthedocs.io\" rel=\"nofollow\"\u003eGo to the docs!\u003c/a\u003e\nOr \u003ca href=\"https://repl.it/@sobolevn/returns#ex.py\" rel=\"nofollow\"\u003etry our demo\u003c/a\u003e.\nOr read these articles:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://sobolevn.me/2019/02/python-exceptions-considered-an-antipattern\" rel=\"nofollow\"\u003ePython exceptions considered an anti-pattern\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://sobolevn.me/2019/03/enforcing-srp\" rel=\"nofollow\"\u003eEnforcing Single Responsibility Principle in Python\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://sobolevn.me/2020/02/typed-functional-dependency-injection\" rel=\"nofollow\"\u003eTyped functional Dependency Injection in Python\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://sobolevn.me/2020/06/how-async-should-have-been\" rel=\"nofollow\"\u003eHow Async Should Have Been\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://sobolevn.me/2020/10/higher-kinded-types-in-python\" rel=\"nofollow\"\u003eHigher Kinded Types in Python\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eDo you have an article to submit? Feel free to open a pull request!\u003c/p\u003e\n\u003cp align=\"center\"\u003e— ⭐️ —\u003c/p\u003e\n\u003cp align=\"center\"\u003e\u003ci\u003eDrylabs maintains dry-python and helps those who want to use it inside their organizations.\u003c/i\u003e\u003c/p\u003e\n\u003cp align=\"center\"\u003e\u003ci\u003eRead more at \u003ca href=\"https://drylabs.io\" rel=\"nofollow\"\u003edrylabs.io\u003c/a\u003e\u003c/i\u003e\u003c/p\u003e\n\u003c/body\u003e\u003c/html\u003e\n","project_id":167689891,"name":"returns","owner_login":"dry-python","description":"Make your functions return something meaningful, typed, and safe!","pushed_at":"2021-01-13T18:45:49.000Z","stargazers_count":1534,"open_issues_count":37,"has_downloads":true,"archived":false,"license_key":"bsd-2-clause","homepage":"https://returns.rtfd.io","private":false,"project_created_at":"2019-01-26T13:08:38.000Z","project_updated_at":"2021-01-13T21:47:19.000Z","language":null,"added_language_topic":false},"categories":[{"name":"Advertising","topicsCount":10},{"name":"Application Programming Interfaces","topicsCount":124},{"name":"Applications","topicsCount":192},{"name":"Artificial Intelligence","topicsCount":78},{"name":"Blockchain","topicsCount":73},{"name":"Build Tools","topicsCount":113},{"name":"Cloud Computing","topicsCount":80},{"name":"Code Quality","topicsCount":28},{"name":"Collaboration","topicsCount":32},{"name":"Command Line Interface","topicsCount":49},{"name":"Community","topicsCount":83},{"name":"Companies","topicsCount":60},{"name":"Compilers","topicsCount":63},{"name":"Computer Science","topicsCount":80},{"name":"Configuration Management","topicsCount":42},{"name":"Content Management","topicsCount":175},{"name":"Control Flow","topicsCount":213},{"name":"Data Formats","topicsCount":78},{"name":"Data Processing","topicsCount":276},{"name":"Data Storage","topicsCount":135},{"name":"Economics","topicsCount":64},{"name":"Frameworks","topicsCount":215},{"name":"Games","topicsCount":129},{"name":"Graphics","topicsCount":110},{"name":"Hardware","topicsCount":152},{"name":"Integrated Development Environments","topicsCount":49},{"name":"Learning Resources","topicsCount":166},{"name":"Legal","topicsCount":29},{"name":"Libraries","topicsCount":129},{"name":"Lists Of Projects","topicsCount":22},{"name":"Machine Learning","topicsCount":347},{"name":"Mapping","topicsCount":64},{"name":"Marketing","topicsCount":15},{"name":"Mathematics","topicsCount":55},{"name":"Media","topicsCount":239},{"name":"Messaging","topicsCount":98},{"name":"Networking","topicsCount":315},{"name":"Operating Systems","topicsCount":89},{"name":"Operations","topicsCount":121},{"name":"Package Managers","topicsCount":55},{"name":"Programming Languages","topicsCount":245},{"name":"Runtime Environments","topicsCount":100},{"name":"Science","topicsCount":42},{"name":"Security","topicsCount":396},{"name":"Social Media","topicsCount":27},{"name":"Software Architecture","topicsCount":72},{"name":"Software Development","topicsCount":72},{"name":"Software Performance","topicsCount":58},{"name":"Software Quality","topicsCount":133},{"name":"Text Editors","topicsCount":49},{"name":"Text Processing","topicsCount":136},{"name":"User Interface","topicsCount":330},{"name":"User Interface Components","topicsCount":514},{"name":"Version Control","topicsCount":30},{"name":"Virtualization","topicsCount":71},{"name":"Web Browsers","topicsCount":42},{"name":"Web Servers","topicsCount":26},{"name":"Web User Interface","topicsCount":210},{"name":"All Projects","topicsCount":0}],"advertisement":{"variation":"project","title":"Become A Software Engineer At Top Companies","description":"Identify your strengths with a free online coding quiz, and skip resume and recruiter screens at multiple companies at once.  It's free, confidential, includes a free flight and hotel, along with help to study to pass interviews and negotiate a high salary!","url":"https://triplebyte.com/a/PGNifkM/pt2"},"nonCommercial":false,"nonDerivative":false}</script>
      



    <!-- load synchronously before app bundle so adsbygoogle is always defined, google's new ad code doesn't seem to like this, at least for the initial review  -->
    <!-- try loading programatically and async with a callback to push the ads and see if it helps page load speed -->
    <!--script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script-->
    <script src="/packs/root-bundle-1f53b6db74aa6b1bef19.js"></script>
  </body>
</html>
