<!DOCTYPE html>
<html>
  <head>
<script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam-cell.nr-data.net","errorBeacon":"bam-cell.nr-data.net","licenseKey":"98ebaa2fbd","applicationID":"233526624","transactionName":"c11aERNaXltSERdDR19YUQYVGltZUwZA","queueTime":0,"applicationTime":486,"agent":""}</script>
<script>(window.NREUM||(NREUM={})).loader_config={licenseKey:"98ebaa2fbd",applicationID:"233526624"};window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var i=t[n]={exports:{}};e[n][0].call(i.exports,function(t){var i=e[n][1][t];return r(i||t)},i,i.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,n){function r(){}function i(e,t,n){return function(){return o(e,[u.now()].concat(c(arguments)),t?null:this,n),t?void 0:this}}var o=e("handle"),a=e(6),c=e(7),f=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",l=p+"ixn-";a(d,function(e,t){s[t]=i(p+t,!0,"api")}),s.addPageAction=i(p+"addPageAction",!0),s.setCurrentRouteName=i(p+"routeName",!0),t.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,i="function"==typeof t;return o(l+"tracer",[u.now(),e,n],r),function(){if(f.emit((i?"":"no-")+"fn-start",[u.now(),r,i],n),i)try{return t.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],n),e}finally{f.emit("fn-end",[u.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=i(l+t)}),newrelic.noticeError=function(e,t){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,t])}},{}],2:[function(e,t,n){function r(){return c.exists&&performance.now?Math.round(performance.now()):(o=Math.max((new Date).getTime(),o))-a}function i(){return o}var o=(new Date).getTime(),a=o,c=e(8);t.exports=r,t.exports.offset=a,t.exports.getLastTimestamp=i},{}],3:[function(e,t,n){function r(e,t){var n=e.getEntries();n.forEach(function(e){"first-paint"===e.name?d("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&d("timing",["fcp",Math.floor(e.startTime)])})}function i(e,t){var n=e.getEntries();n.length>0&&d("lcp",[n[n.length-1]])}function o(e){e.getEntries().forEach(function(e){e.hadRecentInput||d("cls",[e])})}function a(e){if(e instanceof m&&!g){var t=Math.round(e.timeStamp),n={type:e.type};t<=p.now()?n.fid=p.now()-t:t>p.offset&&t<=Date.now()?(t-=p.offset,n.fid=p.now()-t):t=p.now(),g=!0,d("timing",["fi",t,n])}}function c(e){d("pageHide",[p.now(),e])}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var f,u,s,d=e("handle"),p=e("loader"),l=e(5),m=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){f=new PerformanceObserver(r);try{f.observe({entryTypes:["paint"]})}catch(v){}u=new PerformanceObserver(i);try{u.observe({entryTypes:["largest-contentful-paint"]})}catch(v){}s=new PerformanceObserver(o);try{s.observe({type:"layout-shift",buffered:!0})}catch(v){}}if("addEventListener"in document){var g=!1,w=["click","keydown","mousedown","pointerdown","touchstart"];w.forEach(function(e){document.addEventListener(e,a,!1)})}l(c)}},{}],4:[function(e,t,n){function r(e,t){if(!i)return!1;if(e!==i)return!1;if(!t)return!0;if(!o)return!1;for(var n=o.split("."),r=t.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var c=navigator.userAgent,f=c.match(a);f&&c.indexOf("Chrome")===-1&&c.indexOf("Chromium")===-1&&(i="Safari",o=f[1])}t.exports={agent:i,version:o,match:r}},{}],5:[function(e,t,n){function r(e){function t(){e(a&&document[a]?document[a]:document[i]?"hidden":"visible")}"addEventListener"in document&&o&&document.addEventListener(o,t,!1)}t.exports=r;var i,o,a;"undefined"!=typeof document.hidden?(i="hidden",o="visibilitychange",a="visibilityState"):"undefined"!=typeof document.msHidden?(i="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",o="webkitvisibilitychange",a="webkitVisibilityState")},{}],6:[function(e,t,n){function r(e,t){var n=[],r="",o=0;for(r in e)i.call(e,r)&&(n[o]=t(r,e[r]),o+=1);return n}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],7:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(i<0?0:i);++r<i;)o[r]=e[t+r];return o}t.exports=r},{}],8:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,t,n){function r(){}function i(e){function t(e){return e&&e instanceof r?e:e?u(e,f,a):a()}function n(n,r,i,o,a){if(a!==!1&&(a=!0),!l.aborted||o){e&&a&&e(n,r,i);for(var c=t(i),f=v(n),u=f.length,s=0;s<u;s++)f[s].apply(c,r);var p=d[h[n]];return p&&p.push([b,n,r,c]),c}}function o(e,t){y[e]=v(e).concat(t)}function m(e,t){var n=y[e];if(n)for(var r=0;r<n.length;r++)n[r]===t&&n.splice(r,1)}function v(e){return y[e]||[]}function g(e){return p[e]=p[e]||i(n)}function w(e,t){s(e,function(e,n){t=t||"feature",h[n]=t,t in d||(d[t]=[])})}var y={},h={},b={on:o,addEventListener:o,removeEventListener:m,emit:n,get:g,listeners:v,context:t,buffer:w,abort:c,aborted:!1};return b}function o(e){return u(e,f,a)}function a(){return new r}function c(){(d.api||d.feature)&&(l.aborted=!0,d=l.backlog={})}var f="nr@context",u=e("gos"),s=e(6),d={},p={},l=t.exports=i();t.exports.getOrSetContext=o,l.backlog=d},{}],gos:[function(e,t,n){function r(e,t,n){if(i.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[t]=r,r}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){i.buffer([e],r),i.emit(e,t,n)}var i=e("ee").get("handle");t.exports=r,r.ee=i},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!x++){var e=b.info=NREUM.info,t=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return u.abort();f(y,function(t,n){e[t]||(e[t]=n)});var n=a();c("mark",["onload",n+b.offset],null,"api"),c("timing",["load",n]);var r=p.createElement("script");r.src="https://"+e.agent,t.parentNode.insertBefore(r,t)}}function i(){"complete"===p.readyState&&o()}function o(){c("mark",["domContent",a()+b.offset],null,"api")}var a=e(2),c=e("handle"),f=e(6),u=e("ee"),s=e(4),d=window,p=d.document,l="addEventListener",m="attachEvent",v=d.XMLHttpRequest,g=v&&v.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:v,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1194.min.js"},h=v&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),b=t.exports={offset:a.getLastTimestamp(),now:a,origin:w,features:{},xhrWrappable:h,userAgent:s};e(1),e(3),p[l]?(p[l]("DOMContentLoaded",o,!1),d[l]("load",r,!1)):(p[m]("onreadystatechange",i),d[m]("onload",r)),c("mark",["firstbyte",a.getLastTimestamp()],null,"api");var x=0},{}],"wrap-function":[function(e,t,n){function r(e,t){function n(t,n,r,f,u){function nrWrapper(){var o,a,s,p;try{a=this,o=d(arguments),s="function"==typeof r?r(o,a):r||{}}catch(l){i([l,"",[o,a,f],s],e)}c(n+"start",[o,a,f],s,u);try{return p=t.apply(a,o)}catch(m){throw c(n+"err",[o,a,m],s,u),m}finally{c(n+"end",[o,a,p],s,u)}}return a(t)?t:(n||(n=""),nrWrapper[p]=t,o(t,nrWrapper,e),nrWrapper)}function r(e,t,r,i,o){r||(r="");var c,f,u,s="-"===r.charAt(0);for(u=0;u<t.length;u++)f=t[u],c=e[f],a(c)||(e[f]=n(c,s?f+r:r,i,f,o))}function c(n,r,o,a){if(!m||t){var c=m;m=!0;try{e.emit(n,r,o,t,a)}catch(f){i([f,n,r,o],e)}m=c}}return e||(e=s),n.inPlace=r,n.flag=p,n}function i(e,t){t||(t=s);try{t.emit("internal-error",e)}catch(n){}}function o(e,t,n){if(Object.defineProperty&&Object.keys)try{var r=Object.keys(e);return r.forEach(function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){return e[n]=t,t}})}),t}catch(o){i([o],n)}for(var a in e)l.call(e,a)&&(t[a]=e[a]);return t}function a(e){return!(e&&e instanceof Function&&e.apply&&!e[p])}function c(e,t){var n=t(e);return n[p]=e,o(e,n,s),n}function f(e,t,n){var r=e[t];e[t]=c(r,n)}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;++n)t[n]=arguments[n];return t}var s=e("ee"),d=e(7),p="nr@original",l=Object.prototype.hasOwnProperty,m=!1;t.exports=r,t.exports.wrapFunction=c,t.exports.wrapInPlace=f,t.exports.argsToArray=u},{}]},{},["loader"]);</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-6242674-23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-6242674-23', { 'optimize_id': 'GTM-T48MRN9'});
    </script>

    <title>Javascript Testing Best Practices</title>
<meta name="description" content="📗🌐 🚢 Comprehensive and exhaustive JavaScript &amp; Node.js testing best practices (January 2021)">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://awesomeopensource.com/project/goldbergyoni/javascript-testing-best-practices">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

      /* copy template below */
      /* ------------------- */
      /* ----------------- */
      /* ----------------- */

      /*ipad and below */


      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {

      }

      /* end template copy */
      /* ----------------- */
      /* ----------------- */
      /* ----------------- */

      /*ipad and below */
      .show_on_phones {
        display: block;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .show_on_phones {
          display: none;
        }
      }

      .twenty_px_padding_top {
        padding-top: 20px;
      }

      /*ipad and below */
      .projects_category_explorer_left_column {
        max-width: 0;
        margin-right: 0;
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_category_explorer_left_column {
          min-width: 20%;
          margin-right: 5%;
          display: block;
        }
      }

      /*ipad and below */
      .projects_list_right_column {
        min-width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_right_column {
          min-width: 75%;
        }
      }

      .display_flex {
        display: flex;
      }

      .margin_bottom_15 {
        margin-bottom: 15px;
      }

      /*ipad and below */
      .image-gallery-image {
        width: 100% !important;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .image-gallery-image {
          width: 1280px !important;
        }
      }

      /*ipad and below */
      .aos_sponsorship_link {
        font-size: 14px;
        font-weight: bold;
        color: blue;
        text-decoration: underline;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_sponsorship_link {
          font-size: 18px;
          font-weight: bold;
          color: blue;
          text-decoration: underline;
        }
      }

      /*ipad and below */
      .aos_desktop_right_ads_container {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_desktop_right_ads_container {
          display: block;
        }
      }

      /*ipad and below */
      .aos_project_screen_container {
        margin-left: 5%;
        margin-right: 5%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_screen_container {
          margin-left: 5%;
          margin-right: 0;
          display: flex;
        }
      }

      /*ipad and below */
      .aos_project_inner_screen_container {
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_inner_screen_container {
          width: 95%;
        }
      }

      /*ipad and below
      .aos_license_text_metadata {
        margin-top: 0 !important;
      }

      everything larger than ipad
      @media screen and (min-width: 1024px) {
        .aos_license_text_metadata {
          margin-top: 0 !important;
        }
      }*/

      /*ipad and below */
      .projects_list_ad_slot_1 {
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_ad_slot_1 {
          height: fit-content;
        }
      }

      /*ipad and below */
      .projects_list_ad_slot_2 {
        height: fit-content;
        margin-top: -34px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_ad_slot_2 {
          height: fit-content;
          margin-top: 0;
        }
      }

      /*ipad and below */
      .project_page_ad_slot_1 {
        display: block;
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .project_page_ad_slot_1 {
          display: block;
          height: fit-content;
        }
      }

      /*ipad and below */
      .project_page_ad_slot_2 {
        display: block;
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .project_page_ad_slot_2 {
          display: block;
          height: fit-content;
        }
      }

      /*ipad and below */
      .aos_category_explorer_category_container {
        background-color: white;
        padding: 10px;
        margin-bottom: 0px;
        border-bottom: 1px solid lightgray;
        border-left: 1px solid lightgray;
        border-right: 1px solid lightgray;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_category_explorer_category_container {
          background-color: white;
          padding: 10px;
          margin-bottom: 0px;
          border-bottom: 1px solid lightgray;
          border-left: 1px solid lightgray;
          border-right: 1px solid lightgray;
        }
      }

      .aos_category_explorer_category_container:first-child {
        border-top: 1px solid lightgray;
      }

      /*ipad and below */
      .aos_topic_count {
        font-size: 10px;
        color: #4f4f4f;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topic_count {
          font-size: 16px;
          color: #4f4f4f;
        }
      }

      /*ipad and below */
      .aos_topic_icon {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topic_icon {
          font-size: 14px;
          display: inline-block;
        }
      }

      /*ipad and below */
      .aos_project_count {
        color: #4f4f4f;
        font-size: 14px;
        font-weight: bold;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_count {
          font-size: 14px;
          font-weight: bold;
        }
      }

      /*ipad and below */
      .aos_project_star {
        font-size: 14px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_star {
          font-size: 14px;
          /*margin-right: 7px;*/
        }
      }

      /*ipad and below */
      .aos_project_metadata_trademark_notice {
        font-size: 8px;
        color: gray;
        margin-top: 10px;
        border-bottom: 1px solid lightgray;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_trademark_notice {
          font-size: 12px;
          color: gray;
          margin-top: 20px;
          border-bottom: 1px solid lightgray;
        }
      }

      /*ipad and below */
      .aos_project_metadata_description {
        margin-bottom: 10px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_description {
          margin-bottom: 5px;
        }
      }

      .aos_project_metadata {
        display: inline-block;
        margin-bottom: 10px;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata {
          display: inline-block;
          margin-bottom: 10px;
          width: 100%;
        }
      }

      /*ipad and below */
      .aos_project_metadata_content {
        /*border-bottom: 1px solid lightgray;*/
        font-size: 16px;
        color: #000000;
        font-weight: 300;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_content {
          /*border-bottom: 1px solid lightgray;*/
          font-size: 16px;
          color: #000000;
          font-weight: 300;
        }
      }

      /*ipad and below */
      .aos_project_metadata_header {
        color: #808080;
        margin-bottom: 10px;
        margin-top: 10px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_header {
          color: #808080;
          margin-bottom: 10px;
          margin-top: 10px;
          font-size: 16px;
        }
      }

      aos_project_metadata_header:hover {
        color: #808080;
      }

      /*ipad and below */
      .aos_project_metadata_title {
        font-size: 20px;
        margin-bottom: 5px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_title {
          font-size: 30px;
          margin-bottom: 10px;
        }
      }

      /*ipad and below */
      .aos_app_container {
        display: flex;
        flex-direction: row;
        width: 100%;
        margin-bottom: 2px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_app_container {
          display: flex;
          flex-direction: row;
          width: 100%;
          margin-bottom: 0;
        }
      }

      @media screen and (min-width: 1025px) {
        .aos_desktop_ad_spacer {
          margin-top: 5px;
          margin-bottom: 5px;
        }
      }

      /*ipad and below */
      .aos_show_ad_on_mobile {
        display: none;
      }

      @media screen and (max-width: 1024px) {
        .aos_show_ad_on_mobile {
          /*display: inline-block;*/
          display: block; /*adsense recommended*/
        }
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1025px) {
        .aos_show_ad_on_desktop {
          /*display: inline-block;*/
          display: block; /*adsense recommended*/
        }
      }

      /*ipad and below */
      @media screen and (max-width: 1024px) {
        .aos_show_ad_on_desktop {
          display: none;
        }
      }

      /*ipad and below */
      .aos_filter_topics_input {
        font-size: 16px;
        padding: 10px;
        border: 1px solid lightgray;
        background-color: white;
        border-radius: 10px;
        box-shadow: 1px 1px 5px lightgrey;
        margin-bottom: 20px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_filter_topics_input {
          font-size: 20px;
          padding: 10px;
          border: 1px solid lightgray;
          background-color: white;
          border-radius: 10px;
          box-shadow: 1px 1px 5px lightgrey;
          margin-bottom: 20px;
        }
      }

      /* ipad and below */
      .aos_topics_project {
        font-family: helvetica, arial, sans-serif;
        font-size: 12px;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topics_project {
          font-family: helvetica, arial, sans-serif;
          margin-bottom: 0;
          font-size: 20px;
          border-radius: 10px;
          padding: 0;
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          width: 100%;
        }
      }

      /* ipad and below
      .aos_topics_sidebar {
        font-family: helvetica, arial, sans-serif;
        font-size: 12px;
        margin-left: 2%;
        margin-right: 2%;
        width: 94%;
        padding: 0;
        display: flex;
        flex-direction: column;
      }

       everything larger than ipad
      @media screen and (min-width: 1024px) {
        .aos_topics_sidebar {
          font-family: helvetica, arial, sans-serif;
          margin-left: 5%;
          margin-right: 2%;
          width: 30%;
          margin-bottom: 0;
          font-size: 20px;
          border-radius: 10px;
          padding: 0;
          display: flex;
          flex-direction: column;
        }
      }*/

      /*ipad and below */
      .aos_pill_box {
        display: flex;
        color: black;
        border-radius: 5px;
        padding: 2px;
        margin: 2px;
        align-items: center;
        border-color: black;
        background-color: white;
        font-size: 12px;
        border: 1px solid black;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pill_box {
          display: flex;
          color: black;
          border-radius: 5px;
          padding: 5px;
          margin: 10px;
          align-items: center;
          border: 0;
          background-color: white;
          box-shadow: 1px 1px 10px 1px rgba(0,0,0,0.25);
          font-size: 16px;
        }
      }

      /*ipad and below */
      .aos_selected_topics_text_container {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_selected_topics_text_container {
          margin-left: 25px;
          margin-right: 10px;
          margin-bottom: 10px;
          margin-top: 10px;
          padding: 5px;
          font-weight: bold;
          font-size: 20px;
          white-space: nowrap;
          display: inline-block;
        }
      }

      /*ipad and below */
      .aos_pagenavigator_links_container {
        display: flex;
        justify-content: space-around;
        font-size: 12px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pagenavigator_links_container {
          display: flex;
          justify-content: space-around;
          font-size: 16px;
        }
      }

      /*ipad and below */
      .aos_project_container {
        padding-bottom: 20px;
        padding-left: 0;
        padding-right: 0;
        padding-top: 5px;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_container {
          /*border-radius: 10px;*/
          padding-bottom: 20px;
          padding-left: 0;
          padding-right: 0;
          padding-top: 5px;
          width: 100%;
        }
      }

      /*ipad and below */
      .aos_project_description {
        font-size: 16px;
        width: 100%;
        font-weight: 300; /* match adsense */
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_description {
          font-size: 16px;
          font-weight: 300; /* match adsense */
        }
      }

      /*ipad and below */
      .aos_project_title {
        font-size: 20px;
        margin-bottom: 2px;
        font-weight: 400; /* match adsense */
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_title {
          font-size: 20px;
          margin-bottom: 2px;
          font-weight: 400; /* match adsense */
        }
      }

      .aos_project_title a :hover {
        text-decoration: none !important;
      }

      .aos_no_underline:hover {
        text-decoration: none !important;
      }

      .aos_grey_link:hover {
        color: #808080 !important;
      }

      .aos_grey_link {
        color: #808080 !important;
      }

      /*ipad and below */
      .category_topic_filter_container {
        width: 94%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .category_topic_filter_container {
          width: 94%;
        }
      }

      /*ipad and below */
      .aos_projects_container {
        font-family: helvetica, arial, sans-serif;
        margin-right: 2%;
        width: 96%; /* won't insert an ad this small (68%), but bigger and it overflows to the right with some topics that are long */
        font-size: 14px;
        margin-bottom: 5px;
        margin-left: 2%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_projects_container {
          font-family: helvetica, arial, sans-serif;
          margin-right: 0;
          width: 90%; /* was 53 before removing right margin spacer / ad container */
          font-size: 18px;
          margin-bottom: 5px;
          min-width: 800px;
          margin-left: 5%;
        }
      }

      /*ipad and below */
      .aos_pagenavigator_container {
        display: flex;
        justify-content: center;
        font-size: 9px;
        margin-bottom: 0;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pagenavigator_container {
          display: flex;
          justify-content: center;
          font-size: 16px;
          margin-bottom: 10px;
        }
      }

      /*ipad and below */
      .aos_header_title_container_ipad_and_smaller {
        font-size: 12px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 134px;
        white-space: nowrap;
        flex-direction: column;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_header_title_container_ipad_and_smaller {
          display: none;
        }
      }


      /*ipad and below */
      .aos_header_title_container_larger_than_ipad {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_header_title_container_larger_than_ipad {
          display: block;
        }
      }

      /*ipad and below */
      .aos_logo_image {
        height: 25px;
        width: 25px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_logo_image {
          height: 50px;
          width: 50px;
        }
      }

      /*ipad and below */
      .aos_fixed_footer_container {
        display: flex;
        margin-left: 0;
        margin-right: 0;
        margin-top: 2px;
        width: 100%;
        justify-content: center;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_fixed_footer_container {
          display: flex;
          margin-left: 5%;
          margin-right: 20%;
          margin-top: 5px;
          margin-bottom: 5px;
          width: 75%;
          justify-content: center;
        }
      }

      /*ipad and below */
      .aos_fixed_header_container {
        margin-left: 2%;
        margin-right: 2%;
        margin-top: 4px;
        margin-bottom: 2px;
        width: 96%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_fixed_header_container {
          margin-left: 5%;
          margin-right: 20%;
          margin-top: 5px;
          margin-bottom: 5px;
          width: 75%;
        }
      }

      /*ipad and below */
      body {
        margin-top: 0;
        margin-right: 0;
        margin-bottom: 0;
        margin-left: 0;
        padding: 0
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        body {
          margin-top: 0;
          margin-right: 0;
          margin-bottom: 0;
          margin-left: 0;
          padding: 0
        }
      }

      /* ipad and below */
      .aos_topics_sidebar_link {
        width: 100%;
        margin-bottom: 10px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 14px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topics_sidebar_link {
          width: 100%;
          margin-bottom: 10px;
          font-size: 18px;
        }
      }

      html {
        margin: 0;
        padding: 0
      }

      a {
        color: #000000;
        text-decoration: none;
      }

      a:visited {
        text-decoration: none;
      }

      a:hover {
        /*color: #0366d6;*/
        color: #000000; /* match adsense */
        text-decoration: underline;
      }

      .AOS_Pill:hover {
        text-decoration: none;
      }

      /* MIT licensed github-markdown.css */
      /* https://github.com/sindresorhus/github-markdown-css */
      @font-face {
        font-family: octicons-link;
        src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
      }
      .markdown-body {
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
        line-height: 1.5;
        color: #24292e;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-size: 16px;
        line-height: 1.5;
        word-wrap: break-word;
      }
      .markdown-body .pl-c {
        color: #6a737d;
      }
      .markdown-body .pl-c1,
      .markdown-body .pl-s .pl-v {
        color: #005cc5;
      }
      .markdown-body .pl-e,
      .markdown-body .pl-en {
        color: #6f42c1;
      }
      .markdown-body .pl-smi,
      .markdown-body .pl-s .pl-s1 {
        color: #24292e;
      }
      .markdown-body .pl-ent {
        color: #22863a;
      }
      .markdown-body .pl-k {
        color: #d73a49;
      }
      .markdown-body .pl-s,
      .markdown-body .pl-pds,
      .markdown-body .pl-s .pl-pse .pl-s1,
      .markdown-body .pl-sr,
      .markdown-body .pl-sr .pl-cce,
      .markdown-body .pl-sr .pl-sre,
      .markdown-body .pl-sr .pl-sra {
        color: #032f62;
      }
      .markdown-body .pl-v,
      .markdown-body .pl-smw {
        color: #e36209;
      }
      .markdown-body .pl-bu {
        color: #b31d28;
      }
      .markdown-body .pl-ii {
        color: #fafbfc;
        background-color: #b31d28;
      }
      .markdown-body .pl-c2 {
        color: #fafbfc;
        background-color: #d73a49;
      }
      .markdown-body .pl-c2::before {
        content: "^M";
      }
      .markdown-body .pl-sr .pl-cce {
        font-weight: bold;
        color: #22863a;
      }
      .markdown-body .pl-ml {
        color: #735c0f;
      }
      .markdown-body .pl-mh,
      .markdown-body .pl-mh .pl-en,
      .markdown-body .pl-ms {
        font-weight: bold;
        color: #005cc5;
      }
      .markdown-body .pl-mi {
        font-style: italic;
        color: #24292e;
      }
      .markdown-body .pl-mb {
        font-weight: bold;
        color: #24292e;
      }
      .markdown-body .pl-md {
        color: #b31d28;
        background-color: #ffeef0;
      }
      .markdown-body .pl-mi1 {
        color: #22863a;
        background-color: #f0fff4;
      }
      .markdown-body .pl-mc {
        color: #e36209;
        background-color: #ffebda;
      }
      .markdown-body .pl-mi2 {
        color: #f6f8fa;
        background-color: #005cc5;
      }
      .markdown-body .pl-mdr {
        font-weight: bold;
        color: #6f42c1;
      }
      .markdown-body .pl-ba {
        color: #586069;
      }
      .markdown-body .pl-sg {
        color: #959da5;
      }
      .markdown-body .pl-corl {
        text-decoration: underline;
        color: #032f62;
      }
      .markdown-body .octicon {
        display: inline-block;
        vertical-align: text-top;
        fill: currentColor;
      }
      .markdown-body a {
        background-color: transparent;
      }
      .markdown-body a:active,
      .markdown-body a:hover {
        outline-width: 0;
      }
      .markdown-body strong {
        font-weight: inherit;
      }
      .markdown-body strong {
        font-weight: bolder;
      }
      .markdown-body h1 {
        font-size: 2em;
        margin: 0.67em 0;
      }
      .markdown-body img {
        border-style: none;
      }
      .markdown-body code,
      .markdown-body kbd,
      .markdown-body pre {
        font-family: monospace, monospace;
        font-size: 1em;
      }
      .markdown-body hr {
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }
      .markdown-body input {
        font: inherit;
        margin: 0;
      }
      .markdown-body input {
        overflow: visible;
      }
      .markdown-body [type="checkbox"] {
        box-sizing: border-box;
        padding: 0;
      }
      .markdown-body * {
        box-sizing: border-box;
      }
      .markdown-body input {
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
      }
      .markdown-body a {
        color: #0366d6;
        text-decoration: none;
      }
      .markdown-body a:hover {
        text-decoration: underline;
      }
      .markdown-body strong {
        font-weight: 600;
      }
      .markdown-body hr {
        height: 0;
        margin: 15px 0;
        overflow: hidden;
        background: transparent;
        border: 0;
        border-bottom: 1px solid #dfe2e5;
      }
      .markdown-body hr::before {
        display: table;
        content: "";
      }
      .markdown-body hr::after {
        display: table;
        clear: both;
        content: "";
      }
      .markdown-body table {
        border-spacing: 0;
        border-collapse: collapse;
      }
      .markdown-body td,
      .markdown-body th {
        padding: 0;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body h1 {
        font-size: 32px;
        font-weight: 600;
      }
      .markdown-body h2 {
        font-size: 24px;
        font-weight: 600;
      }
      .markdown-body h3 {
        font-size: 20px;
        font-weight: 600;
      }
      .markdown-body h4 {
        font-size: 16px;
        font-weight: 600;
      }
      .markdown-body h5 {
        font-size: 14px;
        font-weight: 600;
      }
      .markdown-body h6 {
        font-size: 12px;
        font-weight: 600;
      }
      .markdown-body p {
        margin-top: 0;
        margin-bottom: 10px;
      }
      .markdown-body blockquote {
        margin: 0;
      }
      .markdown-body ul,
      .markdown-body ol {
        padding-left: 0;
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body ol ol,
      .markdown-body ul ol {
        list-style-type: lower-roman;
      }
      .markdown-body ul ul ol,
      .markdown-body ul ol ol,
      .markdown-body ol ul ol,
      .markdown-body ol ol ol {
        list-style-type: lower-alpha;
      }
      .markdown-body dd {
        margin-left: 0;
      }
      .markdown-body code {
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        font-size: 12px;
      }
      .markdown-body pre {
        margin-top: 0;
        margin-bottom: 0;
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        font-size: 12px;
      }
      .markdown-body .octicon {
        vertical-align: text-bottom;
      }
      .markdown-body .pl-0 {
        padding-left: 0 !important;
      }
      .markdown-body .pl-1 {
        padding-left: 4px !important;
      }
      .markdown-body .pl-2 {
        padding-left: 8px !important;
      }
      .markdown-body .pl-3 {
        padding-left: 16px !important;
      }
      .markdown-body .pl-4 {
        padding-left: 24px !important;
      }
      .markdown-body .pl-5 {
        padding-left: 32px !important;
      }
      .markdown-body .pl-6 {
        padding-left: 40px !important;
      }
      .markdown-body::before {
        display: table;
        content: "";
      }
      .markdown-body::after {
        display: table;
        clear: both;
        content: "";
      }
      .markdown-body>*:first-child {
        margin-top: 0 !important;
      }
      .markdown-body>*:last-child {
        margin-bottom: 0 !important;
      }
      .markdown-body a:not([href]) {
        color: inherit;
        text-decoration: none;
      }
      .markdown-body .anchor {
        float: left;
        padding-right: 4px;
        margin-left: -20px;
        line-height: 1;
      }
      .markdown-body .anchor:focus {
        outline: none;
      }
      .markdown-body p,
      .markdown-body blockquote,
      .markdown-body ul,
      .markdown-body ol,
      .markdown-body dl,
      .markdown-body table,
      .markdown-body pre {
        margin-top: 0;
        margin-bottom: 16px;
      }
      .markdown-body hr {
        height: 0.25em;
        padding: 0;
        margin: 24px 0;
        background-color: #e1e4e8;
        border: 0;
      }
      .markdown-body blockquote {
        padding: 0 1em;
        color: #6a737d;
        border-left: 0.25em solid #dfe2e5;
      }
      .markdown-body blockquote>:first-child {
        margin-top: 0;
      }
      .markdown-body blockquote>:last-child {
        margin-bottom: 0;
      }
      .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font-size: 11px;
        line-height: 10px;
        color: #444d56;
        vertical-align: middle;
        background-color: #fafbfc;
        border: solid 1px #c6cbd1;
        border-bottom-color: #959da5;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #959da5;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        margin-top: 24px;
        margin-bottom: 16px;
        font-weight: 600;
        line-height: 1.25;
      }
      .markdown-body h1 .octicon-link,
      .markdown-body h2 .octicon-link,
      .markdown-body h3 .octicon-link,
      .markdown-body h4 .octicon-link,
      .markdown-body h5 .octicon-link,
      .markdown-body h6 .octicon-link {
        color: #1b1f23;
        vertical-align: middle;
        visibility: hidden;
      }
      .markdown-body h1:hover .anchor,
      .markdown-body h2:hover .anchor,
      .markdown-body h3:hover .anchor,
      .markdown-body h4:hover .anchor,
      .markdown-body h5:hover .anchor,
      .markdown-body h6:hover .anchor {
        text-decoration: none;
      }
      .markdown-body h1:hover .anchor .octicon-link,
      .markdown-body h2:hover .anchor .octicon-link,
      .markdown-body h3:hover .anchor .octicon-link,
      .markdown-body h4:hover .anchor .octicon-link,
      .markdown-body h5:hover .anchor .octicon-link,
      .markdown-body h6:hover .anchor .octicon-link {
        visibility: visible;
      }
      .markdown-body h1 {
        padding-bottom: 0.3em;
        font-size: 2em;
        border-bottom: 1px solid #eaecef;
      }
      .markdown-body h2 {
        padding-bottom: 0.3em;
        font-size: 1.5em;
        border-bottom: 1px solid #eaecef;
      }
      .markdown-body h3 {
        font-size: 1.25em;
      }
      .markdown-body h4 {
        font-size: 1em;
      }
      .markdown-body h5 {
        font-size: 0.875em;
      }
      .markdown-body h6 {
        font-size: 0.85em;
        color: #6a737d;
      }
      .markdown-body ul,
      .markdown-body ol {
        padding-left: 2em;
      }
      .markdown-body ul ul,
      .markdown-body ul ol,
      .markdown-body ol ol,
      .markdown-body ol ul {
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body li {
        word-wrap: break-all;
      }
      .markdown-body li>p {
        margin-top: 16px;
      }
      .markdown-body li+li {
        margin-top: 0.25em;
      }
      .markdown-body dl {
        padding: 0;
      }
      .markdown-body dl dt {
        padding: 0;
        margin-top: 16px;
        font-size: 1em;
        font-style: italic;
        font-weight: 600;
      }
      .markdown-body dl dd {
        padding: 0 16px;
        margin-bottom: 16px;
      }
      .markdown-body table {
        display: block;
        width: 100%;
        overflow: auto;
      }
      .markdown-body table th {
        font-weight: 600;
      }
      .markdown-body table th,
      .markdown-body table td {
        padding: 6px 13px;
        border: 1px solid #dfe2e5;
      }
      .markdown-body table tr {
        background-color: #fff;
        border-top: 1px solid #c6cbd1;
      }
      .markdown-body table tr:nth-child(2n) {
        background-color: #f6f8fa;
      }
      .markdown-body img {
        max-width: 100%;
        box-sizing: content-box;
        background-color: #fff;
      }
      .markdown-body img[align=right] {
        padding-left: 20px;
      }
      .markdown-body img[align=left] {
        padding-right: 20px;
      }
      .markdown-body code {
        padding: 0.2em 0.4em;
        margin: 0;
        font-size: 85%;
        background-color: rgba(27,31,35,0.05);
        border-radius: 3px;
      }
      .markdown-body pre {
        word-wrap: normal;
      }
      .markdown-body pre>code {
        padding: 0;
        margin: 0;
        font-size: 100%;
        word-break: normal;
        white-space: pre;
        background: transparent;
        border: 0;
      }
      .markdown-body .highlight {
        margin-bottom: 16px;
      }
      .markdown-body .highlight pre {
        margin-bottom: 0;
        word-break: normal;
      }
      .markdown-body .highlight pre,
      .markdown-body pre {
        padding: 16px;
        overflow: auto;
        font-size: 85%;
        line-height: 1.45;
        background-color: #f6f8fa;
        border-radius: 3px;
      }
      .markdown-body pre code {
        display: inline;
        max-width: auto;
        padding: 0;
        margin: 0;
        overflow: visible;
        line-height: inherit;
        word-wrap: normal;
        background-color: transparent;
        border: 0;
      }
      .markdown-body .full-commit .btn-outline:not(:disabled):hover {
        color: #005cc5;
        border-color: #005cc5;
      }
      .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font: 11px "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        line-height: 10px;
        color: #444d56;
        vertical-align: middle;
        background-color: #fafbfc;
        border: solid 1px #d1d5da;
        border-bottom-color: #c6cbd1;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #c6cbd1;
      }
      .markdown-body :checked+.radio-label {
        position: relative;
        z-index: 1;
        border-color: #0366d6;
      }
      .markdown-body .task-list-item {
        list-style-type: none;
      }
      .markdown-body .task-list-item+.task-list-item {
        margin-top: 3px;
      }
      .markdown-body .task-list-item input {
        margin: 0 0.2em 0.25em -1.6em;
        vertical-align: middle;
      }
      .markdown-body hr {
        border-bottom-color: #eee;
      }
      /* github-markdown.css overrides */
      .markdown-body h2 {
        margin-bottom: 0;
        margin-top: 0;
      }

      .hll { background-color: #ffffcc }
      .c { color: #008000 } /* Comment */
      .err { border: 1px solid #FF0000 } /* Error */
      .k { color: #0000ff } /* Keyword */
      .cm { color: #008000 } /* Comment.Multiline */
      .cp { color: #0000ff } /* Comment.Preproc */
      .c1 { color: #008000 } /* Comment.Single */
      .cs { color: #008000 } /* Comment.Special */
      .ge { font-style: italic } /* Generic.Emph */
      .gh { font-weight: bold } /* Generic.Heading */
      .gp { font-weight: bold } /* Generic.Prompt */
      .gs { font-weight: bold } /* Generic.Strong */
      .gu { font-weight: bold } /* Generic.Subheading */
      .kc { color: #0000ff } /* Keyword.Constant */
      .kd { color: #0000ff } /* Keyword.Declaration */
      .kn { color: #0000ff } /* Keyword.Namespace */
      .kp { color: #0000ff } /* Keyword.Pseudo */
      .kr { color: #0000ff } /* Keyword.Reserved */
      .kt { color: #2b91af } /* Keyword.Type */
      .s { color: #a31515 } /* Literal.String */
      .nc { color: #2b91af } /* Name.Class */
      .ow { color: #0000ff } /* Operator.Word */
      .sb { color: #a31515 } /* Literal.String.Backtick */
      .sc { color: #a31515 } /* Literal.String.Char */
      .sd { color: #a31515 } /* Literal.String.Doc */
      .s2 { color: #a31515 } /* Literal.String.Double */
      .se { color: #a31515 } /* Literal.String.Escape */
      .sh { color: #a31515 } /* Literal.String.Heredoc */
      .si { color: #a31515 } /* Literal.String.Interpol */
      .sx { color: #a31515 } /* Literal.String.Other */
      .sr { color: #a31515 } /* Literal.String.Regex */
      .s1 { color: #a31515 } /* Literal.String.Single */
      .ss { color: #a31515 } /* Literal.String.Symbol */

    </style>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Product",
  "name": "goldbergyoni/javascript-testing-best-practices",
  "description": "📗🌐 🚢 Comprehensive and exhaustive JavaScript & Node.js testing best practices (January 2021)",
  "url": "https://awesomeopensource.com/project/goldbergyoni/javascript-testing-best-practices",
  "sku": "project/goldbergyoni/javascript-testing-best-practices",
  "mpn": "project/goldbergyoni/javascript-testing-best-practices",
  "image": "https://github.com/goldbergyoni.png",
  "brand": {
    "@type": "Brand",
    "name": "goldbergyoni/javascript-testing-best-practices",
    "logo": "https://github.com/goldbergyoni.png"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.94",
    "ratingCount": "10455"
  }
}
</script>


    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="C4zfDe1YL8ymw7mwS7KVakJqfh3FR4frHWToItaA3sqkGX6rap4xiqphrZwLgmw+fce2U/IHkXLmoWdQ6XrcAg==" />
  <script async src='/cdn-cgi/bm/cv/669835187/api.js'></script></head>

  <body>
    <script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","rorVersion":"11.2.1","rorPro":false,"href":"http://awesomeopensource.com/project/goldbergyoni/javascript-testing-best-practices","location":"/project/goldbergyoni/javascript-testing-best-practices","scheme":"http","host":"awesomeopensource.com","port":null,"pathname":"/project/goldbergyoni/javascript-testing-best-practices","search":null,"httpAcceptLanguage":null,"serverSide":false}</script>
<div id="Root-react-component-085a3912-c9e3-4bb5-9490-bbccae8118e0"><div style="font-family:helvetica, arial, sans-serif" data-reactroot=""><div class="aos_fixed_header_container"><div class="display_flex margin_bottom_15"><div style="margin-right:1%;display:flex;align-items:center"><a href="https://awesomeopensource.com" title="Awesome Open Source Home" rel="canonical"><img src="https://awesomeopensource.com/awesome.gif" class="aos_logo_image"/></a></div><div class="aos_header_title_container_larger_than_ipad"><div style="white-space:nowrap;font-size:24px;font-weight:bold;display:flex;flex-direction:row;align-items:center;height:100%"><div>Awesome Open Source</div></div></div><div class="aos_header_title_container_ipad_and_smaller"><div>Awesome Open Source</div></div><div style="display:flex;flex-wrap:wrap"></div></div><div></div></div><div class="aos_project_screen_container"><div class="aos_project_inner_screen_container"><div class="aos_project_metadata"><div class="aos_project_metadata_title">Javascript <!-- -->Testing <!-- -->Best <!-- -->Practices</div><div class="aos_project_metadata_description">📗🌐 🚢 Comprehensive and exhaustive JavaScript &amp; Node.js testing best practices (January 2021)</div><div class="aos_project_metadata_header">Stars</div><span class="aos_project_metadata_content">10,455</span><div class="project_page_ad_slot_1"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-gv-v+1t-u+27" data-ad-client="ca-pub-1878397330895234" data-ad-slot="5649017589"></ins></div><div class="aos_project_metadata_header aos_license_text_metadata">License</div><span class="aos_project_metadata_content">mit</span><span><div class="aos_project_metadata_header"><a href="https://testjavascript.com/" target="_blank" class="aos_grey_link" rel="nofollow">Homepage</a></div> <span class="aos_project_metadata_content"><a href="https://testjavascript.com/" target="_blank">https://testjavascript.com/</a></span></span><div class="aos_project_metadata_header"><a href="https://github.com/goldbergyoni/javascript-testing-best-practices" target="_blank" class="aos_grey_link" rel="nofollow">Repository</a></div><span class="aos_project_metadata_content"><a href="https://github.com/goldbergyoni/javascript-testing-best-practices" target="_blank">https://github.com/goldbergyoni/javascript-testing-best-practices</a></span><div class="aos_project_metadata_header"><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/issues" target="_blank" class="aos_grey_link" rel="nofollow">Open Issues</a></div><span class="aos_project_metadata_content"><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/issues" target="_blank">20</a></span><div class="aos_project_metadata_header">Most Recent Commit</div><span class="aos_project_metadata_content">15 days ago</span><div class="aos_project_metadata_header">Related Projects</div><span class="aos_project_metadata_content"><a href="https://awesomeopensource.com/projects/javascript"><div style="display:block;text-decoration:none;padding-bottom:10px">javascript<span> (<!-- -->67,310<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/react"><div style="display:block;text-decoration:none;padding-bottom:10px">react<span> (<!-- -->5,029<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/nodejs"><div style="display:block;text-decoration:none;padding-bottom:10px">nodejs<span> (<!-- -->3,563<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/angular"><div style="display:block;text-decoration:none;padding-bottom:10px">angular<span> (<!-- -->1,234<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/testing"><div style="display:block;text-decoration:none;padding-bottom:10px">testing<span> (<!-- -->909<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/express"><div style="display:block;text-decoration:none;padding-bottom:10px">express<span> (<!-- -->463<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/jest"><div style="display:block;text-decoration:none;padding-bottom:10px">jest<span> (<!-- -->260<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/ci"><div style="display:block;text-decoration:none;padding-bottom:10px">ci<span> (<!-- -->222<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/test"><div style="display:block;text-decoration:none;padding-bottom:10px">test<span> (<!-- -->196<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/mocha"><div style="display:block;text-decoration:none;padding-bottom:10px">mocha<span> (<!-- -->90<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/integration-testing"><div style="display:block;text-decoration:none;padding-bottom:10px">integration-testing<span> (<!-- -->60<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/cicd"><div style="display:block;text-decoration:none;padding-bottom:10px">cicd<span> (<!-- -->54<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/unittest"><div style="display:block;text-decoration:none;padding-bottom:10px">unittest<span> (<!-- -->43<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/e2e-tests"><div style="display:block;text-decoration:none;padding-bottom:10px">e2e-tests<span> (<!-- -->34<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/chai"><div style="display:block;text-decoration:none;padding-bottom:10px">chai<span> (<!-- -->25<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/mutation-testing"><div style="display:block;text-decoration:none;padding-bottom:10px">mutation-testing<span> (<!-- -->21<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/e2e"><div style="display:block;text-decoration:none;padding-bottom:10px">e2e<span> (<!-- -->20<!-- -->)</span></div></a></span></div><div class="markdown-body"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/jtbp-header-blue.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/jtbp-header-blue.png" width="1920px" style="max-width:100%;"></a>
<br>
<h1>
<a id="-why-this-guide-can-take-your-testing-skills-to-the-next-level" class="anchor" href="#-why-this-guide-can-take-your-testing-skills-to-the-next-level" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👇 Why this guide can take your testing skills to the next level</h1>
<br>
<h2>
<a id="-45-best-practices-super-comprehensive-and-exhaustive" class="anchor" href="#-45-best-practices-super-comprehensive-and-exhaustive" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>📗 45+ best practices: Super-comprehensive and exhaustive</h2>
<p>This is a guide for JavaScript &amp; Node.js reliability from A-Z. It summarizes and curates for you dozens of the best blog posts, books and tools the market has to offer</p>
<h2>
<a id="-advanced-goes-10000-miles-beyond-the-basics" class="anchor" href="#-advanced-goes-10000-miles-beyond-the-basics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>🚢 Advanced: Goes 10,000 miles beyond the basics</h2>
<p>Hop into a journey that travels way beyond the basics into advanced topics like testing in production, mutation testing, property-based testing and many other strategic &amp; professional tools. Should you read every word in this guide your testing skills are likely to go way above the average</p>
<h2>
<a id="-full-stack-front-backend-ci-anything" class="anchor" href="#-full-stack-front-backend-ci-anything" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>🌐 Full-stack: front, backend, CI, anything</h2>
<p>Start by understanding the ubiquitous testing practices that are the foundation for any application tier. Then, delve into your area of choice: frontend/UI, backend, CI or maybe all of them?</p>
<br>
<h3>
<a id="written-by-yoni-goldberg" class="anchor" href="#written-by-yoni-goldberg" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Written By Yoni Goldberg</h3>
<ul>
<li>A JavaScript &amp; Node.js consultant</li>
<li>📗 <a href="https://www.testjavascript.com" rel="nofollow">Testing Node.js &amp; JavaScript From A To Z</a> - My comprehensive online course with more than <a href="https://www.testjavascript.com" rel="nofollow">10 hours of video</a>, 14 test types and more than 40 best practices</li>
<li><a href="https://twitter.com/goldbergyoni/" rel="nofollow">Follow me on Twitter </a></li>
</ul>
<br>
<h3>
<a id="translations---read-in-your-own-language" class="anchor" href="#translations---read-in-your-own-language" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Translations - read in your own language</h3>
<ul>
<li>🇨🇳<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-zh-CN.md" rel="nofollow">Chinese</a> - Courtesy of <a href="https://github.com/yvesyao" rel="nofollow">Yves yao</a>
</li>
<li>🇰🇷<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme.kr.md" rel="nofollow">Korean</a> - Courtesy of <a href="https://github.com/ragubyun" rel="nofollow">Rain Byun</a>
</li>
<li>🇵🇱<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-pl.md" rel="nofollow">Polish</a> - Courtesy of <a href="https://github.com/mbiesiad" rel="nofollow">Michal Biesiada</a>
</li>
<li>🇪🇸<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-es.md" rel="nofollow">Spanish</a> - Courtesy of <a href="https://github.com/sanguino" rel="nofollow">Miguel G. Sanguino</a>
</li>
<li>🇧🇷<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-pt-br.md" rel="nofollow">Portuguese-BR</a> - Courtesy of <a href="https://github.com/iagocavalcante" rel="nofollow">Iago Angelim Costa Cavalcante</a> , <a href="https://github.com/DouglasMV" rel="nofollow">Douglas Mariano Valero</a> and <a href="https://github.com/koooge" rel="nofollow">koooge</a>
</li>
<li>Want to translate to your own language? please open an issue 💜</li>
</ul>
<p><br><br></p>
<h2>
<a id="table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Table of Contents</code>
</h2>
<h4>
<a id="section-0-the-golden-rule" class="anchor" href="#section-0-the-golden-rule" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#section-0%EF%B8%8F%E2%83%A3-the-golden-rule"><code>Section 0: The Golden Rule</code></a>
</h4>
<p>A single advice that inspires all the others (1 special bullet)</p>
<h4>
<a id="section-1-the-test-anatomy" class="anchor" href="#section-1-the-test-anatomy" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#section-1-the-test-anatomy-1"><code>Section 1: The Test Anatomy</code></a>
</h4>
<p>The foundation - structuring clean tests (12 bullets)</p>
<h4>
<a id="section-2-backend" class="anchor" href="#section-2-backend" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#section-2%EF%B8%8F%E2%83%A3-backend-testing"><code>Section 2: Backend</code></a>
</h4>
<p>Writing backend and Microservices tests efficiently (8 bullets)</p>
<h4>
<a id="section-3-frontend" class="anchor" href="#section-3-frontend" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#section-3%EF%B8%8F%E2%83%A3-frontend-testing"><code>Section 3: Frontend</code></a>
</h4>
<p>Writing tests for web UI including component and E2E tests (11 bullets)</p>
<h4>
<a id="section-4-measuring-tests-effectiveness" class="anchor" href="#section-4-measuring-tests-effectiveness" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#section-4%EF%B8%8F%E2%83%A3-measuring-test-effectiveness"><code>Section 4: Measuring Tests Effectiveness</code></a>
</h4>
<p>Watching the watchman - measuring test quality (4 bullets)</p>
<h4>
<a id="section-5-continuous-integration" class="anchor" href="#section-5-continuous-integration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="#section-5%EF%B8%8F%E2%83%A3-ci-and-other-quality-measures"><code>Section 5: Continuous Integration</code></a>
</h4>
<p>Guidelines for CI in the JS world (9 bullets)</p>
<p><br><br></p>
<h1>
<a id="section-0️⃣-the-golden-rule" class="anchor" href="#section-0%EF%B8%8F%E2%83%A3-the-golden-rule" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Section 0️⃣: The Golden Rule</h1>
<br>
<h2>
<a id="️-0-the-golden-rule-design-for-lean-testing" class="anchor" href="#%EF%B8%8F-0-the-golden-rule-design-for-lean-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪️ 0 The Golden Rule: Design for lean testing</h2>
<p>✅ <strong>Do:</strong>
Testing code is not like production-code - design it to be dead-simple, short, abstraction-free, flat, delightful to work with, lean. One should look at a test and get the intent instantly.</p>
<p>Our minds are full with the main production code, we don't have 'headspace' for additional complexity. Should we try to squeeze yet another challenging code into our poor brain it will slow the team down which works against the reason we do testing. Practically this is where many teams just abandon testing.</p>
<p>The tests are an opportunity for something else - a friendly and smiley assistant, one that it's delightful to work with and delivers great value for such a small investment. Science tells us that we have two brain systems: system 1 is used for effortless activities like driving a car on an empty road and system 2 which is meant for complex and conscious operations like solving a math equation. Design your test for system 1, when looking at test code it should <em>feel</em> as easy as modifying an HTML document and not like solving 2X(17 × 24).</p>
<p>This can be achieved by selectively cherry-picking techniques, tools and test targets that are cost-effective and provide great ROI. Test only as much as needed, strive to keep it nimble, sometimes it's even worth dropping some tests and trade reliability for agility and simplicity.</p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/headspace.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/headspace.png" alt="alt text" title="We have no head room for additional complexity" style="max-width:100%;"></a></p>
<p>Most of the advice below are derivatives of this principle.</p>
<h3>
<a id="ready-to-start" class="anchor" href="#ready-to-start" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ready to start?</h3>
<p><br><br></p>
<h1>
<a id="section-1-the-test-anatomy-1" class="anchor" href="#section-1-the-test-anatomy-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Section 1: The Test Anatomy</h1>
<br>
<h2>
<a id="-️-11-include-3-parts-in-each-test-name" class="anchor" href="#-%EF%B8%8F-11-include-3-parts-in-each-test-name" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.1 Include 3 parts in each test name</h2>
<p>✅ <strong>Do:</strong> A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:</p>
<p>(1) What is being tested? For example, the ProductsService.addNewProduct method</p>
<p>(2) Under what circumstances and scenario? For example, no price is passed to the method</p>
<p>(3) What is the expected result? For example, the new product is not approved</p>
<br>
<p>❌ <strong>Otherwise:</strong> A deployment just failed, a test named “Add product” failed. Does this tell you what exactly is malfunctioning?</p>
<br>
<p><strong>👇 Note:</strong> Each bullet has code examples and sometime also an image illustration. Click to expand
<br></p>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-a-test-name-that-constitutes-3-parts" class="anchor" href="#clap-doing-it-right-example-a-test-name-that-constitutes-3-parts" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: A test name that constitutes 3 parts</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Mocha-blue.svg" alt="" title="Using Mocha to illustrate the idea" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">//1. unit under test</span>
<span class="nx">describe</span><span class="p">(</span><span class="s1">'Products Service'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s1">'Add new product'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//2. scenario and 3. expectation</span>
    <span class="nx">it</span><span class="p">(</span><span class="s1">'When no price is specified, then the product status is pending approval'</span><span class="p">,</span> <span class="p">()</span><span class="o">=&gt;</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">newProduct</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ProductService</span><span class="p">().</span><span class="nx">add</span><span class="p">(...);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">newProduct</span><span class="p">.</span><span class="nx">status</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s1">'pendingApproval'</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>

</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-a-test-name-that-constitutes-3-parts-1" class="anchor" href="#clap-doing-it-right-example-a-test-name-that-constitutes-3-parts-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: A test name that constitutes 3 parts</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-1-3-parts.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-1-3-parts.jpeg" alt="alt text" title="A test name that constitutes 3 parts" style="max-width:100%;"></a></p>
</details>
<br>
<details><summary>© <b>Credits &amp; read-more</b></summary>
  1. <a href="https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html" rel="nofollow">Roy Osherove - Naming standards for unit tests</a>
</details>
<p><br><br></p>
<h2>
<a id="-️-12-structure-tests-by-the-aaa-pattern" class="anchor" href="#-%EF%B8%8F-12-structure-tests-by-the-aaa-pattern" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.2 Structure tests by the AAA pattern</h2>
<p>✅ <strong>Do:</strong> Structure your tests with 3 well-separated sections Arrange, Act &amp; Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:</p>
<p>1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects and any other preparation code</p>
<p>2nd A - Act: Execute the unit under test. Usually 1 line of code</p>
<p>3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code</p>
<br>
<p>❌ <strong>Otherwise:</strong> Not only do you spend hours understanding the main code, but what should have been the simplest part of the day (testing) stretches your brain</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-a-test-structured-with-the-aaa-pattern" class="anchor" href="#clap-doing-it-right-example-a-test-structured-with-the-aaa-pattern" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: A test structured with the AAA pattern</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a> <a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">describe</span><span class="p">(</span><span class="s2">"Customer classifier"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">test</span><span class="p">(</span><span class="s2">"When customer spent more than 500$, should be classified as premium"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">//Arrange</span>
    <span class="kd">const</span> <span class="nx">customerToClassify</span> <span class="o">=</span> <span class="p">{</span> <span class="na">spent</span><span class="p">:</span> <span class="mi">505</span><span class="p">,</span> <span class="na">joined</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">};</span>
    <span class="kd">const</span> <span class="nx">DBStub</span> <span class="o">=</span> <span class="nx">sinon</span><span class="p">.</span><span class="nx">stub</span><span class="p">(</span><span class="nx">dataAccess</span><span class="p">,</span> <span class="s2">"getCustomer"</span><span class="p">).</span><span class="nx">reply</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">classification</span><span class="p">:</span> <span class="s2">"regular"</span> <span class="p">});</span>

    <span class="c1">//Act</span>
    <span class="kd">const</span> <span class="nx">receivedClassification</span> <span class="o">=</span> <span class="nx">customerClassifier</span><span class="p">.</span><span class="nx">classifyCustomer</span><span class="p">(</span><span class="nx">customerToClassify</span><span class="p">);</span>

    <span class="c1">//Assert</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">receivedClassification</span><span class="p">).</span><span class="nx">toMatch</span><span class="p">(</span><span class="s2">"premium"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-no-separation-one-bulk-harder-to-interpret" class="anchor" href="#thumbsdown-anti-pattern-example-no-separation-one-bulk-harder-to-interpret" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: No separation, one bulk, harder to interpret</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"Should be classified as premium"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">customerToClassify</span> <span class="o">=</span> <span class="p">{</span> <span class="na">spent</span><span class="p">:</span> <span class="mi">505</span><span class="p">,</span> <span class="na">joined</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(),</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span> <span class="p">};</span>
  <span class="kd">const</span> <span class="nx">DBStub</span> <span class="o">=</span> <span class="nx">sinon</span><span class="p">.</span><span class="nx">stub</span><span class="p">(</span><span class="nx">dataAccess</span><span class="p">,</span> <span class="s2">"getCustomer"</span><span class="p">).</span><span class="nx">reply</span><span class="p">({</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">classification</span><span class="p">:</span> <span class="s2">"regular"</span> <span class="p">});</span>
  <span class="kd">const</span> <span class="nx">receivedClassification</span> <span class="o">=</span> <span class="nx">customerClassifier</span><span class="p">.</span><span class="nx">classifyCustomer</span><span class="p">(</span><span class="nx">customerToClassify</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">receivedClassification</span><span class="p">).</span><span class="nx">toMatch</span><span class="p">(</span><span class="s2">"premium"</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️13-describe-expectations-in-a-product-language-use-bdd-style-assertions" class="anchor" href="#-%EF%B8%8F13-describe-expectations-in-a-product-language-use-bdd-style-assertions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️1.3 Describe expectations in a product language: use BDD-style assertions</h2>
<p>✅ <strong>Do:</strong> Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using <code>expect</code> or <code>should</code> and not using custom code. If Chai &amp; Jest doesn't include the desired assertion and it’s highly repeatable, consider <a href="https://jestjs.io/docs/en/expect#expectextendmatchers" rel="nofollow">extending Jest matcher (Jest)</a> or writing a <a href="https://www.chaijs.com/guide/plugins/" rel="nofollow">custom Chai plugin</a>
<br></p>
<p>❌ <strong>Otherwise:</strong> The team will write less tests and decorate the annoying ones with .skip()</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary><br>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha &amp; Chai" style="max-width:100%;"></a> <a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<h3>
<a id="thumbsdown-anti-pattern-example-the-reader-must-skim-through-not-so-short-and-imperative-code-just-to-get-the-test-story" class="anchor" href="#thumbsdown-anti-pattern-example-the-reader-must-skim-through-not-so-short-and-imperative-code-just-to-get-the-test-story" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: The reader must skim through not so short, and imperative code just to get the test story</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"When asking for an admin, ensure only ordered admins in results"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//assuming we've added here two admins "admin1", "admin2" and "user1"</span>
  <span class="kd">const</span> <span class="nx">allAdmins</span> <span class="o">=</span> <span class="nx">getUsers</span><span class="p">({</span> <span class="na">adminOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>

  <span class="kd">let</span> <span class="nx">admin1Found</span><span class="p">,</span>
    <span class="nx">adming2Found</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

  <span class="nx">allAdmins</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">aSingleUser</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">aSingleUser</span> <span class="o">===</span> <span class="s2">"user1"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">assert</span><span class="p">.</span><span class="nx">notEqual</span><span class="p">(</span><span class="nx">aSingleUser</span><span class="p">,</span> <span class="s2">"user1"</span><span class="p">,</span> <span class="s2">"A user was found and not admin"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">aSingleUser</span> <span class="o">===</span> <span class="s2">"admin1"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">admin1Found</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">aSingleUser</span> <span class="o">===</span> <span class="s2">"admin2"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">admin2Found</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">admin1Found</span> <span class="o">||</span> <span class="o">!</span><span class="nx">admin2Found</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">"Not all admins were returned"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-skimming-through-the-following-declarative-test-is-a-breeze" class="anchor" href="#clap-doing-it-right-example-skimming-through-the-following-declarative-test-is-a-breeze" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Skimming through the following declarative test is a breeze</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When asking for an admin, ensure only ordered admins in results"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//assuming we've added here two admins</span>
  <span class="kd">const</span> <span class="nx">allAdmins</span> <span class="o">=</span> <span class="nx">getUsers</span><span class="p">({</span> <span class="na">adminOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>

  <span class="nx">expect</span><span class="p">(</span><span class="nx">allAdmins</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">include</span><span class="p">.</span><span class="nx">ordered</span><span class="p">.</span><span class="nx">members</span><span class="p">([</span><span class="s2">"admin1"</span><span class="p">,</span> <span class="s2">"admin2"</span><span class="p">])</span>
    <span class="p">.</span><span class="nx">but</span><span class="p">.</span><span class="nx">not</span><span class="p">.</span><span class="nx">include</span><span class="p">.</span><span class="nx">ordered</span><span class="p">.</span><span class="nx">members</span><span class="p">([</span><span class="s2">"user1"</span><span class="p">]);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-14-stick-to-black-box-testing-test-only-public-methods" class="anchor" href="#-%EF%B8%8F-14-stick-to-black-box-testing-test-only-public-methods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.4 Stick to black-box testing: Test only public methods</h2>
<p>✅ <strong>Do:</strong> Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as <code>behavioral testing</code>. On the other side, should you test the internals (white box approach) — your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden
<br></p>
<p>❌ <strong>Otherwise:</strong> Your tests behave like the <a href="https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf" rel="nofollow">boy who cried wolf</a>: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored…</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-a-test-case-is-testing-the-internals-for-no-good-reason" class="anchor" href="#thumbsdown-anti-pattern-example-a-test-case-is-testing-the-internals-for-no-good-reason" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: A test case is testing the internals for no good reason</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha &amp; Chai" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="kd">class</span> <span class="nx">ProductService</span> <span class="p">{</span>
  <span class="c1">//this method is only used internally</span>
  <span class="c1">//Change this name will make the tests fail</span>
  <span class="nx">calculateVATAdd</span><span class="p">(</span><span class="nx">priceWithoutVAT</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span> <span class="na">finalPrice</span><span class="p">:</span> <span class="nx">priceWithoutVAT</span> <span class="o">*</span> <span class="mf">1.2</span> <span class="p">};</span>
    <span class="c1">//Change the result format or key name above will make the tests fail</span>
  <span class="p">}</span>
  <span class="c1">//public method</span>
  <span class="nx">getPrice</span><span class="p">(</span><span class="nx">productId</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">desiredProduct</span> <span class="o">=</span> <span class="nx">DB</span><span class="p">.</span><span class="nx">getProduct</span><span class="p">(</span><span class="nx">productId</span><span class="p">);</span>
    <span class="nx">finalPrice</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">calculateVATAdd</span><span class="p">(</span><span class="nx">desiredProduct</span><span class="p">.</span><span class="nx">price</span><span class="p">).</span><span class="nx">finalPrice</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">finalPrice</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">it</span><span class="p">(</span><span class="s2">"White-box test: When the internal methods get 0 vat, it return 0 response"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//There's no requirement to allow users to calculate the VAT, only show the final price. Nevertheless we falsely insist here to test the class internals</span>
  <span class="nx">expect</span><span class="p">(</span><span class="k">new</span> <span class="nx">ProductService</span><span class="p">().</span><span class="nx">calculateVATAdd</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">finalPrice</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-️15-choose-the-right-test-doubles-avoid-mocks-in-favor-of-stubs-and-spies" class="anchor" href="#-%EF%B8%8F-%EF%B8%8F15-choose-the-right-test-doubles-avoid-mocks-in-favor-of-stubs-and-spies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ ️1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies</h2>
<p>✅ <strong>Do:</strong> Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (<a href="https://martinfowler.com/articles/mocksArentStubs.html" rel="nofollow" target="_blank"></a><a href="https://martinfowler.com/articles/mocksArentStubs.html" rel="nofollow">Read here a reminder about test doubles: mocks vs stubs vs spies</a>).</p>
<p>Before using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If no, it’s a white-box testing smell.</p>
<p>For example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some ‘No Response’ return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down — this is again a behavioral check which is likely to appear in a requirements doc (“Send an email if payment couldn’t be saved”). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types — then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently
<br></p>
<p>❌ <strong>Otherwise:</strong> Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-mocks-focus-on-the-internals" class="anchor" href="#thumbsdown-anti-pattern-example-mocks-focus-on-the-internals" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-pattern example: Mocks focus on the internals</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Sinon-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Sinon-blue.svg" alt="" title="Examples with Sinon" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When a valid product is about to be deleted, ensure data access DAL was called once, with the right product and right config"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//Assume we already added a product</span>
  <span class="kd">const</span> <span class="nx">dataAccessMock</span> <span class="o">=</span> <span class="nx">sinon</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="nx">DAL</span><span class="p">);</span>
  <span class="c1">//hmmm BAD: testing the internals is actually our main goal here, not just a side-effect</span>
  <span class="nx">dataAccessMock</span>
    <span class="p">.</span><span class="nx">expects</span><span class="p">(</span><span class="s2">"deleteProduct"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">once</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">withArgs</span><span class="p">(</span><span class="nx">DBConfig</span><span class="p">,</span> <span class="nx">theProductWeJustAdded</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="k">new</span> <span class="nx">ProductService</span><span class="p">().</span><span class="nx">deletePrice</span><span class="p">(</span><span class="nx">theProductWeJustAdded</span><span class="p">);</span>
  <span class="nx">dataAccessMock</span><span class="p">.</span><span class="nx">verify</span><span class="p">();</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="clapdoing-it-right-example-spies-are-focused-on-testing-the-requirements-but-as-a-side-effect-are-unavoidably-touching-to-the-internals" class="anchor" href="#clapdoing-it-right-example-spies-are-focused-on-testing-the-requirements-but-as-a-side-effect-are-unavoidably-touching-to-the-internals" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏Doing It Right Example: spies are focused on testing the requirements but as a side-effect are unavoidably touching to the internals</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When a valid product is about to be deleted, ensure an email is sent"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//Assume we already added here a product</span>
  <span class="kd">const</span> <span class="nx">spy</span> <span class="o">=</span> <span class="nx">sinon</span><span class="p">.</span><span class="nx">spy</span><span class="p">(</span><span class="nx">Emailer</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">"sendEmail"</span><span class="p">);</span>
  <span class="k">new</span> <span class="nx">ProductService</span><span class="p">().</span><span class="nx">deletePrice</span><span class="p">(</span><span class="nx">theProductWeJustAdded</span><span class="p">);</span>
  <span class="c1">//hmmm OK: we deal with internals? Yes, but as a side effect of testing the requirements (sending an email)</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">spy</span><span class="p">.</span><span class="nx">calledOnce</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-want-to-learn-all-these-practices-with-live-video" class="anchor" href="#-want-to-learn-all-these-practices-with-live-video" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>📗 Want to learn all these practices with live video?</h2>
<h3>
<a id="visit-my-online-course-testing-nodejs--javascript-from-a-to-z" class="anchor" href="#visit-my-online-course-testing-nodejs--javascript-from-a-to-z" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Visit my online course <a href="https://www.testjavascript.com" rel="nofollow">Testing Node.js &amp; JavaScript From A To Z</a>
</h3>
<p><br><br></p>
<h2>
<a id="-️16-dont-foo-use-realistic-input-data" class="anchor" href="#-%EF%B8%8F16-dont-foo-use-realistic-input-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️1.6 Don’t “foo”, use realistic input data</h2>
<p>✅ <strong>Do:</strong> Often production bugs are revealed under some very specific and surprising input — the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like <a href="https://www.npmjs.com/package/faker" rel="nofollow">Faker</a> to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit card, company names, and even ‘lorem ipsum’ text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).
<br></p>
<p>❌ <strong>Otherwise:</strong> All your development testing will falsely show green when you use synthetic inputs like “Foo”, but then production might turn red when a hacker passes-in a nasty string like “<a href="https://github.com/3e2ddsf" class="user-mention" rel="nofollow">@3e2ddsf</a> . ##’ 1 fdsfds . fds432 AAAA”</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-a-test-suite-that-passes-due-to-non-realistic-data" class="anchor" href="#thumbsdown-anti-pattern-example-a-test-suite-that-passes-due-to-non-realistic-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: A test suite that passes due to non-realistic data</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="kd">const</span> <span class="nx">addProduct</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">price</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">productNameRegexNoSpace</span> <span class="o">=</span> <span class="sr">/^</span><span class="se">\S</span><span class="sr">*$/</span><span class="p">;</span> <span class="c1">//no white-space allowed</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">productNameRegexNoSpace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">name</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> <span class="c1">//this path never reached due to dull input</span>

  <span class="c1">//some logic here</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">test</span><span class="p">(</span><span class="s2">"Wrong: When adding new product with valid properties, get successful confirmation"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//The string "Foo" which is used in all tests never triggers a false result</span>
  <span class="kd">const</span> <span class="nx">addProductResult</span> <span class="o">=</span> <span class="nx">addProduct</span><span class="p">(</span><span class="s2">"Foo"</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">addProductResult</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="c1">//Positive-false: the operation succeeded because we never tried with long</span>
  <span class="c1">//product name including spaces</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="clapdoing-it-right-example-randomizing-realistic-input" class="anchor" href="#clapdoing-it-right-example-randomizing-realistic-input" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏Doing It Right Example: Randomizing realistic input</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"Better: When adding new valid product, get successful confirmation"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">addProductResult</span> <span class="o">=</span> <span class="nx">addProduct</span><span class="p">(</span><span class="nx">faker</span><span class="p">.</span><span class="nx">commerce</span><span class="p">.</span><span class="nx">productName</span><span class="p">(),</span> <span class="nx">faker</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">number</span><span class="p">());</span>
  <span class="c1">//Generated random input: {'Sleek Cotton Computer',  85481}</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">addProductResult</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">true</span><span class="p">;</span>
  <span class="c1">//Test failed, the random input triggered some path we never planned for.</span>
  <span class="c1">//We discovered a bug early!</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-17-test-many-input-combinations-using-property-based-testing" class="anchor" href="#-%EF%B8%8F-17-test-many-input-combinations-using-property-based-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.7 Test many input combinations using Property-based testing</h2>
<p>✅ <strong>Do:</strong> Typically we choose a few input samples for each test. Even when the input format resembles real-world data (see bullet ‘Don’t foo’), we cover only a few input combinations (method(‘’, true, 1), method(“string” , false” , 0)), However, in production, an API that is called with 5 parameters can be invoked with thousands of different permutations, one of them might render our process down (<a href="https://en.wikipedia.org/wiki/Fuzzing" rel="nofollow">see Fuzz Testing</a>). What if you could write a single test that sends 1000 permutations of different inputs automatically and catches for which input our code fails to return the right response? Property-based testing is a technique that does exactly that: by sending all the possible input combinations to your unit under test it increases the serendipity of finding a bug. For example, given a method — addNewProduct(id, name, isDiscount) — the supporting libraries will call this method with many combinations of (number, string, boolean) like (1, “iPhone”, false), (2, “Galaxy”, true). You can run property-based testing using your favorite test runner (Mocha, Jest, etc) using libraries like <a href="https://github.com/jsverify/jsverify" rel="nofollow">js-verify</a> or <a href="https://github.com/leebyron/testcheck-js" rel="nofollow">testcheck</a> (much better documentation). Update: Nicolas Dubien suggests in the comments below to <a href="https://github.com/dubzzz/fast-check#readme" rel="nofollow">checkout fast-check</a> which seems to offer some additional features and also to be actively maintained
<br></p>
<p>❌ <strong>Otherwise:</strong> Unconsciously, you choose the test inputs that cover only code paths that work well. Unfortunately, this decreases the efficiency of testing as a vehicle to expose bugs</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-testing-many-input-permutations-with-fast-check" class="anchor" href="#clap-doing-it-right-example-testing-many-input-permutations-with-fast-check" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Testing many input permutations with “fast-check”</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="k">import</span> <span class="nx">fc</span> <span class="k">from</span> <span class="s2">"fast-check"</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">"Product service"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s2">"Adding new"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">//this will run 100 times with different random properties</span>
    <span class="nx">it</span><span class="p">(</span><span class="s2">"Add new product with random yet valid properties, always successful"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span>
      <span class="nx">fc</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span>
        <span class="nx">fc</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="nx">fc</span><span class="p">.</span><span class="nx">integer</span><span class="p">(),</span> <span class="nx">fc</span><span class="p">.</span><span class="nx">string</span><span class="p">(),</span> <span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
          <span class="nx">expect</span><span class="p">(</span><span class="nx">addNewProduct</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">name</span><span class="p">).</span><span class="nx">status</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s2">"approved"</span><span class="p">);</span>
        <span class="p">})</span>
      <span class="p">));</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-18-if-needed-use-only-short--inline-snapshots" class="anchor" href="#-%EF%B8%8F-18-if-needed-use-only-short--inline-snapshots" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.8 If needed, use only short &amp; inline snapshots</h2>
<p>✅ <strong>Do:</strong> When there is a need for <a href="https://jestjs.io/docs/en/snapshot-testing" rel="nofollow">snapshot testing</a>, use only short and focused snapshots (i.e. 3-7 lines) that are included as part of the test (<a href="https://jestjs.io/docs/en/snapshot-testing#inline-snapshots" rel="nofollow">Inline Snapshot</a>) and not within external files. Keeping this guideline will ensure your tests remain self-explanatory and less fragile.</p>
<p>On the other hand, ‘classic snapshots’ tutorials and tools encourage to store big files (e.g. component rendering markup, API JSON result) over some external medium and ensure each time when the test run to compare the received result with the saved version. This, for example, can implicitly couple our test to 1000 lines with 3000 data values that the test writer never read and reasoned about. Why is this wrong? By doing so, there are 1000 reasons for your test to fail - it’s enough for a single line to change for the snapshot to get invalid and this is likely to happen a lot. How frequently? for every space, comment or minor CSS/HTML change. Not only this, the test name wouldn’t give a clue about the failure as it just checks that 1000 lines didn’t change, also it encourages to the test writer to accept as the desired true a long document he couldn’t inspect and verify. All of these are symptoms of obscure and eager test that is not focused and aims to achieve too much</p>
<p>It’s worth noting that there are few cases where long &amp; external snapshots are acceptable - when asserting on schema and not data (extracting out values and focusing on fields) or when the received document rarely changes
<br></p>
<p>❌ <strong>Otherwise:</strong> A UI test fails. The code seems right, the screen renders perfect pixels, what happened? your snapshot testing just found a difference from the origin document to current received one - a single space character was added to the markdown...</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-coupling-our-test-to-unseen-2000-lines-of-code" class="anchor" href="#thumbsdown-anti-pattern-example-coupling-our-test-to-unseen-2000-lines-of-code" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: Coupling our test to unseen 2000 lines of code</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"TestJavaScript.com is renderd correctly"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//Arrange</span>

  <span class="c1">//Act</span>
  <span class="kd">const</span> <span class="nx">receivedPage</span> <span class="o">=</span> <span class="nx">renderer</span>
    <span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">DisplayPage</span> <span class="nx">page</span><span class="o">=</span><span class="s2">"http://www.testjavascript.com"</span><span class="o">&gt;</span> <span class="nx">Test</span> <span class="nx">JavaScript</span> <span class="o">&lt;</span><span class="sr">/DisplayPage&gt;</span><span class="err">)
</span>    <span class="p">.</span><span class="nx">toJSON</span><span class="p">();</span>

  <span class="c1">//Assert</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">receivedPage</span><span class="p">).</span><span class="nx">toMatchSnapshot</span><span class="p">();</span>
  <span class="c1">//We now implicitly maintain a 2000 lines long document</span>
  <span class="c1">//every additional line break or comment - will break this test</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-expectations-are-visible-and-focused" class="anchor" href="#clap-doing-it-right-example-expectations-are-visible-and-focused" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Expectations are visible and focused</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When visiting TestJavaScript.com home page, a menu is displayed"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//Arrange</span>

  <span class="c1">//Act</span>
  <span class="kd">const</span> <span class="nx">receivedPage</span> <span class="o">=</span> <span class="nx">renderer</span>
    <span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">DisplayPage</span> <span class="nx">page</span><span class="o">=</span><span class="s2">"http://www.testjavascript.com"</span><span class="o">&gt;</span> <span class="nx">Test</span> <span class="nx">JavaScript</span> <span class="o">&lt;</span><span class="sr">/DisplayPage&gt;</span><span class="err">)
</span>    <span class="p">.</span><span class="nx">toJSON</span><span class="p">();</span>

  <span class="c1">//Assert</span>

  <span class="kd">const</span> <span class="nx">menu</span> <span class="o">=</span> <span class="nx">receivedPage</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">menu</span><span class="p">;</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">menu</span><span class="p">).</span><span class="nx">toMatchInlineSnapshot</span><span class="p">(</span><span class="s2">`
&lt;ul&gt;
&lt;li&gt;Home&lt;/li&gt;
&lt;li&gt; About &lt;/li&gt;
&lt;li&gt; Contact &lt;/li&gt;
&lt;/ul&gt;
`</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️19-avoid-global-test-fixtures-and-seeds-add-data-per-test" class="anchor" href="#-%EF%B8%8F19-avoid-global-test-fixtures-and-seeds-add-data-per-test" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️1.9 Avoid global test fixtures and seeds, add data per-test</h2>
<p>✅ <strong>Do:</strong> Going by the golden rule (bullet 0), each test should add and act on its own set of DB rows to prevent coupling and easily reason about the test flow. In reality, this is often violated by testers who seed the DB with data before running the tests (<a href="https://en.wikipedia.org/wiki/Test_fixture" rel="nofollow">also known as ‘test fixture’</a>) for the sake of performance improvement. While performance is indeed a valid concern — it can be mitigated (see “Component testing” bullet), however, test complexity is a much painful sorrow that should govern other considerations most of the time. Practically, make each test case explicitly add the DB records it needs and act only on those records. If performance becomes a critical concern — a balanced compromise might come in the form of seeding the only suite of tests that are not mutating data (e.g. queries)
<br></p>
<p>❌ <strong>Otherwise:</strong> Few tests fail, a deployment is aborted, our team is going to spend precious time now, do we have a bug? let’s investigate, oh no — it seems that two tests were mutating the same seed data</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data" class="anchor" href="#thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: tests are not independent and rely on some global hook to feed global DB data</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">before</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//adding sites and admins data to our DB. Where is the data? outside. At some external json or migration framework</span>
  <span class="kr">await</span> <span class="nx">DB</span><span class="p">.</span><span class="nx">AddSeedDataFromJson</span><span class="p">(</span><span class="s1">'seed.json'</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">it</span><span class="p">(</span><span class="s2">"When updating site name, get successful confirmation"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//I know that site name "portal" exists - I saw it in the seed files</span>
  <span class="kd">const</span> <span class="nx">siteToUpdate</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">getSiteByName</span><span class="p">(</span><span class="s2">"Portal"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">updateNameResult</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">changeName</span><span class="p">(</span><span class="nx">siteToUpdate</span><span class="p">,</span> <span class="s2">"newName"</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">updateNameResult</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">it</span><span class="p">(</span><span class="s2">"When querying by site name, get the right site"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//I know that site name "portal" exists - I saw it in the seed files</span>
  <span class="kd">const</span> <span class="nx">siteToCheck</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">getSiteByName</span><span class="p">(</span><span class="s2">"Portal"</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">siteToCheck</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s2">"Portal"</span><span class="p">);</span> <span class="c1">//Failure! The previous test change the name :[</span>
<span class="p">});</span>

</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data" class="anchor" href="#clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: We can stay within the test, each test acts on its own set of data</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When updating site name, get successful confirmation"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//test is adding a fresh new records and acting on the records only</span>
  <span class="kd">const</span> <span class="nx">siteUnderTest</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">addSite</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"siteForUpdateTest"</span>
  <span class="p">});</span>

  <span class="kd">const</span> <span class="nx">updateNameResult</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">changeName</span><span class="p">(</span><span class="nx">siteUnderTest</span><span class="p">,</span> <span class="s2">"newName"</span><span class="p">);</span>

  <span class="nx">expect</span><span class="p">(</span><span class="nx">updateNameResult</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<br>
<h2>
<a id="-️-110-dont-catch-errors-expect-them" class="anchor" href="#-%EF%B8%8F-110-dont-catch-errors-expect-them" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.10 Don’t catch errors, expect them</h2>
<p>✅ <strong>Do:</strong> When trying to assert that some input triggers an error, it might look right to use try-catch-finally and asserts that the catch clause was entered. The result is an awkward and verbose test case (example below) that hides the simple test intent and the result expectations</p>
<p>A more elegant alternative is the using the one-line dedicated Chai assertion: expect(method).to.throw (or in Jest: expect(method).toThrow()). It’s absolutely mandatory to also ensure the exception contains a property that tells the error type, otherwise given just a generic error the application won’t be able to do much rather than show a disappointing message to the user
<br></p>
<p>❌ <strong>Otherwise:</strong> It will be challenging to infer from the test reports (e.g. CI reports) what went wrong</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-a-long-test-case-that-tries-to-assert-the-existence-of-error-with-try-catch" class="anchor" href="#thumbsdown-anti-pattern-example-a-long-test-case-that-tries-to-assert-the-existence-of-error-with-try-catch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-pattern Example: A long test case that tries to assert the existence of error with try-catch</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When no product name, it throws error 400"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">errorWeExceptFor</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">addNewProduct</span><span class="p">({});</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s2">"InvalidInput"</span><span class="p">);</span>
    <span class="nx">errorWeExceptFor</span> <span class="o">=</span> <span class="nx">error</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">errorWeExceptFor</span><span class="p">).</span><span class="nx">not</span><span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="kc">null</span><span class="p">;</span>
  <span class="c1">//if this assertion fails, the tests results/reports will only show</span>
  <span class="c1">//that some value is null, there won't be a word about a missing Exception</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-a-human-readable-expectation-that-could-be-understood-easily-maybe-even-by-qa-or-technical-pm" class="anchor" href="#clap-doing-it-right-example-a-human-readable-expectation-that-could-be-understood-easily-maybe-even-by-qa-or-technical-pm" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: A human-readable expectation that could be understood easily, maybe even by QA or technical PM</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When no product name, it throws error 400"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">await</span> <span class="nx">expect</span><span class="p">(</span><span class="nx">addNewProduct</span><span class="p">({}))</span>
    <span class="p">.</span><span class="nx">to</span><span class="p">.</span><span class="nx">eventually</span><span class="p">.</span><span class="k">throw</span><span class="p">(</span><span class="nx">AppError</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">with</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="s2">"code"</span><span class="p">,</span> <span class="s2">"InvalidInput"</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-111-tag-your-tests" class="anchor" href="#-%EF%B8%8F-111-tag-your-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.11 Tag your tests</h2>
<p>✅ <strong>Do:</strong> Different tests must run on different scenarios: quick smoke, IO-less, tests should run when a developer saves or commits a file, full end-to-end tests usually run when a new pull request is submitted, etc. This can be achieved by tagging tests with keywords like #cold #api #sanity so you can grep with your testing harness and invoke the desired subset. For example, this is how you would invoke only the sanity test group with Mocha: mocha — grep ‘sanity’
<br></p>
<p>❌ <strong>Otherwise:</strong> Running all the tests, including tests that perform dozens of DB queries, any time a developer makes a small change can be extremely slow and keeps developers away from running tests</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-tagging-tests-as-cold-test-allows-the-test-runner-to-execute-only-fast-tests-coldquick-tests-that-are-doing-no-io-and-can-be-executed-frequently-even-as-the-developer-is-typing" class="anchor" href="#clap-doing-it-right-example-tagging-tests-as-cold-test-allows-the-test-runner-to-execute-only-fast-tests-coldquick-tests-that-are-doing-no-io-and-can-be-executed-frequently-even-as-the-developer-is-typing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Tagging tests as ‘#cold-test’ allows the test runner to execute only fast tests (Cold===quick tests that are doing no IO and can be executed frequently even as the developer is typing)</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">//this test is fast (no DB) and we're tagging it correspondigly</span>
<span class="c1">//now the user/CI can run it frequently</span>
<span class="nx">describe</span><span class="p">(</span><span class="s2">"Order service"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s2">"Add new order #cold-test #sanity"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">test</span><span class="p">(</span><span class="s2">"Scenario - no currency was supplied. Expectation - Use the default currency #sanity"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">//code logic here</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-112-categorize-tests-under-at-least-2-levels" class="anchor" href="#-%EF%B8%8F-112-categorize-tests-under-at-least-2-levels" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 1.12 Categorize tests under at least 2 levels</h2>
<p>✅ <strong>Do:</strong> Apply some structure to your test suite so an occasional visitor could easily understand the requirements (tests are the best documentation) and the various scenarios that are being tested. A common method for this is by placing at least 2 'describe' blocks above your tests: the 1st is for the name of the unit under test and the 2nd for additional level of categorization like the scenario or custom categories (see code examples and print screen below). Doing so will also greatly improve the test reports: The reader will easily infer the tests categories, delve into the desired section and correlate failing tests. In addition, it will get much easier for a developer to navigate through the code of a suite with many tests. There are multiple alternative structures for test suite that you may consider like <a href="https://github.com/searls/jasmine-given" rel="nofollow">given-when-then</a> and <a href="https://github.com/ericelliott/riteway" rel="nofollow">RITE</a></p>
<br>
<p>❌ <strong>Otherwise:</strong> When looking at a report with flat and long list of tests, the reader have to skim-read through long texts to conclude the major scenarios and correlate the commonality of failing tests. Consider the following case: When 7/100 tests fail, looking at a flat list will demand reading the failing tests text to see how they relate to each other. However, in a hierarchical report all of them could be under the same flow or category and the reader will quickly infer what or at least where is the root failure cause</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-structuring-suite-with-the-name-of-unit-under-test-and-scenarios-will-lead-to-the-convenient-report-that-is-shown-below" class="anchor" href="#clap-doing-it-right-example-structuring-suite-with-the-name-of-unit-under-test-and-scenarios-will-lead-to-the-convenient-report-that-is-shown-below" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Structuring suite with the name of unit under test and scenarios will lead to the convenient report that is shown below</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// Unit under test</span>
<span class="nx">describe</span><span class="p">(</span><span class="s2">"Transfer service"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//Scenario</span>
  <span class="nx">describe</span><span class="p">(</span><span class="s2">"When no credit"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">//Expectation</span>
    <span class="nx">test</span><span class="p">(</span><span class="s2">"Then the response status should decline"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>

    <span class="c1">//Expectation</span>
    <span class="nx">test</span><span class="p">(</span><span class="s2">"Then it should send email to admin"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/hierarchical-report.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/hierarchical-report.png" alt="alt text" style="max-width:100%;"></a></p>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-a-flat-list-of-tests-will-make-it-harder-for-the-reader-to-identify-the-user-stories-and-correlate-failing-tests" class="anchor" href="#thumbsdown-anti-pattern-example-a-flat-list-of-tests-will-make-it-harder-for-the-reader-to-identify-the-user-stories-and-correlate-failing-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-pattern Example: A flat list of tests will make it harder for the reader to identify the user stories and correlate failing tests</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Mocha" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"Then the response status should decline"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>

<span class="nx">test</span><span class="p">(</span><span class="s2">"Then it should send email"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>

<span class="nx">test</span><span class="p">(</span><span class="s2">"Then there should not be a new transfer record"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span>
</pre>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/flat-report.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/flat-report.png" alt="alt text" style="max-width:100%;"></a></p>
<br>
</details>
<p><br><br></p>
<h2>
<a id="-️113-other-generic-good-testing-hygiene" class="anchor" href="#-%EF%B8%8F113-other-generic-good-testing-hygiene" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️1.13 Other generic good testing hygiene</h2>
<p>✅ <strong>Do:</strong> This post is focused on testing advice that is related to, or at least can be exemplified with Node JS. This bullet, however, groups few non-Node related tips that are well-known</p>
<p>Learn and practice <a href="https://www.sm-cloud.com/book-review-test-driven-development-by-example-a-tldr/" rel="nofollow">TDD principles</a> — they are extremely valuable for many but don’t get intimidated if they don’t fit your style, you’re not the only one. Consider writing the tests before the code in a <a href="https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html" rel="nofollow">red-green-refactor style</a>, ensure each test checks exactly one thing, when you find a bug — before fixing write a test that will detect this bug in the future, let each test fail at least once before turning green, start a module by writing a quick and simplistic code that satisfies the test - then refactor gradually and take it to a production grade level, avoid any dependency on the environment (paths, OS, etc)
<br></p>
<p>❌ <strong>Otherwise:</strong> You‘ll miss pearls of wisdom that were collected for decades</p>
<p><br><br></p>
<h1>
<a id="section-2️⃣-backend-testing" class="anchor" href="#section-2%EF%B8%8F%E2%83%A3-backend-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Section 2️⃣: Backend Testing</h1>
<h2>
<a id="-️21-enrich-your-testing-portfolio-look-beyond-unit-tests-and-the-pyramid" class="anchor" href="#-%EF%B8%8F21-enrich-your-testing-portfolio-look-beyond-unit-tests-and-the-pyramid" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️2.1 Enrich your testing portfolio: Look beyond unit tests and the pyramid</h2>
<p>✅ <strong>Do:</strong> The <a href="https://martinfowler.com/bliki/TestPyramid.html" rel="nofollow">testing pyramid</a>, though 10&gt; years old, is a great and relevant model that suggests three testing types and influences most developers’ testing strategy. At the same time, more than a handful of shiny new testing techniques emerged and are hiding in the shadows of the testing pyramid. Given all the dramatic changes that we’ve seen in the recent 10 years (Microservices, cloud, serverless), is it even possible that one quite-old model will suit <em>all</em> types of applications? shouldn’t the testing world consider welcoming new testing techniques?</p>
<p>Don’t get me wrong, in 2019 the testing pyramid, TDD and unit tests are still a powerful technique and are probably the best match for many applications. Only like any other model, despite its usefulness, <a href="https://en.wikipedia.org/wiki/All_models_are_wrong" rel="nofollow">it must be wrong sometimes</a>. For example, consider an IoT application that ingests many events into a message-bus like Kafka/RabbitMQ, which then flow into some data-warehouse and are eventually queried by some analytics UI. Should we really spend 50% of our testing budget on writing unit tests for an application that is integration-centric and has almost no logic? As the diversity of application types increase (bots, crypto, Alexa-skills) greater are the chances to find scenarios where the testing pyramid is not the best match.</p>
<p>It’s time to enrich your testing portfolio and become familiar with more testing types (the next bullets suggest few ideas), mind models like the testing pyramid but also match testing types to real-world problems that you’re facing (‘Hey, our API is broken, let’s write consumer-driven contract testing!’), diversify your tests like an investor that build a portfolio based on risk analysis — assess where problems might arise and match some prevention measures to mitigate those potential risks</p>
<p>A word of caution: the TDD argument in the software world takes a typical false-dichotomy face, some preach to use it everywhere, others think it’s the devil. Everyone who speaks in absolutes is wrong :]</p>
<br>
<p>❌ <strong>Otherwise:</strong> You’re going to miss some tools with amazing ROI, some like Fuzz, lint, and mutation can provide value in 10 minutes</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-cindy-sridharan-suggests-a-rich-testing-portfolio-in-her-amazing-post-testing-microservicesthe-same-way" class="anchor" href="#clap-doing-it-right-example-cindy-sridharan-suggests-a-rich-testing-portfolio-in-her-amazing-post-testing-microservicesthe-same-way" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Cindy Sridharan suggests a rich testing portfolio in her amazing post ‘Testing Microservices — the same way’</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-12-rich-testing.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-12-rich-testing.jpeg" alt="alt text" title="Cindy Sridharan suggests a rich testing portfolio in her amazing post ‘Testing Microservices — the sane way’" style="max-width:100%;"></a></p>
<p><strong>☺️Example: </strong><a href="https://www.youtube.com/watch?v=-2zP494wdUY&amp;feature=youtube" rel="nofollow" target="_blank"></a><a href="https://www.youtube.com/watch?v=-2zP494wdUY&amp;feature=youtu.be" rel="nofollow">YouTube: “Beyond Unit Tests: 5 Shiny Node.JS Test Types (2018)” (Yoni Goldberg)</a></p>
<br>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-12-Yoni-Goldberg-Testing.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-12-Yoni-Goldberg-Testing.jpeg" alt="alt text" title="A test name that constitutes 3 parts" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️22-component-testing-might-be-your-best-affair" class="anchor" href="#-%EF%B8%8F22-component-testing-might-be-your-best-affair" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️2.2 Component testing might be your best affair</h2>
<p>✅ <strong>Do:</strong> Each unit test covers a tiny portion of the application and it’s expensive to cover the whole, whereas end-to-end testing easily covers a lot of ground but is flaky and slower, why not apply a balanced approach and write tests that are bigger than unit tests but smaller than end-to-end testing? Component testing is the unsung song of the testing world — they provide the best from both worlds: reasonable performance and a possibility to apply TDD patterns + realistic and great coverage.</p>
<p>Component tests focus on the Microservice ‘unit’, they work against the API, don’t mock anything which belongs to the Microservice itself (e.g. real DB, or at least the in-memory version of that DB) but stub anything that is external like calls to other Microservices. By doing so, we test what we deploy, approach the app from outwards to inwards and gain great confidence in a reasonable amount of time.
<br></p>
<p>❌ <strong>Otherwise:</strong> You may spend long days on writing unit tests to find out that you got only 20% system coverage</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-supertest-allows-approaching-express-api-in-process-fast-and-cover-many-layers" class="anchor" href="#clap-doing-it-right-example-supertest-allows-approaching-express-api-in-process-fast-and-cover-many-layers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Supertest allows approaching Express API in-process (fast and cover many layers)</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha" style="max-width:100%;"></a></p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-13-component-test-yoni-goldberg.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-13-component-test-yoni-goldberg.png" alt="alt text" title=" [Supertest](https://www.npmjs.com/package/supertest) allows approaching Express API in-process (fast and cover many layers)" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️23-ensure-new-releases-dont-break-the-api-using-contract-tests" class="anchor" href="#-%EF%B8%8F23-ensure-new-releases-dont-break-the-api-using-contract-tests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️2.3 Ensure new releases don’t break the API using contract tests</h2>
<p>✅ <strong>Do:</strong> So your Microservice has multiple clients, and you run multiple versions of the service for compatibility reasons (keeping everyone happy). Then you change some field and ‘boom!’, some important client who relies on this field is angry. This is the Catch-22 of the integration world: It’s very challenging for the server side to consider all the multiple client expectations — On the other hand, the clients can’t perform any testing because the server controls the release dates. <a href="https://docs.pact.io/" rel="nofollow">Consumer-driven contracts and the framework PACT</a> were born to formalize this process with a very disruptive approach — not the server defines the test plan of itself rather the client defines the tests of the… server! PACT can record the client expectation and put in a shared location, “broker”, so the server can pull the expectations and run on every build using PACT library to detect broken contracts — a client expectation that is not met. By doing so, all the server-client API mismatches are caught early during build/CI and might save you a great deal of frustration
<br></p>
<p>❌ <strong>Otherwise:</strong> The alternatives are exhausting manual testing or deployment fear</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example" class="anchor" href="#clap-doing-it-right-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example:</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20PACT-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20PACT-blue.svg" alt="" title="Examples with PACT" style="max-width:100%;"></a></p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-14-testing-best-practices-contract-flow.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-14-testing-best-practices-contract-flow.png" alt="alt text" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-24-test-your-middlewares-in-isolation" class="anchor" href="#-%EF%B8%8F-24-test-your-middlewares-in-isolation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 2.4 Test your middlewares in isolation</h2>
<p>✅ <strong>Do:</strong> Many avoid Middleware testing because they represent a small portion of the system and require a live Express server. Both reasons are wrong — Middlewares are small but affect all or most of the requests and can be tested easily as pure functions that get {req,res} JS objects. To test a middleware function one should just invoke it and spy (<a href="https://www.npmjs.com/package/sinon" rel="nofollow">using Sinon for example</a>) on the interaction with the {req,res} objects to ensure the function performed the right action. The library <a href="https://www.npmjs.com/package/node-mocks-http" rel="nofollow">node-mock-http</a> takes it even further and factors the {req,res} objects along with spying on their behavior. For example, it can assert whether the http status that was set on the res object matches the expectation (See example below)
<br></p>
<p>❌ <strong>Otherwise:</strong> A bug in Express middleware === a bug in all or most requests</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clapdoing-it-right-example-testing-middleware-in-isolation-without-issuing-network-calls-and-waking-up-the-entire-express-machine" class="anchor" href="#clapdoing-it-right-example-testing-middleware-in-isolation-without-issuing-network-calls-and-waking-up-the-entire-express-machine" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏Doing It Right Example: Testing middleware in isolation without issuing network calls and waking-up the entire Express machine</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg" alt="" title="Examples with Jest" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">//the middleware we want to test</span>
<span class="kd">const</span> <span class="nx">unitUnderTest</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"./middleware"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">httpMocks</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"node-mocks-http"</span><span class="p">);</span>
<span class="c1">//Jest syntax, equivelant to describe() &amp; it() in Mocha</span>
<span class="nx">test</span><span class="p">(</span><span class="s2">"A request without authentication header, should return http status 403"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">httpMocks</span><span class="p">.</span><span class="nx">createRequest</span><span class="p">({</span>
    <span class="na">method</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"/user/42"</span><span class="p">,</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">authentication</span><span class="p">:</span> <span class="s2">""</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">const</span> <span class="nx">response</span> <span class="o">=</span> <span class="nx">httpMocks</span><span class="p">.</span><span class="nx">createResponse</span><span class="p">();</span>
  <span class="nx">unitUnderTest</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">).</span><span class="nx">toBe</span><span class="p">(</span><span class="mi">403</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️25-measure-and-refactor-using-static-analysis-tools" class="anchor" href="#-%EF%B8%8F25-measure-and-refactor-using-static-analysis-tools" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️2.5 Measure and refactor using static analysis tools</h2>
<p>✅ <strong>Do:</strong> Using static analysis tools helps by giving objective ways to improve code quality and keep your code maintainable. You can add static analysis tools to your CI build to abort when it finds code smells. Its main selling points over plain linting are the ability to inspect quality in the context of multiple files (e.g. detect duplications), perform advanced analysis (e.g. code complexity) and follow the history and progress of code issues. Two examples of tools you can use are <a href="https://www.sonarqube.org/" rel="nofollow">SonarQube</a> (4,900+ <a href="https://github.com/SonarSource/sonarqube" rel="nofollow">stars</a>) and <a href="https://codeclimate.com/" rel="nofollow">Code Climate</a> (2,000+ <a href="https://github.com/codeclimate/codeclimate" rel="nofollow">stars</a>)</p>
<p>Credit: <a href="https://github.com/TheHollidayInn" rel="nofollow" target="_blank"></a><a href="https://github.com/TheHollidayInn" rel="nofollow">Keith Holliday</a></p>
<br>
<p>❌ <strong>Otherwise:</strong> With poor code quality, bugs and performance will always be an issue that no shiny new library or state of the art features can fix</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-codeclimate-a-commercial-tool-that-can-identify-complex-methods" class="anchor" href="#clap-doing-it-right-example-codeclimate-a-commercial-tool-that-can-identify-complex-methods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: CodeClimate, a commercial tool that can identify complex methods:</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Code%20Climate-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Code%20Climate-blue.svg" alt="" title="Examples with CodeClimate" style="max-width:100%;"></a></p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-16-yoni-goldberg-quality.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-16-yoni-goldberg-quality.png" alt="alt text" title="CodeClimate, a commercial tool that can identify complex methods:" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-26-check-your-readiness-for-node-related-chaos" class="anchor" href="#-%EF%B8%8F-26-check-your-readiness-for-node-related-chaos" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 2.6 Check your readiness for Node-related chaos</h2>
<p>✅ <strong>Do:</strong> Weirdly, most software testings are about logic &amp; data only, but some of the worst things that happen (and are really hard to mitigate) are infrastructural issues. For example, did you ever test what happens when your process memory is overloaded, or when the server/process dies, or does your monitoring system realizes when the API becomes 50% slower?. To test and mitigate these type of bad things — <a href="https://principlesofchaos.org/" rel="nofollow">Chaos engineering</a> was born by Netflix. It aims to provide awareness, frameworks and tools for testing our app resiliency for chaotic issues. For example, one of its famous tools, <a href="https://github.com/Netflix/chaosmonkey" rel="nofollow">the chaos monkey</a>, randomly kills servers to ensure that our service can still serve users and not relying on a single server (there is also a Kubernetes version, <a href="https://github.com/asobti/kube-monkey" rel="nofollow">kube-monkey</a>, that kills pods). All these tools work on the hosting/platform level, but what if you wish to test and generate pure Node chaos like check how your Node process copes with uncaught errors, unhandled promise rejection, v8 memory overloaded with the max allowed of 1.7GB or whether your UX remains satisfactory when the event loop gets blocked often? to address this I’ve written, <a href="https://github.com/i0natan/node-chaos-monkey" rel="nofollow">node-chaos</a> (alpha) which provides all sort of Node-related chaotic acts
<br></p>
<p>❌ <strong>Otherwise:</strong> No escape here, Murphy’s law will hit your production without mercy</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example--node-chaos-can-generate-all-sort-of-nodejs-pranks-so-you-can-test-how-resilience-is-your-app-to-chaos" class="anchor" href="#clap-doing-it-right-example--node-chaos-can-generate-all-sort-of-nodejs-pranks-so-you-can-test-how-resilience-is-your-app-to-chaos" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: : Node-chaos can generate all sort of Node.js pranks so you can test how resilience is your app to chaos</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-17-yoni-goldberg-chaos-monkey-nodejs.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-17-yoni-goldberg-chaos-monkey-nodejs.png" alt="alt text" title="Node-chaos can generate all sort of Node.js pranks so you can test how resilience is your app to chaos" style="max-width:100%;"></a></p>
</details>
<br>
<h2>
<a id="-️27-avoid-global-test-fixtures-and-seeds-add-data-per-test" class="anchor" href="#-%EF%B8%8F27-avoid-global-test-fixtures-and-seeds-add-data-per-test" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️2.7 Avoid global test fixtures and seeds, add data per-test</h2>
<p>✅ <strong>Do:</strong> Going by the golden rule (bullet 0), each test should add and act on its own set of DB rows to prevent coupling and easily reason about the test flow. In reality, this is often violated by testers who seed the DB with data before running the tests (also known as ‘test fixture’) for the sake of performance improvement. While performance is indeed a valid concern — it can be mitigated (see “Component testing” bullet), however, test complexity is a much painful sorrow that should govern other considerations most of the time. Practically, make each test case explicitly add the DB records it needs and act only on those records. If performance becomes a critical concern — a balanced compromise might come in the form of seeding the only suite of tests that are not mutating data (e.g. queries)
<br></p>
<p>❌ <strong>Otherwise:</strong> Few tests fail, a deployment is aborted, our team is going to spend precious time now, do we have a bug? let’s investigate, oh no — it seems that two tests were mutating the same seed data</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data-1" class="anchor" href="#thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: tests are not independent and rely on some global hook to feed global DB data</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg" alt="" title="Examples with Mocha" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">before</span><span class="p">(</span><span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//adding sites and admins data to our DB. Where is the data? outside. At some external json or migration framework</span>
  <span class="kr">await</span> <span class="nx">DB</span><span class="p">.</span><span class="nx">AddSeedDataFromJson</span><span class="p">(</span><span class="s1">'seed.json'</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">it</span><span class="p">(</span><span class="s2">"When updating site name, get successful confirmation"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//I know that site name "portal" exists - I saw it in the seed files</span>
  <span class="kd">const</span> <span class="nx">siteToUpdate</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">getSiteByName</span><span class="p">(</span><span class="s2">"Portal"</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">updateNameResult</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">changeName</span><span class="p">(</span><span class="nx">siteToUpdate</span><span class="p">,</span> <span class="s2">"newName"</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">updateNameResult</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">it</span><span class="p">(</span><span class="s2">"When querying by site name, get the right site"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//I know that site name "portal" exists - I saw it in the seed files</span>
  <span class="kd">const</span> <span class="nx">siteToCheck</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">getSiteByName</span><span class="p">(</span><span class="s2">"Portal"</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">siteToCheck</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="s2">"Portal"</span><span class="p">);</span> <span class="c1">//Failure! The previous test change the name :[</span>
<span class="p">});</span>

</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data-1" class="anchor" href="#clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: We can stay within the test, each test acts on its own set of data</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When updating site name, get successful confirmation"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">//test is adding a fresh new records and acting on the records only</span>
  <span class="kd">const</span> <span class="nx">siteUnderTest</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">addSite</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"siteForUpdateTest"</span>
  <span class="p">});</span>
  <span class="kd">const</span> <span class="nx">updateNameResult</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">SiteService</span><span class="p">.</span><span class="nx">changeName</span><span class="p">(</span><span class="nx">siteUnderTest</span><span class="p">,</span> <span class="s2">"newName"</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">updateNameResult</span><span class="p">).</span><span class="nx">to</span><span class="p">.</span><span class="nx">be</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h1>
<a id="section-3️⃣-frontend-testing" class="anchor" href="#section-3%EF%B8%8F%E2%83%A3-frontend-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Section 3️⃣: Frontend Testing</h1>
<h2>
<a id="-️-31-separate-ui-from-functionality" class="anchor" href="#-%EF%B8%8F-31-separate-ui-from-functionality" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.1 Separate UI from functionality</h2>
<p>✅ <strong>Do:</strong> When focusing on testing component logic, UI details become a noise that should be extracted, so your tests can focus on pure data. Practically, extract the desired data from the markup in an abstract way that is not too coupled to the graphic implementation, assert only on pure data (vs HTML/CSS graphic details) and disable animations that slow down. You might get tempted to avoid rendering and test only the back part of the UI (e.g. services, actions, store) but this will result in fictional tests that don't resemble the reality and won't reveal cases where the right data doesn't even arrive in the UI</p>
<br>
<p>❌ <strong>Otherwise:</strong> The pure calculated data of your test might be ready in 10ms, but then the whole test will last 500ms (100 tests = 1 min) due to some fancy and irrelevant animation</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-separating-out-the-ui-details" class="anchor" href="#clap-doing-it-right-example-separating-out-the-ui-details" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Separating out the UI details</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" alt="" title="Examples with React" style="max-width:100%;"></a> <a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg" alt="" title="Examples with react-testing-library" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"When users-list is flagged to show only VIP, should display only VIP members"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="kd">const</span> <span class="nx">allUsers</span> <span class="o">=</span> <span class="p">[{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"Yoni Goldberg"</span><span class="p">,</span> <span class="na">vip</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"John Doe"</span><span class="p">,</span> <span class="na">vip</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}];</span>

  <span class="c1">// Act</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getAllByTestId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">UsersList</span> <span class="nx">users</span><span class="o">=</span><span class="p">{</span><span class="nx">allUsers</span><span class="p">}</span> <span class="nx">showOnlyVIP</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>
  <span class="c1">// Assert - Extract the data from the UI first</span>
  <span class="kd">const</span> <span class="nx">allRenderedUsers</span> <span class="o">=</span> <span class="nx">getAllByTestId</span><span class="p">(</span><span class="s2">"user"</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">uiElement</span> <span class="o">=&gt;</span> <span class="nx">uiElement</span><span class="p">.</span><span class="nx">textContent</span><span class="p">);</span>
  <span class="kd">const</span> <span class="nx">allRealVIPUsers</span> <span class="o">=</span> <span class="nx">allUsers</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">vip</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">allRenderedUsers</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">allRealVIPUsers</span><span class="p">);</span> <span class="c1">//compare data with data, no UI here</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-assertion-mix-ui-details-and-data" class="anchor" href="#thumbsdown-anti-pattern-example-assertion-mix-ui-details-and-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: Assertion mix UI details and data</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"When flagging to show only VIP, should display only VIP members"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="kd">const</span> <span class="nx">allUsers</span> <span class="o">=</span> <span class="p">[{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"Yoni Goldberg"</span><span class="p">,</span> <span class="na">vip</span><span class="p">:</span> <span class="kc">false</span> <span class="p">},</span> <span class="p">{</span> <span class="na">id</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"John Doe"</span><span class="p">,</span> <span class="na">vip</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}];</span>

  <span class="c1">// Act</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getAllByTestId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">UsersList</span> <span class="nx">users</span><span class="o">=</span><span class="p">{</span><span class="nx">allUsers</span><span class="p">}</span> <span class="nx">showOnlyVIP</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>
  <span class="c1">// Assert - Mix UI &amp; data in assertion</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getAllByTestId</span><span class="p">(</span><span class="s2">"user"</span><span class="p">)).</span><span class="nx">toEqual</span><span class="p">(</span><span class="s1">'[&lt;li data-testid="user"&gt;John Doe&lt;/li&gt;]'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️-32-query-html-elements-based-on-attributes-that-are-unlikely-to-change" class="anchor" href="#-%EF%B8%8F-32-query-html-elements-based-on-attributes-that-are-unlikely-to-change" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.2 Query HTML elements based on attributes that are unlikely to change</h2>
<p>✅ <strong>Do:</strong> Query HTML elements based on attributes that are likely to survive graphic changes unlike CSS selectors and like form labels. If the designated element doesn't have such attributes, create a dedicated test attribute like 'test-id-submit-button'. Going this route not only ensures that your functional/logic tests never break because of look &amp; feel changes but also it becomes clear to the entire team that this element and attribute are utilized by tests and shouldn't get removed</p>
<br>
<p>❌ <strong>Otherwise:</strong> You want to test the login functionality that spans many components, logic and services, everything is set up perfectly - stubs, spies, Ajax calls are isolated. All seems perfect. Then the test fails because the designer changed the div CSS class from 'thick-border' to 'thin-border'</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-querying-an-element-using-a-dedicated-attribute-for-testing" class="anchor" href="#clap-doing-it-right-example-querying-an-element-using-a-dedicated-attribute-for-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Querying an element using a dedicated attribute for testing</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" alt="" title="Examples with React" style="max-width:100%;"></a></p>
<pre lang="html" class="highlight-html">// the markup code (part of React component)
<span class="nt">&lt;h3&gt;</span>
  <span class="nt">&lt;Badge</span> <span class="na">pill</span> <span class="na">className=</span><span class="s">"fixed_badge"</span> <span class="na">variant=</span><span class="s">"dark"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">data-testid=</span><span class="s">"errorsLabel"</span><span class="nt">&gt;</span>{value}<span class="nt">&lt;/span&gt;</span>
    <span class="c">&lt;!-- note the attribute data-testid --&gt;</span>
  <span class="nt">&lt;/Badge&gt;</span>
<span class="nt">&lt;/h3&gt;</span>
</pre>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// this example is using react-testing-library</span>
<span class="nx">test</span><span class="p">(</span><span class="s2">"Whenever no data is passed to metric, show 0 as default"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="kd">const</span> <span class="nx">metricValue</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

  <span class="c1">// Act</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByTestId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">dashboardMetric</span> <span class="nx">value</span><span class="o">=</span><span class="p">{</span><span class="kc">undefined</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getByTestId</span><span class="p">(</span><span class="s2">"errorsLabel"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s2">"0"</span><span class="p">);</span>
<span class="p">});</span>
</pre>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-relying-on-css-attributes" class="anchor" href="#thumbsdown-anti-pattern-example-relying-on-css-attributes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: Relying on CSS attributes</h3>
<pre lang="html" class="highlight-html"><span class="c">&lt;!-- the markup code (part of React component) --&gt;</span>
<span class="nt">&lt;span</span> <span class="na">id=</span><span class="s">"metric"</span> <span class="na">className=</span><span class="s">"d-flex-column"</span><span class="nt">&gt;</span>{value}<span class="nt">&lt;/span&gt;</span>
<span class="c">&lt;!-- what if the designer changes the classs? --&gt;</span>
</pre>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// this exammple is using enzyme</span>
<span class="nx">test</span><span class="p">(</span><span class="s2">"Whenever no data is passed, error metric shows zero"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// ...</span>

  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"[className='d-flex-column']"</span><span class="p">).</span><span class="nx">text</span><span class="p">()).</span><span class="nx">toBe</span><span class="p">(</span><span class="s2">"0"</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<br>
<h2>
<a id="-️-33-whenever-possible-test-with-a-realistic-and-fully-rendered-component" class="anchor" href="#-%EF%B8%8F-33-whenever-possible-test-with-a-realistic-and-fully-rendered-component" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.3 Whenever possible, test with a realistic and fully rendered component</h2>
<p>✅ <strong>Do:</strong> Whenever reasonably sized, test your component from outside like your users do, fully render the UI, act on it and assert that the rendered UI behaves as expected. Avoid all sort of mocking, partial and shallow rendering - this approach might result in untrapped bugs due to lack of details and harden the maintenance as the tests mess with the internals (see bullet 'Favour blackbox testing'). If one of the child components is significantly slowing down (e.g. animation) or complicating the setup - consider explicitly replacing it with a fake</p>
<p>With all that said, a word of caution is in order: this technique works for small/medium components that pack a reasonable size of child components. Fully rendering a component with too many children will make it hard to reason about test failures (root cause analysis) and might get too slow. In such cases, write only a few tests against that fat parent component and more tests against its children</p>
<br>
<p>❌ <strong>Otherwise:</strong> When poking into a component's internal by invoking its private methods, and checking the inner state - you would have to refactor all tests when refactoring the components implementation. Do you really have a capacity for this level of maintenance?</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-working-realistically-with-a-fully-rendered-component" class="anchor" href="#clap-doing-it-right-example-working-realistically-with-a-fully-rendered-component" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Working realistically with a fully rendered component</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" alt="" title="Examples with React" style="max-width:100%;"></a> <a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Enzyme-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Enzyme-blue.svg" alt="" title="Examples with Enzyme" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="kd">class</span> <span class="nx">Calendar</span> <span class="kd">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
  <span class="kr">static</span> <span class="nx">defaultProps</span> <span class="o">=</span> <span class="p">{</span> <span class="na">showFilters</span><span class="p">:</span> <span class="kc">false</span> <span class="p">};</span>

  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span>
        <span class="nx">A</span> <span class="nx">filters</span> <span class="nx">panel</span> <span class="kd">with</span> <span class="nx">a</span> <span class="nx">button</span> <span class="nx">to</span> <span class="nx">hide</span><span class="o">/</span><span class="nx">show</span> <span class="nx">filters</span>
        <span class="o">&lt;</span><span class="nx">FiltersPanel</span> <span class="nx">showFilter</span><span class="o">=</span><span class="p">{</span><span class="nx">showFilters</span><span class="p">}</span> <span class="nx">title</span><span class="o">=</span><span class="s2">"Choose Filters"</span> <span class="o">/&gt;</span>
      <span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//Examples use React &amp; Enzyme</span>
<span class="nx">test</span><span class="p">(</span><span class="s2">"Realistic approach: When clicked to show filters, filters are displayed"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">mount</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Calendar</span> <span class="nx">showFilters</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span> <span class="sr">/&gt;</span><span class="se">)</span><span class="err">;
</span>
  <span class="c1">// Act</span>
  <span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"button"</span><span class="p">).</span><span class="nx">simulate</span><span class="p">(</span><span class="s2">"click"</span><span class="p">);</span>

  <span class="c1">// Assert</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">text</span><span class="p">().</span><span class="nx">includes</span><span class="p">(</span><span class="s2">"Choose Filter"</span><span class="p">));</span>
  <span class="c1">// This is how the user will approach this element: by text</span>
<span class="p">});</span>
</pre>
<h3>
<a id="thumbsdown-anti-pattern-example-mocking-the-reality-with-shallow-rendering" class="anchor" href="#thumbsdown-anti-pattern-example-mocking-the-reality-with-shallow-rendering" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: Mocking the reality with shallow rendering</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"Shallow/mocked approach: When clicked to show filters, filters are displayed"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="kd">const</span> <span class="nx">wrapper</span> <span class="o">=</span> <span class="nx">shallow</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">Calendar</span> <span class="nx">showFilters</span><span class="o">=</span><span class="p">{</span><span class="kc">false</span><span class="p">}</span> <span class="nx">title</span><span class="o">=</span><span class="s2">"Choose Filter"</span> <span class="o">/&gt;</span><span class="p">);</span>

  <span class="c1">// Act</span>
  <span class="nx">wrapper</span>
    <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"filtersPanel"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">instance</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">showFilters</span><span class="p">();</span>
  <span class="c1">// Tap into the internals, bypass the UI and invoke a method. White-box approach</span>

  <span class="c1">// Assert</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">wrapper</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">"Filter"</span><span class="p">).</span><span class="nx">props</span><span class="p">()).</span><span class="nx">toEqual</span><span class="p">({</span> <span class="na">title</span><span class="p">:</span> <span class="s2">"Choose Filter"</span> <span class="p">});</span>
  <span class="c1">// what if we change the prop name or don't pass anything relevant?</span>
<span class="p">});</span>
</pre>
</details>
<br>
<h2>
<a id="-️-34-dont-sleep-use-frameworks-built-in-support-for-async-events-also-try-to-speed-things-up" class="anchor" href="#-%EF%B8%8F-34-dont-sleep-use-frameworks-built-in-support-for-async-events-also-try-to-speed-things-up" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.4 Don't sleep, use frameworks built-in support for async events. Also try to speed things up</h2>
<p>✅ <strong>Do:</strong> In many cases, the unit under test completion time is just unknown (e.g. animation suspends element appearance) - in that case, avoid sleeping (e.g. setTimeOut) and prefer more deterministic methods that most platforms provide. Some libraries allows awaiting on operations (e.g. <a href="https://docs.cypress.io/guides/references/best-practices.html#Unnecessary-Waiting" rel="nofollow">Cypress cy.request('url')</a>), other provide API for waiting like <a href="https://testing-library.com/docs/guide-disappearance" rel="nofollow">@testing-library/dom method wait(expect(element))</a>. Sometimes a more elegant way is to stub the slow resource, like API for example, and then once the response moment becomes deterministic the component can be explicitly re-rendered. When depending upon some external component that sleeps, it might turn useful to <a href="https://jestjs.io/docs/en/timer-mocks" rel="nofollow">hurry-up the clock</a>. Sleeping is a pattern to avoid because it forces your test to be slow or risky (when waiting for a too short period). Whenever sleeping and polling is inevitable and there's no support from the testing framework, some npm libraries like <a href="https://www.npmjs.com/package/wait-for-expect" rel="nofollow">wait-for-expect</a> can help with a semi-deterministic solution
<br></p>
<p>❌ <strong>Otherwise:</strong> When sleeping for a long time, tests will be an order of magnitude slower. When trying to sleep for small numbers, test will fail when the unit under test didn't respond in a timely fashion. So it boils down to a trade-off between flakiness and bad performance</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-e2e-api-that-resolves-only-when-the-async-operations-is-done-cypress" class="anchor" href="#clap-doing-it-right-example-e2e-api-that-resolves-only-when-the-async-operations-is-done-cypress" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: E2E API that resolves only when the async operations is done (Cypress)</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" alt="" title="Using Cypress to illustrate the idea" style="max-width:100%;"></a>
<a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg" alt="" title="Examples with react-testing-library" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// using Cypress</span>
<span class="nx">cy</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">"#show-products"</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span> <span class="c1">// navigate</span>
<span class="nx">cy</span><span class="p">.</span><span class="nx">wait</span><span class="p">(</span><span class="s2">"@products"</span><span class="p">);</span> <span class="c1">// wait for route to appear</span>
<span class="c1">// this line will get executed only when the route is ready</span>
</pre>
<h3>
<a id="clap-doing-it-right-example-testing-library-that-waits-for-dom-elements" class="anchor" href="#clap-doing-it-right-example-testing-library-that-waits-for-dom-elements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Testing library that waits for DOM elements</h3>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// @testing-library/dom</span>
<span class="nx">test</span><span class="p">(</span><span class="s2">"movie title appears"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// element is initially not present...</span>

  <span class="c1">// wait for appearance</span>
  <span class="kr">await</span> <span class="nx">wait</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="s2">"the lion king"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="c1">// wait for appearance and return the element</span>
  <span class="kd">const</span> <span class="nx">movie</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">waitForElement</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">getByText</span><span class="p">(</span><span class="s2">"the lion king"</span><span class="p">));</span>
<span class="p">});</span>
</pre>
<h3>
<a id="thumbsdown-anti-pattern-example-custom-sleep-code" class="anchor" href="#thumbsdown-anti-pattern-example-custom-sleep-code" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: custom sleep code</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">test</span><span class="p">(</span><span class="s2">"movie title appears"</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// element is initially not present...</span>

  <span class="c1">// custom wait logic (caution: simplistic, no timeout)</span>
  <span class="kd">const</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">found</span> <span class="o">=</span> <span class="nx">getByText</span><span class="p">(</span><span class="s2">"the lion king"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">found</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clearInterval</span><span class="p">(</span><span class="nx">interval</span><span class="p">);</span>
      <span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="s2">"the lion king"</span><span class="p">)).</span><span class="nx">toBeInTheDocument</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>

  <span class="c1">// wait for appearance and return the element</span>
  <span class="kd">const</span> <span class="nx">movie</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">waitForElement</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">getByText</span><span class="p">(</span><span class="s2">"the lion king"</span><span class="p">));</span>
<span class="p">});</span>
</pre>
</details>
<br>
<h2>
<a id="-️-35-watch-how-the-content-is-served-over-the-network" class="anchor" href="#-%EF%B8%8F-35-watch-how-the-content-is-served-over-the-network" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.5 Watch how the content is served over the network</h2>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Google%20LightHouse-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Google%20LightHouse-blue.svg" alt="" title="Examples with Lighthouse" style="max-width:100%;"></a></p>
<p>✅ <strong>Do:</strong> Apply some active monitor that ensures the page load under real network is optimized - this includes any UX concern like slow page load or un-minified bundle. The inspection tools market is no short: basic tools like <a href="https://www.pingdom.com/" rel="nofollow">pingdom</a>, AWS CloudWatch, <a href="https://cloud.google.com/monitoring/uptime-checks/" rel="nofollow">gcp StackDriver</a> can be easily configured to watch whether the server is alive and response under a reasonable SLA. This only scratches the surface of what might get wrong, hence it's preferable to opt for tools that specialize in frontend (e.g. <a href="https://developers.google.com/web/tools/lighthouse/" rel="nofollow">lighthouse</a>, <a href="https://developers.google.com/speed/pagespeed/insights/" rel="nofollow">pagespeed</a>) and perform richer analysis. The focus should be on symptoms, metrics that directly affect the UX, like page load time, <a href="https://scotch.io/courses/10-web-performance-audit-tips-for-your-next-billion-users-in-2018/fmp-first-meaningful-paint" rel="nofollow">meaningful paint</a>, <a href="https://calibreapp.com/blog/time-to-interactive/" rel="nofollow">time until the page gets interactive (TTI)</a>. On top of that, one may also watch for technical causes like ensuring the content is compressed, time to the first byte, optimize images, ensuring reasonable DOM size, SSL and many others. It's advisable to have these rich monitors both during development, as part of the CI and most important - 24x7 over the production's servers/CDN</p>
<br>
<p>❌ <strong>Otherwise:</strong> It must be disappointing to realize that after such great care for crafting a UI, 100% functional tests passing and sophisticated bundling - the UX is horrible and slow due to CDN misconfiguration</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<h3>
<a id="clap-doing-it-right-example-lighthouse-page-load-inspection-report" class="anchor" href="#clap-doing-it-right-example-lighthouse-page-load-inspection-report" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Lighthouse page load inspection report</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/lighthouse2.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/lighthouse2.png" alt="" title="Lighthouse page load inspection report" style="max-width:100%;"></a></p>
</details>
<br>
<h2>
<a id="-️-36-stub-flaky-and-slow-resources-like-backend-apis" class="anchor" href="#-%EF%B8%8F-36-stub-flaky-and-slow-resources-like-backend-apis" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.6 Stub flaky and slow resources like backend APIs</h2>
<p>✅ <strong>Do:</strong> When coding your mainstream tests (not E2E tests), avoid involving any resource that is beyond your responsibility and control like backend API and use stubs instead (i.e. test double). Practically, instead of real network calls to APIs, use some test double library (like <a href="https://sinonjs.org/" rel="nofollow">Sinon</a>, <a href="https://www.npmjs.com/package/testdouble" rel="nofollow">Test doubles</a>, etc) for stubbing the API response. The main benefit is preventing flakiness - testing or staging APIs by definition are not highly stable and from time to time will fail your tests although YOUR component behaves just fine (production env was not meant for testing and it usually throttles requests). Doing this will allow simulating various API behavior that should drive your component behavior as when no data was found or the case when API throws an error. Last but not least, network calls will greatly slow down the tests</p>
<br>
<p>❌ <strong>Otherwise:</strong> The average test runs no longer than few ms, a typical API call last 100ms&gt;, this makes each test ~20x slower</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-stubbing-or-intercepting-api-calls" class="anchor" href="#clap-doing-it-right-example-stubbing-or-intercepting-api-calls" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Stubbing or intercepting API calls</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg" alt="" title="Examples with React" style="max-width:100%;"></a> <a href="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg" alt="" title="Examples with react-testing-library" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// unit under test</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">ProductsList</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="p">[</span><span class="nx">products</span><span class="p">,</span> <span class="nx">setProducts</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useState</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>

  <span class="kd">const</span> <span class="nx">fetchProducts</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">products</span> <span class="o">=</span> <span class="kr">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">"api/products"</span><span class="p">);</span>
    <span class="nx">setProducts</span><span class="p">(</span><span class="nx">products</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">fetchProducts</span><span class="p">();</span>
  <span class="p">},</span> <span class="p">[]);</span>

  <span class="k">return</span> <span class="nx">products</span> <span class="p">?</span> <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">products</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/div&gt; : &lt;div data-testid="no-products-message"&gt;No products&lt;/</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// test</span>
<span class="nx">test</span><span class="p">(</span><span class="s2">"When no products exist, show the appropriate message"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Arrange</span>
  <span class="nx">nock</span><span class="p">(</span><span class="s2">"api"</span><span class="p">)</span>
    <span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="s2">`/products`</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">reply</span><span class="p">(</span><span class="mi">404</span><span class="p">);</span>

  <span class="c1">// Act</span>
  <span class="kd">const</span> <span class="p">{</span> <span class="nx">getByTestId</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">ProductsList</span> <span class="o">/&gt;</span><span class="p">);</span>

  <span class="c1">// Assert</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">getByTestId</span><span class="p">(</span><span class="s2">"no-products-message"</span><span class="p">)).</span><span class="nx">toBeTruthy</span><span class="p">();</span>
<span class="p">});</span>
</pre>
</details>
<br>
<h2>
<a id="-️-37-have-very-few-end-to-end-tests-that-spans-the-whole-system" class="anchor" href="#-%EF%B8%8F-37-have-very-few-end-to-end-tests-that-spans-the-whole-system" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.7 Have very few end-to-end tests that spans the whole system</h2>
<p>✅ <strong>Do:</strong> Although E2E (end-to-end) usually means UI-only testing with a real browser (See bullet 3.6), for other they mean tests that stretch the entire system including the real backend. The latter type of tests is highly valuable as they cover integration bugs between frontend and backend that might happen due to a wrong understanding of the exchange schema. They are also an efficient method to discover backend-to-backend integration issues (e.g. Microservice A sends the wrong message to Microservice B) and even to detect deployment failures - there are no backend frameworks for E2E testing that are as friendly and mature as UI frameworks like <a href="https://www.cypress.io/" rel="nofollow">Cypress</a> and <a href="https://github.com/GoogleChrome/puppeteer" rel="nofollow">Puppeteer</a>. The downside of such tests is the high cost of configuring an environment with so many components, and mostly their brittleness - given 50 microservices, even if one fails then the entire E2E just failed. For that reason, we should use this technique sparingly and probably have 1-10 of those and no more. That said, even a small number of E2E tests are likely to catch the type of issues they are targeted for - deployment &amp; integration faults. It's advisable to run those over a production-like staging environment</p>
<br>
<p>❌ <strong>Otherwise:</strong> UI might invest much in testing its functionality only to realizes very late that the backend returned payload (the data schema the UI has to work with) is very different than expected</p>
<br>
<h2>
<a id="-️-38-speed-up-e2e-tests-by-reusing-login-credentials" class="anchor" href="#-%EF%B8%8F-38-speed-up-e2e-tests-by-reusing-login-credentials" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.8 Speed-up E2E tests by reusing login credentials</h2>
<p>✅ <strong>Do:</strong> In E2E tests that involve a real backend and rely on a valid user token for API calls, it doesn't payoff to isolate the test to a level where a user is created and logged-in in every request. Instead, login only once before the tests execution start (i.e. before-all hook), save the token in some local storage and reuse it across requests. This seem to violate one of the core testing principle - keep the test autonomous without resources coupling. While this is a valid worry, in E2E tests performance is a key concern and creating 1-3 API requests before starting each individual tests might lead to horrible execution time. Reusing credentials doesn't mean the tests have to act on the same user records - if relying on user records (e.g. test user payments history) than make sure to generate those records as part of the test and avoid sharing their existence with other tests. Also remember that the backend can be faked - if your tests are focused on the frontend it might be better to isolate it and stub the backend API (see bullet 3.6).</p>
<br>
<p>❌ <strong>Otherwise:</strong> Given 200 test cases and assuming login=100ms = 20 seconds only for logging-in again and again</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-logging-in-before-all-and-not-before-each" class="anchor" href="#clap-doing-it-right-example-logging-in-before-all-and-not-before-each" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Logging-in before-all and not before-each</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" alt="" title="Using Cypress to illustrate the idea" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="kd">let</span> <span class="nx">authenticationToken</span><span class="p">;</span>

<span class="c1">// happens before ALL tests run</span>
<span class="nx">before</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span> <span class="s1">'http://localhost:3000/login'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">username</span><span class="p">:</span> <span class="nx">Cypress</span><span class="p">.</span><span class="nx">env</span><span class="p">(</span><span class="s1">'username'</span><span class="p">),</span>
    <span class="na">password</span><span class="p">:</span> <span class="nx">Cypress</span><span class="p">.</span><span class="nx">env</span><span class="p">(</span><span class="s1">'password'</span><span class="p">),</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">its</span><span class="p">(</span><span class="s1">'body'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">responseFromLogin</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">authenticationToken</span> <span class="o">=</span> <span class="nx">responseFromLogin</span><span class="p">.</span><span class="nx">token</span><span class="p">;</span>
  <span class="p">})</span>
<span class="p">})</span>

<span class="c1">// happens before EACH test</span>
<span class="nx">beforeEach</span><span class="p">(</span><span class="nx">setUser</span> <span class="o">=&gt;</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">visit</span><span class="p">(</span><span class="s1">'/home'</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">onBeforeLoad</span> <span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">win</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s1">'token'</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">authenticationToken</span><span class="p">))</span>
    <span class="p">},</span>
  <span class="p">})</span>
<span class="p">})</span>

</pre>
</details>
<br>
<h2>
<a id="-️-39-have-one-e2e-smoke-test-that-just-travels-across-the-site-map" class="anchor" href="#-%EF%B8%8F-39-have-one-e2e-smoke-test-that-just-travels-across-the-site-map" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.9 Have one E2E smoke test that just travels across the site map</h2>
<p>✅ <strong>Do:</strong> For production monitoring and development-time sanity check, run a single E2E test that visits all/most of the site pages and ensures no one breaks. This type of test brings a great return on investment as it's very easy to write and maintain, but it can detect any kind of failure including functional, network and deployment issues. Other styles of smoke and sanity checking are not as reliable and exhaustive - some ops teams just ping the home page (production) or developers who run many integration tests which don't discover packaging and browser issues. Goes without saying that the smoke test doesn't replace functional tests rather just aim to serve as a quick smoke detector</p>
<br>
<p>❌ <strong>Otherwise:</strong> Everything might seem perfect, all tests pass, production health-check is also positive but the Payment component had some packaging issue and only the /Payment route is not rendering</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-smoke-travelling-across-all-pages" class="anchor" href="#clap-doing-it-right-example-smoke-travelling-across-all-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Smoke travelling across all pages</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" alt="" title="Using Cypress to illustrate the idea" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="nx">it</span><span class="p">(</span><span class="s2">"When doing smoke testing over all page, should load them all successfully"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// exemplified using Cypress but can be implemented easily</span>
  <span class="c1">// using any E2E suite</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">visit</span><span class="p">(</span><span class="s2">"https://mysite.com/home"</span><span class="p">);</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"Home"</span><span class="p">);</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"https://mysite.com/Login"</span><span class="p">);</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"Login"</span><span class="p">);</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"https://mysite.com/About"</span><span class="p">);</span>
  <span class="nx">cy</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">"About"</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</details>
<br>
<h2>
<a id="-️-310-expose-the-tests-as-a-live-collaborative-document" class="anchor" href="#-%EF%B8%8F-310-expose-the-tests-as-a-live-collaborative-document" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.10 Expose the tests as a live collaborative document</h2>
<p>✅ <strong>Do:</strong> Besides increasing app reliability, tests bring another attractive opportunity to the table - serve as live app documentation. Since tests inherently speak at a less-technical and product/UX language, using the right tools they can serve as a communication artifact that greatly aligns all the peers - developers and their customers. For example, some frameworks allow expressing the flow and expectations (i.e. tests plan) using a human-readable language so any stakeholder, including product managers, can read, approve and collaborate on the tests which just became the live requirements document. This technique is also being referred to as 'acceptance test' as it allows the customer to define his acceptance criteria in plain language. This is <a href="https://en.wikipedia.org/wiki/Behavior-driven_development" rel="nofollow">BDD (behavior-driven testing)</a> at its purest form. One of the popular frameworks that enable this is <a href="https://github.com/cucumber/cucumber-js" rel="nofollow">Cucumber which has a JavaScript flavor</a>, see example below. Another similar yet different opportunity, <a href="https://storybook.js.org/" rel="nofollow">StoryBook</a>, allows exposing UI components as a graphic catalog where one can walk through the various states of each component (e.g. render a grid w/o filters, render that grid with multiple rows or with none, etc), see how it looks like, and how to trigger that state - this can appeal also to product folks but mostly serves as live doc for developers who consume those components.</p>
<p>❌ <strong>Otherwise:</strong> After investing top resources on testing, it's just a pity not to leverage this investment and win great value</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-describing-tests-in-human-language-using-cucumber-js" class="anchor" href="#clap-doing-it-right-example-describing-tests-in-human-language-using-cucumber-js" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Describing tests in human-language using cucumber-js</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cucumber-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cucumber-blue.svg" alt="" title="Examples using Cucumber" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="c1">// this is how one can describe tests using cucumber: plain language that allows anyone to understand and collaborate</span>

<span class="nx">Feature</span><span class="p">:</span> <span class="nx">Twitter</span> <span class="k">new</span> <span class="nx">tweet</span>

  <span class="nx">I</span> <span class="nx">want</span> <span class="nx">to</span> <span class="nx">tweet</span> <span class="nx">something</span> <span class="k">in</span> <span class="nx">Twitter</span>

  <span class="p">@</span><span class="nd">focus</span>
  <span class="nx">Scenario</span><span class="p">:</span> <span class="nx">Tweeting</span> <span class="k">from</span> <span class="nx">the</span> <span class="nx">home</span> <span class="nx">page</span>
    <span class="nx">Given</span> <span class="nx">I</span> <span class="nx">open</span> <span class="nx">Twitter</span> <span class="nx">home</span>
    <span class="nx">Given</span> <span class="nx">I</span> <span class="nx">click</span> <span class="nx">on</span> <span class="s2">"New tweet"</span> <span class="nx">button</span>
    <span class="nx">Given</span> <span class="nx">I</span> <span class="nx">type</span> <span class="s2">"Hello followers!"</span> <span class="k">in</span> <span class="nx">the</span> <span class="nx">textbox</span>
    <span class="nx">Given</span> <span class="nx">I</span> <span class="nx">click</span> <span class="nx">on</span> <span class="s2">"Submit"</span> <span class="nx">button</span>
    <span class="nx">Then</span> <span class="nx">I</span> <span class="nx">see</span> <span class="nx">message</span> <span class="s2">"Tweet saved"</span>

</pre>
<h3>
<a id="clap-doing-it-right-example-visualizing-our-components-their-various-states-and-inputs-using-storybook" class="anchor" href="#clap-doing-it-right-example-visualizing-our-components-their-various-states-and-inputs-using-storybook" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Visualizing our components, their various states and inputs using Storybook</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20StoryBook-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20StoryBook-blue.svg" alt="" title="Using StoryBook" style="max-width:100%;"></a></p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/story-book.jpg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/story-book.jpg" alt="alt text" title="Storybook" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-311-detect-visual-issues-with-automated-tools" class="anchor" href="#-%EF%B8%8F-311-detect-visual-issues-with-automated-tools" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 3.11 Detect visual issues with automated tools</h2>
<p>✅ <strong>Do:</strong> Setup automated tools to capture UI screenshots when changes are presented and detect visual issues like content overlapping or breaking. This ensures that not only the right data is prepared but also the user can conveniently see it. This technique is not widely adopted, our testing mindset leans toward functional tests but it's the visuals what the user experience and with so many device types it's very easy to overlook some nasty UI bug. Some free tools can provide the basics - generate and save screenshots for the inspection of human eyes. While this approach might be sufficient for small apps, it's flawed as any other manual testing that demands human labor anytime something changes. On the other hand, it's quite challenging to detect UI issues automatically due to the lack of clear definition - this is where the field of 'Visual Regression' chime in and solve this puzzle by comparing old UI with the latest changes and detect differences. Some OSS/free tools can provide some of this functionality (e.g. <a href="https://github.com/BBC-News/wraith" rel="nofollow">wraith</a>, <a>PhantomCSS</a> but might charge significant setup time. The commercial line of tools (e.g. <a href="https://applitools.com/" rel="nofollow">Applitools</a>, <a href="https://percy.io/" rel="nofollow">Percy.io</a>) takes is a step further by smoothing the installation and packing advanced features like management UI, alerting, smart capturing by eliminating 'visual noise' (e.g. ads, animations) and even root cause analysis of the DOM/CSS changes that led to the issue</p>
<br>
<p>❌ <strong>Otherwise:</strong> How good is a content page that display great content (100% tests passed), loads instantly but half of the content area is hidden?</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-a-typical-visual-regression---right-content-that-is-served-badly" class="anchor" href="#thumbsdown-anti-pattern-example-a-typical-visual-regression---right-content-that-is-served-badly" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: A typical visual regression - right content that is served badly</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/amazon-visual-regression.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/amazon-visual-regression.jpeg" alt="alt text" title="Amazon page breaks" style="max-width:100%;"></a></p>
<br>
<h3>
<a id="clap-doing-it-right-example-configuring-wraith-to-capture-and-compare-ui-snapshots" class="anchor" href="#clap-doing-it-right-example-configuring-wraith-to-capture-and-compare-ui-snapshots" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Configuring wraith to capture and compare UI snapshots</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Wraith-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Wraith-blue.svg" alt="" title="Using Wraith" style="max-width:100%;"></a></p>
<pre><code>​# Add as many domains as necessary. Key will act as a label​

domains:
  english: "http://www.mysite.com"​

​# Type screen widths below, here are a couple of examples​

screen_widths:

  - 600​
  - 768​
  - 1024​
  - 1280​

​# Type page URL paths below, here are a couple of examples​
paths:
  about:
    path: /about
    selector: '.about'​
  subscribe:
      selector: '.subscribe'​
    path: /subscribe
</code></pre>
<h3>
<a id="clap-doing-it-right-example-using-applitools-to-get-snapshot-comparison-and-other-advanced-features" class="anchor" href="#clap-doing-it-right-example-using-applitools-to-get-snapshot-comparison-and-other-advanced-features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Using Applitools to get snapshot comparison and other advanced features</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20AppliTools-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20AppliTools-blue.svg" alt="" title="Using Applitools" style="max-width:100%;"></a> <a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg" alt="" title="Using Cypress to illustrate the idea" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">todoPage</span> <span class="k">from</span> <span class="s2">"../page-objects/todo-page"</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">"visual validation"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">before</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">todoPage</span><span class="p">.</span><span class="nx">navigate</span><span class="p">());</span>
  <span class="nx">beforeEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">cy</span><span class="p">.</span><span class="nx">eyesOpen</span><span class="p">({</span> <span class="na">appName</span><span class="p">:</span> <span class="s2">"TAU TodoMVC"</span> <span class="p">}));</span>
  <span class="nx">afterEach</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">cy</span><span class="p">.</span><span class="nx">eyesClose</span><span class="p">());</span>

  <span class="nx">it</span><span class="p">(</span><span class="s2">"should look good"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">cy</span><span class="p">.</span><span class="nx">eyesCheckWindow</span><span class="p">(</span><span class="s2">"empty todo list"</span><span class="p">);</span>
    <span class="nx">todoPage</span><span class="p">.</span><span class="nx">addTodo</span><span class="p">(</span><span class="s2">"Clean room"</span><span class="p">);</span>
    <span class="nx">todoPage</span><span class="p">.</span><span class="nx">addTodo</span><span class="p">(</span><span class="s2">"Learn javascript"</span><span class="p">);</span>
    <span class="nx">cy</span><span class="p">.</span><span class="nx">eyesCheckWindow</span><span class="p">(</span><span class="s2">"two todos"</span><span class="p">);</span>
    <span class="nx">todoPage</span><span class="p">.</span><span class="nx">toggleTodo</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="nx">cy</span><span class="p">.</span><span class="nx">eyesCheckWindow</span><span class="p">(</span><span class="s2">"mark as completed"</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h1>
<a id="section-4️⃣-measuring-test-effectiveness" class="anchor" href="#section-4%EF%B8%8F%E2%83%A3-measuring-test-effectiveness" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Section 4️⃣: Measuring Test Effectiveness</h1>
<p><br><br></p>
<h2>
<a id="-️-41-get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" class="anchor" href="#-%EF%B8%8F-41-get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 4.1 Get enough coverage for being confident, ~80% seems to be the lucky number</h2>
<p>✅ <strong>Do:</strong> The purpose of testing is to get enough confidence for moving fast, obviously the more code is tested the more confident the team can be. Coverage is a measure of how many code lines (and branches, statements, etc) are being reached by the tests. So how much is enough? 10–30% is obviously too low to get any sense about the build correctness, on the other side 100% is very expensive and might shift your focus from the critical paths to the exotic corners of the code. The long answer is that it depends on many factors like the type of application — if you’re building the next generation of Airbus A380 than 100% is a must, for a cartoon pictures website 50% might be too much. Although most of the testing enthusiasts claim that the right coverage threshold is contextual, most of them also mention the number 80% as a thumb of a rule (<a href="https://martinfowler.com/bliki/TestCoverage.html" rel="nofollow">Fowler: “in the upper 80s or 90s”</a>) that presumably should satisfy most of the applications.</p>
<p>Implementation tips: You may want to configure your continuous integration (CI) to have a coverage threshold (<a href="https://jestjs.io/docs/en/configuration.html#collectcoverage-boolean" rel="nofollow">Jest link</a>) and stop a build that doesn’t stand to this standard (it’s also possible to configure threshold per component, see code example below). On top of this, consider detecting build coverage decrease (when a newly committed code has less coverage) — this will push developers raising or at least preserving the amount of tested code. All that said, coverage is only one measure, a quantitative based one, that is not enough to tell the robustness of your testing. And it can also be fooled as illustrated in the next bullets</p>
<br>
<p>❌ <strong>Otherwise:</strong> Confidence and numbers go hand in hand, without really knowing that you tested most of the system — there will also be some fear and fear will slow you down</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-example-a-typical-coverage-report" class="anchor" href="#clap-example-a-typical-coverage-report" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Example: A typical coverage report</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-18-yoni-goldberg-code-coverage.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-18-yoni-goldberg-code-coverage.png" alt="alt text" title="A typical coverage report" style="max-width:100%;"></a></p>
<br>
<h3>
<a id="clap-doing-it-right-example-setting-up-coverage-per-component-using-jest" class="anchor" href="#clap-doing-it-right-example-setting-up-coverage-per-component-using-jest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Setting up coverage per component (using Jest)</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Jest-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Jest-blue.svg" alt="" title="Using Jest" style="max-width:100%;"></a></p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-18-code-coverage2.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-18-code-coverage2.jpeg" alt="alt text" title="Setting up coverage per component (using Jest)" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-42-inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" class="anchor" href="#-%EF%B8%8F-42-inspect-coverage-reports-to-detect-untested-areas-and-other-oddities" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 4.2 Inspect coverage reports to detect untested areas and other oddities</h2>
<p>✅ <strong>Do:</strong> Some issues sneak just under the radar and are really hard to find using traditional tools. These are not really bugs but more of surprising application behavior that might have a severe impact. For example, often some code areas are never or rarely being invoked — you thought that the ‘PricingCalculator’ class is always setting the product price but it turns out it is actually never invoked although we have 10000 products in DB and many sales… Code coverage reports help you realize whether the application behaves the way you believe it does. Other than that, it can also highlight which types of code is not tested — being informed that 80% of the code is tested doesn’t tell whether the critical parts are covered. Generating reports is easy — just run your app in production or during testing with coverage tracking and then see colorful reports that highlight how frequent each code area is invoked. If you take your time to glimpse into this data — you might find some gotchas
<br></p>
<p>❌ <strong>Otherwise:</strong> If you don’t know which parts of your code are left un-tested, you don’t know where the issues might come from</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-whats-wrong-with-this-coverage-report" class="anchor" href="#thumbsdown-anti-pattern-example-whats-wrong-with-this-coverage-report" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: What’s wrong with this coverage report?</h3>
<p>Based on a real-world scenario where we tracked our application usage in QA and find out interesting login patterns (Hint: the amount of login failures is non-proportional, something is clearly wrong. Finally it turned out that some frontend bug keeps hitting the backend login API)</p>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-19-coverage-yoni-goldberg-nodejs-consultant.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-19-coverage-yoni-goldberg-nodejs-consultant.png" alt="alt text" title="What’s wrong with this coverage report?" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-43-measure-logical-coverage-using-mutation-testing" class="anchor" href="#-%EF%B8%8F-43-measure-logical-coverage-using-mutation-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 4.3 Measure logical coverage using mutation testing</h2>
<p>✅ <strong>Do:</strong> The Traditional Coverage metric often lies: It may show you 100% code coverage, but none of your functions, even not one, return the right response. How come? it simply measures over which lines of code the test visited, but it doesn’t check if the tests actually tested anything — asserted for the right response. Like someone who’s traveling for business and showing his passport stamps — this doesn’t prove any work done, only that he visited few airports and hotels.</p>
<p>Mutation-based testing is here to help by measuring the amount of code that was actually TESTED not just VISITED. <a href="https://stryker-mutator.io/" rel="nofollow">Stryker</a> is a JavaScript library for mutation testing and the implementation is really neat:</p>
<p>(1) it intentionally changes the code and “plants bugs”. For example the code newOrder.price===0 becomes newOrder.price!=0. This “bugs” are called mutations</p>
<p>(2) it runs the tests, if all succeed then we have a problem — the tests didn’t serve their purpose of discovering bugs, the mutations are so-called survived. If the tests failed, then great, the mutations were killed.</p>
<p>Knowing that all or most of the mutations were killed gives much higher confidence than traditional coverage and the setup time is similar
<br></p>
<p>❌ <strong>Otherwise:</strong> You’ll be fooled to believe that 85% coverage means your test will detect bugs in 85% of your code</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-100-coverage-0-testing" class="anchor" href="#thumbsdown-anti-pattern-example-100-coverage-0-testing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: 100% coverage, 0% testing</h3>
<p><a href="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Stryker-blue.svg" target="_blank" rel="nofollow"><img src="https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Stryker-blue.svg" alt="" title="Using Stryker" style="max-width:100%;"></a></p>
<pre lang="javascript" class="highlight-javascript"><span class="kd">function</span> <span class="nx">addNewOrder</span><span class="p">(</span><span class="nx">newOrder</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">logger</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Adding new order </span><span class="p">${</span><span class="nx">newOrder</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>
  <span class="nx">DB</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">newOrder</span><span class="p">);</span>
  <span class="nx">Mailer</span><span class="p">.</span><span class="nx">sendMail</span><span class="p">(</span><span class="nx">newOrder</span><span class="p">.</span><span class="nx">assignee</span><span class="p">,</span> <span class="s2">`A new order was places </span><span class="p">${</span><span class="nx">newOrder</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">{</span> <span class="na">approved</span><span class="p">:</span> <span class="kc">true</span> <span class="p">};</span>
<span class="p">}</span>

<span class="nx">it</span><span class="p">(</span><span class="s2">"Test addNewOrder, don't use such test names"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">addNewOrder</span><span class="p">({</span> <span class="na">assignee</span><span class="p">:</span> <span class="s2">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="23694c4b4d634e424a4f46510d404c4e">[email&#160;protected]</a>"</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mi">120</span> <span class="p">});</span>
<span class="p">});</span> <span class="c1">//Triggers 100% code coverage, but it doesn't check anything</span>
</pre>
<br>
<h3>
<a id="clap-doing-it-right-example-stryker-reports-a-tool-for-mutation-testing-detects-and-counts-the-amount-of-code-that-is-not-tested-mutations" class="anchor" href="#clap-doing-it-right-example-stryker-reports-a-tool-for-mutation-testing-detects-and-counts-the-amount-of-code-that-is-not-tested-mutations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Stryker reports, a tool for mutation testing, detects and counts the amount of code that is not tested (Mutations)</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-20-yoni-goldberg-mutation-testing.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-20-yoni-goldberg-mutation-testing.jpeg" alt="alt text" title="Stryker reports, a tool for mutation testing, detects and counts the amount of code that is not tested (Mutations)" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️44-preventing-test-code-issues-with-test-linters" class="anchor" href="#-%EF%B8%8F44-preventing-test-code-issues-with-test-linters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️4.4 Preventing test code issues with Test linters</h2>
<p>✅ <strong>Do:</strong> A set of ESLint plugins were built specifically for inspecting the tests code patterns and discover issues. For example, <a href="https://www.npmjs.com/package/eslint-plugin-mocha" rel="nofollow">eslint-plugin-mocha</a> will warn when a test is written at the global level (not a son of a describe() statement) or when tests are <a href="https://mochajs.org/#inclusive-tests" rel="nofollow">skipped</a> which might lead to a false belief that all tests are passing. Similarly, <a href="https://github.com/jest-community/eslint-plugin-jest" rel="nofollow">eslint-plugin-jest</a> can, for example, warn when a test has no assertions at all (not checking anything)</p>
<br>
<p>❌ <strong>Otherwise:</strong> Seeing 90% code coverage and 100% green tests will make your face wear a big smile only until you realize that many tests aren’t asserting for anything and many test suites were just skipped. Hopefully, you didn’t deploy anything based on this false observation</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-a-test-case-full-of-errors-luckily-all-are-caught-by-linters" class="anchor" href="#thumbsdown-anti-pattern-example-a-test-case-full-of-errors-luckily-all-are-caught-by-linters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: A test case full of errors, luckily all are caught by Linters</h3>
<pre lang="javascript" class="highlight-javascript"><span class="nx">describe</span><span class="p">(</span><span class="s2">"Too short description"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">userToken</span> <span class="o">=</span> <span class="nx">userService</span><span class="p">.</span><span class="nx">getDefaultToken</span><span class="p">()</span> <span class="c1">// *error:no-setup-in-describe, use hooks (sparingly) instead</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">"Some description"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{});</span><span class="c1">//* error: valid-test-description. Must include the word "Should" + at least 5 words</span>
<span class="p">});</span>

<span class="nx">it</span><span class="p">.</span><span class="nx">skip</span><span class="p">(</span><span class="s2">"Test name"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="c1">// *error:no-skipped-tests, error:error:no-global-tests. Put tests only under describe or suite</span>
  <span class="nx">expect</span><span class="p">(</span><span class="s2">"somevalue"</span><span class="p">);</span> <span class="c1">// error:no-assert</span>
<span class="p">});</span>

<span class="nx">it</span><span class="p">(</span><span class="s2">"Test name"</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="o">*</span><span class="c1">//error:no-identical-title. Assign unique titles to tests</span>
<span class="p">});</span>
</pre>
</details>
<p><br><br></p>
<h1>
<a id="section-5️⃣-ci-and-other-quality-measures" class="anchor" href="#section-5%EF%B8%8F%E2%83%A3-ci-and-other-quality-measures" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Section 5️⃣: CI and Other Quality Measures</h1>
<p><br><br></p>
<h2>
<a id="-️-51-enrich-your-linters-and-abort-builds-that-have-linting-issues" class="anchor" href="#-%EF%B8%8F-51-enrich-your-linters-and-abort-builds-that-have-linting-issues" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 5.1 Enrich your linters and abort builds that have linting issues</h2>
<p>✅ <strong>Do:</strong> Linters are a free lunch, with 5 min setup you get for free an auto-pilot guarding your code and catching significant issue as you type. Gone are the days where linting was about cosmetics (no semi-colons!). Nowadays, Linters can catch severe issues like errors that are not thrown correctly and losing information. On top of your basic set of rules (like <a href="https://www.npmjs.com/package/eslint-plugin-standard" rel="nofollow">ESLint standard</a> or <a href="https://www.npmjs.com/package/eslint-config-airbnb" rel="nofollow">Airbnb style</a>), consider including some specializing Linters like <a href="https://www.npmjs.com/package/eslint-plugin-chai-expect" rel="nofollow">eslint-plugin-chai-expect</a> that can discover tests without assertions, <a href="https://www.npmjs.com/package/eslint-plugin-promise?activeTab=readme" rel="nofollow">eslint-plugin-promise</a> can discover promises with no resolve (your code will never continue), <a href="https://www.npmjs.com/package/eslint-plugin-security?activeTab=readme" rel="nofollow">eslint-plugin-security</a> which can discover eager regex expressions that might get used for DOS attacks, and <a href="https://www.npmjs.com/package/eslint-plugin-you-dont-need-lodash-underscore" rel="nofollow">eslint-plugin-you-dont-need-lodash-underscore</a> is capable of alarming when the code uses utility library methods that are part of the V8 core methods like Lodash._map(…)
<br></p>
<p>❌ <strong>Otherwise:</strong> Consider a rainy day where your production keeps crashing but the logs don’t display the error stack trace. What happened? Your code mistakenly threw a non-error object and the stack trace was lost, a good reason for banging your head against a brick wall. A 5 min linter setup could detect this TYPO and save your day</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="thumbsdown-anti-pattern-example-the-wrong-error-object-is-thrown-mistakenly-no-stack-trace-will-appear-for-this-error-luckily-eslint-catches-the-next-production-bug" class="anchor" href="#thumbsdown-anti-pattern-example-the-wrong-error-object-is-thrown-mistakenly-no-stack-trace-will-appear-for-this-error-luckily-eslint-catches-the-next-production-bug" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👎 Anti-Pattern Example: The wrong Error object is thrown mistakenly, no stack-trace will appear for this error. Luckily, ESLint catches the next production bug</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-21-yoni-goldberg-eslint.jpeg" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-21-yoni-goldberg-eslint.jpeg" alt="alt text" title="The wrong Error object is thrown mistakenly, no stack-trace will appear for this error. Luckily, ESLint catches the next production bug" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-52-shorten-the-feedback-loop-with-local-developer-ci" class="anchor" href="#-%EF%B8%8F-52-shorten-the-feedback-loop-with-local-developer-ci" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 5.2 Shorten the feedback loop with local developer-CI</h2>
<p>✅ <strong>Do:</strong> Using a CI with shiny quality inspections like testing, linting, vulnerabilities check, etc? Help developers run this pipeline also locally to solicit instant feedback and shorten the <a href="https://www.gocd.org/2016/03/15/are-you-ready-for-continuous-delivery-part-2-feedback-loops/" rel="nofollow">feedback loop</a>. Why? an efficient testing process constitutes many and iterative loops: (1) try-outs -&gt; (2) feedback -&gt; (3) refactor. The faster the feedback is, the more improvement iterations a developer can perform per-module and perfect the results. On the flip, when the feedback is late to come fewer improvement iterations could be packed into a single day, the team might already move forward to another topic/task/module and might not be up for refining that module.</p>
<p>Practically, some CI vendors (Example: <a href="https://circleci.com/docs/2.0/local-cli/" rel="nofollow">CircleCI local CLI</a>) allow running the pipeline locally. Some commercial tools like <a href="https://wallabyjs.com/" rel="nofollow">wallaby provide highly-valuable &amp; testing insights</a> as a developer prototype (no affiliation). Alternatively, you may just add npm script to package.json that runs all the quality commands (e.g. test, lint, vulnerabilities) — use tools like <a href="https://www.npmjs.com/package/concurrently" rel="nofollow">concurrently</a> for parallelization and non-zero exit code if one of the tools failed. Now the developer should just invoke one command — e.g. ‘npm run quality’ — to get instant feedback. Consider also aborting a commit if the quality check failed using a githook (<a href="https://github.com/typicode/husky" rel="nofollow">husky can help</a>)
<br></p>
<p>❌ <strong>Otherwise:</strong> When the quality results arrive the day after the code, testing doesn’t become a fluent part of development rather an after the fact formal artifact</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-npm-scripts-that-perform-code-quality-inspection-all-are-run-in-parallel-on-demand-or-when-a-developer-is-trying-to-push-new-code" class="anchor" href="#clap-doing-it-right-example-npm-scripts-that-perform-code-quality-inspection-all-are-run-in-parallel-on-demand-or-when-a-developer-is-trying-to-push-new-code" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: npm scripts that perform code quality inspection, all are run in parallel on demand or when a developer is trying to push new code</h3>
<pre lang="javascript" class="highlight-javascript"><span class="s2">"scripts"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"inspect:sanity-testing"</span><span class="p">:</span> <span class="s2">"mocha **/**--test.js --grep </span><span class="se">\"</span><span class="s2">sanity</span><span class="se">\"</span><span class="s2">"</span><span class="p">,</span>
    <span class="s2">"inspect:lint"</span><span class="p">:</span> <span class="s2">"eslint ."</span><span class="p">,</span>
    <span class="s2">"inspect:vulnerabilities"</span><span class="p">:</span> <span class="s2">"npm audit"</span><span class="p">,</span>
    <span class="s2">"inspect:license"</span><span class="p">:</span> <span class="s2">"license-checker --failOn GPLv2"</span><span class="p">,</span>
    <span class="s2">"inspect:complexity"</span><span class="p">:</span> <span class="s2">"plato ."</span><span class="p">,</span>

    <span class="s2">"inspect:all"</span><span class="p">:</span> <span class="s2">"concurrently -c </span><span class="se">\"</span><span class="s2">bgBlue.bold,bgMagenta.bold,yellow</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">npm:inspect:quick-testing</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">npm:inspect:lint</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">npm:inspect:vulnerabilities</span><span class="se">\"</span><span class="s2"> </span><span class="se">\"</span><span class="s2">npm:inspect:license</span><span class="se">\"</span><span class="s2">"</span>
  <span class="p">},</span>
  <span class="s2">"husky"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"hooks"</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">"precommit"</span><span class="p">:</span> <span class="s2">"npm run inspect:all"</span><span class="p">,</span>
      <span class="s2">"prepush"</span><span class="p">:</span> <span class="s2">"npm run inspect:all"</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️53-perform-e2e-testing-over-a-true-production-mirror" class="anchor" href="#-%EF%B8%8F53-perform-e2e-testing-over-a-true-production-mirror" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️5.3 Perform e2e testing over a true production-mirror</h2>
<p>✅ <strong>Do:</strong> End to end (e2e) testing are the main challenge of every CI pipeline — creating an identical ephemeral production mirror on the fly with all the related cloud services can be tedious and expensive. Finding the best compromise is your game: <a href="https://serverless.com/" rel="nofollow">Docker-compose</a> allows crafting isolated dockerized environment with identical containers using a single plain text file but the backing technology (e.g. networking, deployment model) is different from real-world productions. You may combine it with <a href="https://github.com/localstack/localstack" rel="nofollow">‘AWS Local’</a> to work with a stub of the real AWS services. If you went <a href="https://serverless.com/" rel="nofollow">serverless</a> multiple frameworks like serverless and <a href="https://docs.aws.amazon.com/lambda/latest/dg/serverless_app.html" rel="nofollow">AWS SAM</a> allows the local invocation of FaaS code.</p>
<p>The huge Kubernetes ecosystem is yet to formalize a standard convenient tool for local and CI-mirroring though many new tools are launched frequently. One approach is running a ‘minimized-Kubernetes’ using tools like <a href="https://kubernetes.io/docs/setup/minikube/" rel="nofollow">Minikube</a> and <a href="https://microk8s.io/" rel="nofollow">MicroK8s</a> which resemble the real thing only come with less overhead. Another approach is testing over a remote ‘real-Kubernetes’, some CI providers (e.g. <a href="https://codefresh.io/" rel="nofollow">Codefresh</a>) has native integration with Kubernetes environment and make it easy to run the CI pipeline over the real thing, others allow custom scripting against a remote Kubernetes.
<br></p>
<p>❌ <strong>Otherwise:</strong> Using different technologies for production and testing demands maintaining two deployment models and keeps the developers and the ops team separated</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-example-a-ci-pipeline-that-generates-kubernetes-cluster-on-the-fly-credit-dynamic-environments-kubernetes" class="anchor" href="#clap-example-a-ci-pipeline-that-generates-kubernetes-cluster-on-the-fly-credit-dynamic-environments-kubernetes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Example: a CI pipeline that generates Kubernetes cluster on the fly <a href="https://container-solutions.com/dynamic-environments-kubernetes/" rel="nofollow" target="_blank">(</a><a href="https://container-solutions.com/dynamic-environments-kubernetes/" rel="nofollow">Credit: Dynamic-environments Kubernetes</a>)</h3>
<pre name="38d9">deploy:<br>stage: deploy<br>image: registry.gitlab.com/gitlab-examples/kubernetes-deploy<br>script:<br>- ./configureCluster.sh $KUBE_CA_PEM_FILE $KUBE_URL $KUBE_TOKEN<br>- kubectl create ns $NAMESPACE<br>- kubectl create secret -n $NAMESPACE docker-registry gitlab-registry --docker-server="$CI_REGISTRY" --docker-username="$CI_REGISTRY_USER" --docker-password="$CI_REGISTRY_PASSWORD" --docker-email="$GITLAB_USER_EMAIL"<br>- mkdir .generated<br>- echo "$CI_BUILD_REF_NAME-$CI_BUILD_REF"<br>- sed -e "s/TAG/$CI_BUILD_REF_NAME-$CI_BUILD_REF/g" templates/deals.yaml | tee ".generated/deals.yaml"<br>- kubectl apply --namespace $NAMESPACE -f .generated/deals.yaml<br>- kubectl apply --namespace $NAMESPACE -f templates/my-sock-shop.yaml<br>environment:<br>name: test-for-ci</pre>
</details>
<p><br><br></p>
<h2>
<a id="-️54-parallelize-test-execution" class="anchor" href="#-%EF%B8%8F54-parallelize-test-execution" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️5.4 Parallelize test execution</h2>
<p>✅ <strong>Do:</strong> When done right, testing is your 24/7 friend providing almost instant feedback. In practice, executing 500 CPU-bounded unit test on a single thread can take too long. Luckily, modern test runners and CI platforms (like <a href="https://github.com/facebook/jest" rel="nofollow">Jest</a>, <a href="https://github.com/avajs/ava" rel="nofollow">AVA</a> and <a href="https://github.com/yandex/mocha-parallel-tests" rel="nofollow">Mocha extensions</a>) can parallelize the test into multiple processes and achieve significant improvement in feedback time. Some CI vendors do also parallelize tests across containers (!) which shortens the feedback loop even further. Whether locally over multiple processes, or over some cloud CLI using multiple machines — parallelizing demand keeping the tests autonomous as each might run on different processes</p>
<p>❌ <strong>Otherwise:</strong> Getting test results 1 hour long after pushing new code, as you already code the next features, is a great recipe for making testing less relevant</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-mocha-parallel--jest-easily-outrun-the-traditional-mocha-thanks-to-testing-parallelization-credit-javascript-test-runners-benchmark" class="anchor" href="#clap-doing-it-right-example-mocha-parallel--jest-easily-outrun-the-traditional-mocha-thanks-to-testing-parallelization-credit-javascript-test-runners-benchmark" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example: Mocha parallel &amp; Jest easily outrun the traditional Mocha thanks to testing parallelization (<a href="https://medium.com/dailyjs/javascript-test-runners-benchmark-3a78d4117b4" rel="nofollow">Credit: JavaScript Test-Runners Benchmark</a>)</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-24-yonigoldberg-jest-parallel.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-24-yonigoldberg-jest-parallel.png" alt="alt text" title="Mocha parallel &amp; Jest easily outrun the traditional Mocha thanks to testing parallelization (Credit: JavaScript Test-Runners Benchmark)" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️55-stay-away-from-legal-issues-using-license-and-plagiarism-check" class="anchor" href="#-%EF%B8%8F55-stay-away-from-legal-issues-using-license-and-plagiarism-check" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️5.5 Stay away from legal issues using license and plagiarism check</h2>
<p>✅ <strong>Do:</strong> Licensing and plagiarism issues are probably not your main concern right now, but why not tick this box as well in 10 minutes? A bunch of npm packages like <a href="https://www.npmjs.com/package/license-checker" rel="nofollow">license check</a> and <a href="https://www.npmjs.com/package/plagiarism-checker" rel="nofollow">plagiarism check</a> (commercial with free plan) can be easily baked into your CI pipeline and inspect for sorrows like dependencies with restrictive licenses or code that was copy-pasted from Stack Overflow and apparently violates some copyrights</p>
<p>❌ <strong>Otherwise:</strong> Unintentionally, developers might use packages with inappropriate licenses or copy paste commercial code and run into legal issues</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-doing-it-right-example-1" class="anchor" href="#clap-doing-it-right-example-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Doing It Right Example:</h3>
<pre lang="javascript" class="highlight-javascript"><span class="c1">//install license-checker in your CI environment or also locally</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">-</span><span class="nx">g</span> <span class="nx">license</span><span class="o">-</span><span class="nx">checker</span>

<span class="c1">//ask it to scan all licenses and fail with exit code other than 0 if it found unauthorized license. The CI system should catch this failure and stop the build</span>
<span class="nx">license</span><span class="o">-</span><span class="nx">checker</span> <span class="o">--</span><span class="nx">summary</span> <span class="o">--</span><span class="nx">failOn</span> <span class="nx">BSD</span>

</pre>
<br>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-25-nodejs-licsense.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-25-nodejs-licsense.png" alt="alt text" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️56-constantly-inspect-for-vulnerable-dependencies" class="anchor" href="#-%EF%B8%8F56-constantly-inspect-for-vulnerable-dependencies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️5.6 Constantly inspect for vulnerable dependencies</h2>
<p>✅ <strong>Do:</strong> Even the most reputable dependencies such as Express have known vulnerabilities. This can get easily tamed using community tools such as <a href="https://docs.npmjs.com/getting-started/running-a-security-audit" rel="nofollow">npm audit</a>, or commercial tools like <a href="https://snyk.io/" rel="nofollow">snyk</a> (offer also a free community version). Both can be invoked from your CI on every build</p>
<p>❌ <strong>Otherwise:</strong> Keeping your code clean from vulnerabilities without dedicated tools will require to constantly follow online publications about new threats. Quite tedious</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-example-npm-audit-result" class="anchor" href="#clap-example-npm-audit-result" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Example: NPM Audit result</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-26-npm-audit-snyk.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-26-npm-audit-snyk.png" alt="alt text" title="NPM Audit result" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️57-automate-dependency-updates" class="anchor" href="#-%EF%B8%8F57-automate-dependency-updates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️5.7 Automate dependency updates</h2>
<p>✅ <strong>Do:</strong> Yarn and npm latest introduction of package-lock.json introduced a serious challenge (the road to hell is paved with good intentions) — by default now, packages are no longer getting updates. Even a team running many fresh deployments with ‘npm install’ &amp; ‘npm update’ won’t get any new updates. This leads to subpar dependent packages versions at best or to vulnerable code at worst. Teams now rely on developers goodwill and memory to manually update the package.json or use tools <a href="https://www.npmjs.com/package/npm-check-updates" rel="nofollow">like ncu</a> manually. A more reliable way could be to automate the process of getting the most reliable dependency versions, though there are no silver bullet solutions yet there are two possible automation roads:</p>
<p>(1) CI can fail builds that have obsolete dependencies — using tools like <a href="https://docs.npmjs.com/cli/outdated" rel="nofollow">‘npm outdated’</a> or ‘npm-check-updates (ncu)’ . Doing so will enforce developers to update dependencies.</p>
<p>(2) Use commercial tools that scan the code and automatically send pull requests with updated dependencies. One interesting question remaining is what should be the dependency update policy — updating on every patch generates too many overhead, updating right when a major is released might point to an unstable version (many packages found vulnerable on the very first days after being released, <a href="https://nodesource.com/blog/a-high-level-post-mortem-of-the-eslint-scope-security-incident/" rel="nofollow">see the</a> eslint-scope incident).</p>
<p>An efficient update policy may allow some ‘vesting period’ — let the code lag behind the <a href="https://github.com/latest" class="user-mention" rel="nofollow">@latest</a> for some time and versions before considering the local copy as obsolete (e.g. local version is 1.3.1 and repository version is 1.3.8)
<br></p>
<p>❌ <strong>Otherwise:</strong> Your production will run packages that have been explicitly tagged by their author as risky</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-example-ncu-can-be-used-manually-or-within-a-ci-pipeline-to-detect-to-which-extent-the-code-lag-behind-the-latest-versions" class="anchor" href="#clap-example-ncu-can-be-used-manually-or-within-a-ci-pipeline-to-detect-to-which-extent-the-code-lag-behind-the-latest-versions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Example: <a href="https://www.npmjs.com/package/npm-check-updates" rel="nofollow">ncu</a> can be used manually or within a CI pipeline to detect to which extent the code lag behind the latest versions</h3>
<p><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-27-yoni-goldberg-npm.png" target="_blank" rel="nofollow"><img src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-27-yoni-goldberg-npm.png" alt="alt text" title="ncu can be used manually or within a CI pipeline to detect to which extent the code lag behind the latest versions" style="max-width:100%;"></a></p>
</details>
<p><br><br></p>
<h2>
<a id="-️-58-other-non-node-related-ci-tips" class="anchor" href="#-%EF%B8%8F-58-other-non-node-related-ci-tips" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 5.8 Other, non-Node related, CI tips</h2>
<p>✅ <strong>Do:</strong> This post is focused on testing advice that is related to, or at least can be exemplified with Node JS. This bullet, however, groups few non-Node related tips that are well-known</p>
 <ol>
<li name="e3e4">Use a declarative syntax. This is the only option for most vendors but older versions of Jenkins allows using code or UI</li>
<li name="1fdc">Opt for a vendor that has native Docker support</li>
<li name="edcd">Fail early, run your fastest tests first. Create a ‘Smoke testing’ step/milestone that groups multiple fast inspections (e.g. linting, unit tests) and provide snappy feedback to the code committer</li>
<li name="0375">Make it easy to skim-through all build artifacts including test reports, coverage reports, mutation reports, logs, etc</li>
<li name="df82">Create multiple pipelines/jobs for each event, reuse steps between them. For example, configure a job for feature branch commits and a different one for master PR. Let each reuse logic using shared steps (most vendors provide some mechanism for code reuse)</li>
<li name="19b0">Never embed secrets in a job declaration, grab them from a secret store or from the job’s configuration</li>
<li name="b70d">Explicitly bump version in a release build or at least ensure the developer did so</li>
<li name="957c">Build only once and perform all the inspections over the single build artifact (e.g. Docker image)</li>
<li name="339b">Test in an ephemeral environment that doesn’t drift state between builds. Caching node_modules might be the only exception</li>
</ol>
<br>
<p>❌ <strong>Otherwise:</strong> You‘ll miss years of wisdom</p>
<p><br><br></p>
<h2>
<a id="-️-59-build-matrix-run-the-same-ci-steps-using-multiple-node-versions" class="anchor" href="#-%EF%B8%8F-59-build-matrix-run-the-same-ci-steps-using-multiple-node-versions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>⚪ ️ 5.9 Build matrix: Run the same CI steps using multiple Node versions</h2>
<p>✅ <strong>Do:</strong> Quality checking is about serendipity, the more ground you cover the luckier you get in detecting issues early. When developing reusable packages or running a multi-customer production with various configuration and Node versions, the CI must run the pipeline of tests over all the permutations of configurations. For example, assuming we use MySQL for some customers and Postgres for others — some CI vendors support a feature called ‘Matrix’ which allow running the suit of testing against all permutations of MySQL, Postgres and multiple Node version like 8, 9 and 10. This is done using configuration only without any additional effort (assuming you have testing or any other quality checks). Other CIs who doesn’t support Matrix might have extensions or tweaks to allow that
<br></p>
<p>❌ <strong>Otherwise:</strong> So after doing all that hard work of writing testing are we going to let bugs sneak in only because of configuration issues?</p>
<br>
<details><summary>✏ <b>Code Examples</b></summary>
<br>
<h3>
<a id="clap-example-using-travis-ci-vendor-build-definition-to-run-the-same-test-over-multiple-node-versions" class="anchor" href="#clap-example-using-travis-ci-vendor-build-definition-to-run-the-same-test-over-multiple-node-versions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>👏 Example: Using Travis (CI vendor) build definition to run the same test over multiple Node versions</h3>
<pre name="f909">language: node_js<br>node_js:<br>  - "7"<br>  - "6"<br>  - "5"<br>  - "4"<br>install:<br>  - npm install<br>script:<br>  - npm run test</pre>
</details>
<p><br><br></p>
<h1>
<a id="team" class="anchor" href="#team" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Team</h1>
<h2>
<a id="yoni-goldberg" class="anchor" href="#yoni-goldberg" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Yoni Goldberg</h2>
<br>
<a href="https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/yoni-goldberg.jpg" target="_blank" rel="nofollow"><img width="480px" src="https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/yoni-goldberg.jpg" style="max-width:100%;"></a>
<br>
<p><strong>Role:</strong> Writer</p>
<p><strong>About:</strong> I'm an independent consultant who works with Fortune 500 companies and garage startups on polishing their JS &amp; Node.js applications. More than any other topic I'm fascinated by and aims to master the art of testing. I'm also the author of <a href="https://github.com/goldbergyoni/nodebestpractices" rel="nofollow">Node.js Best Practices</a></p>
<p><strong>📗 Online Course:</strong> Liked this guide and wish to take your testing skills to the extreme? Consider visiting my comprehensive course <a href="https://www.testjavascript.com" rel="nofollow">Testing Node.js &amp; JavaScript From A To Z</a></p>
<br>
<p><strong>Follow:</strong></p>
<ul>
<li><a href="https://twitter.com/goldbergyoni/" rel="nofollow">🐦 Twitter</a></li>
<li><a href="https://testjavascript.com/contact-2/" rel="nofollow">📞 Contact</a></li>
<li><a href="https://testjavascript.com/newsletter//" rel="nofollow">✉️ Newsletter</a></li>
</ul>
<br>
<hr>
<br>
<h2>
<a id="bruno-scheufler" class="anchor" href="#bruno-scheufler" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://github.com/BrunoScheufler" rel="nofollow">Bruno Scheufler</a>
</h2>
<p><strong>Role:</strong> Tech reviewer and advisor</p>
<p>Took care to revise, improve, lint and polish all the texts</p>
<p><strong>About:</strong> full-stack web engineer, Node.js &amp; GraphQL enthusiast</p>
<hr>
<br>
<h2>
<a id="ido-richter" class="anchor" href="#ido-richter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://github.com/idori" rel="nofollow">Ido Richter</a>
</h2>
<p><strong>Role:</strong> Concept, design and great advice</p>
<p><strong>About:</strong> A savvy frontend developer, CSS expert and emojis freak</p>
<h2>
<a id="kyle-martin" class="anchor" href="#kyle-martin" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://github.com/js-kyle" rel="nofollow">Kyle Martin</a>
</h2>
<p><strong>Role:</strong> Helps keep this project running, and reviews security related practices</p>
<p><strong>About:</strong> Loves working on Node.js projects and web application security.</p>
<h2>
<a id="contributors-" class="anchor" href="#contributors-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributors ✨</h2>
<p>Thanks goes to these wonderful people who have contributed to this repository!</p>



<table>
  <tr>
    <td align="center">
<a href="http://geospatialscott.blogspot.com/" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/1326248?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Scott Davis</b></sub></a><br><a href="#content-stdavis" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/AdrienRedon" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/5978436?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Adrien REDON</b></sub></a><br><a href="#content-AdrienRedon" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://twitter.com/NoriSte" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/173663?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Stefano Magni</b></sub></a><br><a href="#content-NoriSte" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://www.joer.im" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/47742486?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Yeoh Joer</b></sub></a><br><a href="#content-yjoer" title="Content">🖋</a>
</td>
    <td align="center">
<a href="http://jhonnymoreira.dev" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/2177742?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Jhonny Moreira</b></sub></a><br><a href="#content-jhonnymoreira" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/Germanika" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/8846678?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Ian Germann</b></sub></a><br><a href="#content-Germanika" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/AbdelrahmanHafez" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/19984935?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Hafez</b></sub></a><br><a href="#content-AbdelrahmanHafez" title="Content">🖋</a>
</td>
  </tr>
  <tr>
    <td align="center">
<a href="http://www.ruxandrafediuc.com" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/11021586?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Ruxandra Fediuc</b></sub></a><br><a href="#content-ruxandrafed" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/jacklee814" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/9951291?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Jack</b></sub></a><br><a href="#content-jacklee814" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://www.petercarrero.com" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/231727?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Peter Carrero</b></sub></a><br><a href="#content-aloyr" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/huhgawz" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/369338?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Huhgawz</b></sub></a><br><a href="#content-huhgawz" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/haakonmb" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/7099302?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Haakon Borch</b></sub></a><br><a href="#content-haakonmb" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://jaimemendoza.com/" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/5395811?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Jaime Mendoza</b></sub></a><br><a href="#content-jaimemendozadev" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/camerondunford" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/840612?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Cameron Dunford</b></sub></a><br><a href="#content-camerondunford" title="Content">🖋</a>
</td>
  </tr>
  <tr>
    <td align="center">
<a href="https://github.com/shadowspawn" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/15719847?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>John Gee</b></sub></a><br><a href="#content-shadowspawn" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/aurelijusrozenas" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/3273544?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Aurelijus Rožėnas</b></sub></a><br><a href="#content-aurelijusrozenas" title="Content">🖋</a>
</td>
    <td align="center">
<a href="http://aaronshivers.com" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/42848750?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Aaron</b></sub></a><br><a href="#content-aaronshivers" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://tomdoes.tech/" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/8683577?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Tom Nagle</b></sub></a><br><a href="#content-tomanagle" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/yvesyao" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/7723729?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Yves yao</b></sub></a><br><a href="#content-yvesyao" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/Userbit" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/34487074?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Userbit</b></sub></a><br><a href="#content-Userbit" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://glaucialemos.netlify.com/" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/1631477?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Glaucia Lemos</b></sub></a><br><a href="#maintenance-glaucia86" title="Maintenance">🚧</a>
</td>
  </tr>
  <tr>
    <td align="center">
<a href="https://twitter.com/koooge" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/7419215?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>koooge</b></sub></a><br><a href="#content-koooge" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://twitter.com/michalbiesiada" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/18367606?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Michal</b></sub></a><br><a href="#content-mbiesiad" title="Content">🖋</a>
</td>
    <td align="center">
<a href="http://roywalker.me" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/611846?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>roywalker</b></sub></a><br><a href="#content-roywalker" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://dangen-effy.github.io/" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/23185799?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>dangen</b></sub></a><br><a href="#content-dangen-effy" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://dev.to/mbiesiad" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/60202305?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>biesiadamich</b></sub></a><br><a href="#content-biesiadamich" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://tarojsx.github.io" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/127009?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Yanlin Jiang</b></sub></a><br><a href="#content-cncolder" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/sanguino" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/2077168?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>sanguino</b></sub></a><br><a href="#content-sanguino" title="Content">🖋</a>
</td>
  </tr>
  <tr>
    <td align="center">
<a href="https://github.com/MorganGeek" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/3721240?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Morgan</b></sub></a><br><a href="#content-MorganGeek" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://luk4s.dev" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/8350985?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Lukas Bischof</b></sub></a><br><a href="https://github.com/goldbergyoni/javascript-testing-best-practices/commits?author=lukasbischof" title="Tests" rel="nofollow">⚠️</a> <a href="#content-lukasbischof" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://juanmaruiz.surge.sh" rel="nofollow"><img src="https://avatars2.githubusercontent.com/u/1837650?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>JuanMa Ruiz</b></sub></a><br><a href="#content-JuanMaRuiz" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://luisangelorjr.com.br" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/22268900?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Luís Ângelo Rodrigues Jr.</b></sub></a><br><a href="#content-luisangelorjr" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://jfernandezpe.wordpress.com/" rel="nofollow"><img src="https://avatars0.githubusercontent.com/u/12046620?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>José Fernández</b></sub></a><br><a href="#content-jfernandezpe" title="Content">🖋</a>
</td>
    <td align="center">
<a href="http://www.linkedin.com/in/AlejandroGutierrezB" rel="nofollow"><img src="https://avatars3.githubusercontent.com/u/56408597?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Alejandro Gutierrez Barcenilla</b></sub></a><br><a href="#content-AlejandroGutierrezB" title="Content">🖋</a>
</td>
    <td align="center">
<a href="https://github.com/jasonandmonte" rel="nofollow"><img src="https://avatars1.githubusercontent.com/u/30088000?v=4" width="100px;" alt="" style="max-width:100%;"><br><sub><b>Jason</b></sub></a><br><a href="#content-jasonandmonte" title="Content">🖋</a>
</td>
  </tr>
</table>


<script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript">(function(){window['__CF$cv$params']={r:'6120bd59ce7fe738',m:'67ae09a3d2be318af2ccb128b37bf3b74ff25760-1610725692-1800-AQe54xBO+143mrOgo4LDVU6TbqfgmDUoJlltxTjrpmKgP2/9M27agwNbQGuBKocn699VKr0fV2FknWu0gyiud13n7lp+BbIF6C6bsmvZSnNoaJo0cDlQstnqdw6V0ilAlXhKOMlHPbChUvl9oEwX5RqPJVaAFtaXLGgNq5YWSTC5KbEzKBR7vTsKG6uv0sj3cg==',s:[0xfadaddec53,0xbc1dbc5d7c],}})();</script></body></html>
</div><div><br/><div style="border:1px solid gray;border-radius:5px;background-color:lightgray;padding:2%"><div style="font-size:24px;font-weight:bold;margin-bottom:10px">Get A Weekly Email With Trending Projects For These Topics</div><div style="margin-bottom:10px">No Spam.  Unsubscribe easily at any time.</div><div><div><input type="checkbox" name="topics" value="javascript"/> <!-- -->javascript<!-- --> (<!-- -->67,310<!-- -->) </div><div><input type="checkbox" name="topics" value="react"/> <!-- -->react<!-- --> (<!-- -->5,029<!-- -->) </div><div><input type="checkbox" name="topics" value="nodejs"/> <!-- -->nodejs<!-- --> (<!-- -->3,563<!-- -->) </div><div><input type="checkbox" name="topics" value="angular"/> <!-- -->angular<!-- --> (<!-- -->1,234<!-- -->) </div><div><input type="checkbox" name="topics" value="testing"/> <!-- -->testing<!-- --> (<!-- -->909<!-- -->) </div><div><input type="checkbox" name="topics" value="express"/> <!-- -->express<!-- --> (<!-- -->463<!-- -->) </div><div><input type="checkbox" name="topics" value="jest"/> <!-- -->jest<!-- --> (<!-- -->260<!-- -->) </div><div><input type="checkbox" name="topics" value="ci"/> <!-- -->ci<!-- --> (<!-- -->222<!-- -->) </div><div><input type="checkbox" name="topics" value="test"/> <!-- -->test<!-- --> (<!-- -->196<!-- -->) </div><div><input type="checkbox" name="topics" value="mocha"/> <!-- -->mocha<!-- --> (<!-- -->90<!-- -->) </div><div><input type="checkbox" name="topics" value="integration-testing"/> <!-- -->integration-testing<!-- --> (<!-- -->60<!-- -->) </div><div><input type="checkbox" name="topics" value="cicd"/> <!-- -->cicd<!-- --> (<!-- -->54<!-- -->) </div><div><input type="checkbox" name="topics" value="unittest"/> <!-- -->unittest<!-- --> (<!-- -->43<!-- -->) </div><div><input type="checkbox" name="topics" value="e2e-tests"/> <!-- -->e2e-tests<!-- --> (<!-- -->34<!-- -->) </div><div><input type="checkbox" name="topics" value="chai"/> <!-- -->chai<!-- --> (<!-- -->25<!-- -->) </div><div><input type="checkbox" name="topics" value="mutation-testing"/> <!-- -->mutation-testing<!-- --> (<!-- -->21<!-- -->) </div><div><input type="checkbox" name="topics" value="e2e"/> <!-- -->e2e<!-- --> (<!-- -->20<!-- -->) </div></div><div><input type="email" style="width:95%;margin-top:10px;margin-bottom:10px;padding:5px;font-size:20px;border-radius:5px" name="email" placeholder="Your email address"/></div><div><input type="submit" style="color:white;background-color:#0366d6;font-size:20px;border:1px solid black;border-radius:5px;padding:5px;cursor:pointer" value="Subscribe"/></div></div></div><h2>Find Open Source By Browsing 7,000 Topics Across 59 Categories</h2><div class="aos_topics_sidebar" style="margin:0;width:100%"><div class="category_topic_filter_container"><input style="width:100%" placeholder="Search, browse and combine topics" value="" class="aos_filter_topics_input"/></div><div style="display:block;box-shadow:1px 1px 5px lightgray"><a data-category-name="Advertising" href="https://awesomeopensource.com/categories/advertising"><div class="aos_category_explorer_category_container" data-category-name="Advertising"><span data-category-name="Advertising">Advertising<span data-category-name="Advertising" class="aos_project_count"> 📦 <!-- -->10</span></span></div></a><a data-category-name="All Projects" href="https://awesomeopensource.com/projects"><div class="aos_category_explorer_category_container" data-category-name="All Projects"><span data-category-name="All Projects">All Projects</span></div></a><a data-category-name="Application Programming Interfaces" href="https://awesomeopensource.com/categories/application-programming-interfaces"><div class="aos_category_explorer_category_container" data-category-name="Application Programming Interfaces"><span data-category-name="Application Programming Interfaces">Application Programming Interfaces<span data-category-name="Application Programming Interfaces" class="aos_project_count"> 📦 <!-- -->124</span></span></div></a><a data-category-name="Applications" href="https://awesomeopensource.com/categories/applications"><div class="aos_category_explorer_category_container" data-category-name="Applications"><span data-category-name="Applications">Applications<span data-category-name="Applications" class="aos_project_count"> 📦 <!-- -->192</span></span></div></a><a data-category-name="Artificial Intelligence" href="https://awesomeopensource.com/categories/artificial-intelligence"><div class="aos_category_explorer_category_container" data-category-name="Artificial Intelligence"><span data-category-name="Artificial Intelligence">Artificial Intelligence<span data-category-name="Artificial Intelligence" class="aos_project_count"> 📦 <!-- -->78</span></span></div></a><a data-category-name="Blockchain" href="https://awesomeopensource.com/categories/blockchain"><div class="aos_category_explorer_category_container" data-category-name="Blockchain"><span data-category-name="Blockchain">Blockchain<span data-category-name="Blockchain" class="aos_project_count"> 📦 <!-- -->73</span></span></div></a><a data-category-name="Build Tools" href="https://awesomeopensource.com/categories/build-tools"><div class="aos_category_explorer_category_container" data-category-name="Build Tools"><span data-category-name="Build Tools">Build Tools<span data-category-name="Build Tools" class="aos_project_count"> 📦 <!-- -->113</span></span></div></a><a data-category-name="Cloud Computing" href="https://awesomeopensource.com/categories/cloud-computing"><div class="aos_category_explorer_category_container" data-category-name="Cloud Computing"><span data-category-name="Cloud Computing">Cloud Computing<span data-category-name="Cloud Computing" class="aos_project_count"> 📦 <!-- -->80</span></span></div></a><a data-category-name="Code Quality" href="https://awesomeopensource.com/categories/code-quality"><div class="aos_category_explorer_category_container" data-category-name="Code Quality"><span data-category-name="Code Quality">Code Quality<span data-category-name="Code Quality" class="aos_project_count"> 📦 <!-- -->28</span></span></div></a><a data-category-name="Collaboration" href="https://awesomeopensource.com/categories/collaboration"><div class="aos_category_explorer_category_container" data-category-name="Collaboration"><span data-category-name="Collaboration">Collaboration<span data-category-name="Collaboration" class="aos_project_count"> 📦 <!-- -->32</span></span></div></a><a data-category-name="Command Line Interface" href="https://awesomeopensource.com/categories/command-line-interface"><div class="aos_category_explorer_category_container" data-category-name="Command Line Interface"><span data-category-name="Command Line Interface">Command Line Interface<span data-category-name="Command Line Interface" class="aos_project_count"> 📦 <!-- -->49</span></span></div></a><a data-category-name="Community" href="https://awesomeopensource.com/categories/community"><div class="aos_category_explorer_category_container" data-category-name="Community"><span data-category-name="Community">Community<span data-category-name="Community" class="aos_project_count"> 📦 <!-- -->83</span></span></div></a><a data-category-name="Companies" href="https://awesomeopensource.com/categories/companies"><div class="aos_category_explorer_category_container" data-category-name="Companies"><span data-category-name="Companies">Companies<span data-category-name="Companies" class="aos_project_count"> 📦 <!-- -->60</span></span></div></a><a data-category-name="Compilers" href="https://awesomeopensource.com/categories/compilers"><div class="aos_category_explorer_category_container" data-category-name="Compilers"><span data-category-name="Compilers">Compilers<span data-category-name="Compilers" class="aos_project_count"> 📦 <!-- -->63</span></span></div></a><a data-category-name="Computer Science" href="https://awesomeopensource.com/categories/computer-science"><div class="aos_category_explorer_category_container" data-category-name="Computer Science"><span data-category-name="Computer Science">Computer Science<span data-category-name="Computer Science" class="aos_project_count"> 📦 <!-- -->80</span></span></div></a><a data-category-name="Configuration Management" href="https://awesomeopensource.com/categories/configuration-management"><div class="aos_category_explorer_category_container" data-category-name="Configuration Management"><span data-category-name="Configuration Management">Configuration Management<span data-category-name="Configuration Management" class="aos_project_count"> 📦 <!-- -->42</span></span></div></a><a data-category-name="Content Management" href="https://awesomeopensource.com/categories/content-management"><div class="aos_category_explorer_category_container" data-category-name="Content Management"><span data-category-name="Content Management">Content Management<span data-category-name="Content Management" class="aos_project_count"> 📦 <!-- -->175</span></span></div></a><a data-category-name="Control Flow" href="https://awesomeopensource.com/categories/control-flow"><div class="aos_category_explorer_category_container" data-category-name="Control Flow"><span data-category-name="Control Flow">Control Flow<span data-category-name="Control Flow" class="aos_project_count"> 📦 <!-- -->213</span></span></div></a><a data-category-name="Data Formats" href="https://awesomeopensource.com/categories/data-formats"><div class="aos_category_explorer_category_container" data-category-name="Data Formats"><span data-category-name="Data Formats">Data Formats<span data-category-name="Data Formats" class="aos_project_count"> 📦 <!-- -->78</span></span></div></a><a data-category-name="Data Processing" href="https://awesomeopensource.com/categories/data-processing"><div class="aos_category_explorer_category_container" data-category-name="Data Processing"><span data-category-name="Data Processing">Data Processing<span data-category-name="Data Processing" class="aos_project_count"> 📦 <!-- -->276</span></span></div></a><a data-category-name="Data Storage" href="https://awesomeopensource.com/categories/data-storage"><div class="aos_category_explorer_category_container" data-category-name="Data Storage"><span data-category-name="Data Storage">Data Storage<span data-category-name="Data Storage" class="aos_project_count"> 📦 <!-- -->135</span></span></div></a><a data-category-name="Economics" href="https://awesomeopensource.com/categories/economics"><div class="aos_category_explorer_category_container" data-category-name="Economics"><span data-category-name="Economics">Economics<span data-category-name="Economics" class="aos_project_count"> 📦 <!-- -->64</span></span></div></a><a data-category-name="Frameworks" href="https://awesomeopensource.com/categories/frameworks"><div class="aos_category_explorer_category_container" data-category-name="Frameworks"><span data-category-name="Frameworks">Frameworks<span data-category-name="Frameworks" class="aos_project_count"> 📦 <!-- -->215</span></span></div></a><a data-category-name="Games" href="https://awesomeopensource.com/categories/games"><div class="aos_category_explorer_category_container" data-category-name="Games"><span data-category-name="Games">Games<span data-category-name="Games" class="aos_project_count"> 📦 <!-- -->129</span></span></div></a><a data-category-name="Graphics" href="https://awesomeopensource.com/categories/graphics"><div class="aos_category_explorer_category_container" data-category-name="Graphics"><span data-category-name="Graphics">Graphics<span data-category-name="Graphics" class="aos_project_count"> 📦 <!-- -->110</span></span></div></a><a data-category-name="Hardware" href="https://awesomeopensource.com/categories/hardware"><div class="aos_category_explorer_category_container" data-category-name="Hardware"><span data-category-name="Hardware">Hardware<span data-category-name="Hardware" class="aos_project_count"> 📦 <!-- -->152</span></span></div></a><a data-category-name="Integrated Development Environments" href="https://awesomeopensource.com/categories/integrated-development-environments"><div class="aos_category_explorer_category_container" data-category-name="Integrated Development Environments"><span data-category-name="Integrated Development Environments">Integrated Development Environments<span data-category-name="Integrated Development Environments" class="aos_project_count"> 📦 <!-- -->49</span></span></div></a><a data-category-name="Learning Resources" href="https://awesomeopensource.com/categories/learning-resources"><div class="aos_category_explorer_category_container" data-category-name="Learning Resources"><span data-category-name="Learning Resources">Learning Resources<span data-category-name="Learning Resources" class="aos_project_count"> 📦 <!-- -->166</span></span></div></a><a data-category-name="Legal" href="https://awesomeopensource.com/categories/legal"><div class="aos_category_explorer_category_container" data-category-name="Legal"><span data-category-name="Legal">Legal<span data-category-name="Legal" class="aos_project_count"> 📦 <!-- -->29</span></span></div></a><a data-category-name="Libraries" href="https://awesomeopensource.com/categories/libraries"><div class="aos_category_explorer_category_container" data-category-name="Libraries"><span data-category-name="Libraries">Libraries<span data-category-name="Libraries" class="aos_project_count"> 📦 <!-- -->129</span></span></div></a><a data-category-name="Lists Of Projects" href="https://awesomeopensource.com/categories/lists-of-projects"><div class="aos_category_explorer_category_container" data-category-name="Lists Of Projects"><span data-category-name="Lists Of Projects">Lists Of Projects<span data-category-name="Lists Of Projects" class="aos_project_count"> 📦 <!-- -->22</span></span></div></a><a data-category-name="Machine Learning" href="https://awesomeopensource.com/categories/machine-learning"><div class="aos_category_explorer_category_container" data-category-name="Machine Learning"><span data-category-name="Machine Learning">Machine Learning<span data-category-name="Machine Learning" class="aos_project_count"> 📦 <!-- -->347</span></span></div></a><a data-category-name="Mapping" href="https://awesomeopensource.com/categories/mapping"><div class="aos_category_explorer_category_container" data-category-name="Mapping"><span data-category-name="Mapping">Mapping<span data-category-name="Mapping" class="aos_project_count"> 📦 <!-- -->64</span></span></div></a><a data-category-name="Marketing" href="https://awesomeopensource.com/categories/marketing"><div class="aos_category_explorer_category_container" data-category-name="Marketing"><span data-category-name="Marketing">Marketing<span data-category-name="Marketing" class="aos_project_count"> 📦 <!-- -->15</span></span></div></a><a data-category-name="Mathematics" href="https://awesomeopensource.com/categories/mathematics"><div class="aos_category_explorer_category_container" data-category-name="Mathematics"><span data-category-name="Mathematics">Mathematics<span data-category-name="Mathematics" class="aos_project_count"> 📦 <!-- -->55</span></span></div></a><a data-category-name="Media" href="https://awesomeopensource.com/categories/media"><div class="aos_category_explorer_category_container" data-category-name="Media"><span data-category-name="Media">Media<span data-category-name="Media" class="aos_project_count"> 📦 <!-- -->239</span></span></div></a><a data-category-name="Messaging" href="https://awesomeopensource.com/categories/messaging"><div class="aos_category_explorer_category_container" data-category-name="Messaging"><span data-category-name="Messaging">Messaging<span data-category-name="Messaging" class="aos_project_count"> 📦 <!-- -->98</span></span></div></a><a data-category-name="Networking" href="https://awesomeopensource.com/categories/networking"><div class="aos_category_explorer_category_container" data-category-name="Networking"><span data-category-name="Networking">Networking<span data-category-name="Networking" class="aos_project_count"> 📦 <!-- -->315</span></span></div></a><a data-category-name="Operating Systems" href="https://awesomeopensource.com/categories/operating-systems"><div class="aos_category_explorer_category_container" data-category-name="Operating Systems"><span data-category-name="Operating Systems">Operating Systems<span data-category-name="Operating Systems" class="aos_project_count"> 📦 <!-- -->89</span></span></div></a><a data-category-name="Operations" href="https://awesomeopensource.com/categories/operations"><div class="aos_category_explorer_category_container" data-category-name="Operations"><span data-category-name="Operations">Operations<span data-category-name="Operations" class="aos_project_count"> 📦 <!-- -->121</span></span></div></a><a data-category-name="Package Managers" href="https://awesomeopensource.com/categories/package-managers"><div class="aos_category_explorer_category_container" data-category-name="Package Managers"><span data-category-name="Package Managers">Package Managers<span data-category-name="Package Managers" class="aos_project_count"> 📦 <!-- -->55</span></span></div></a><a data-category-name="Programming Languages" href="https://awesomeopensource.com/categories/programming-languages"><div class="aos_category_explorer_category_container" data-category-name="Programming Languages"><span data-category-name="Programming Languages">Programming Languages<span data-category-name="Programming Languages" class="aos_project_count"> 📦 <!-- -->245</span></span></div></a><a data-category-name="Runtime Environments" href="https://awesomeopensource.com/categories/runtime-environments"><div class="aos_category_explorer_category_container" data-category-name="Runtime Environments"><span data-category-name="Runtime Environments">Runtime Environments<span data-category-name="Runtime Environments" class="aos_project_count"> 📦 <!-- -->100</span></span></div></a><a data-category-name="Science" href="https://awesomeopensource.com/categories/science"><div class="aos_category_explorer_category_container" data-category-name="Science"><span data-category-name="Science">Science<span data-category-name="Science" class="aos_project_count"> 📦 <!-- -->42</span></span></div></a><a data-category-name="Security" href="https://awesomeopensource.com/categories/security"><div class="aos_category_explorer_category_container" data-category-name="Security"><span data-category-name="Security">Security<span data-category-name="Security" class="aos_project_count"> 📦 <!-- -->396</span></span></div></a><a data-category-name="Social Media" href="https://awesomeopensource.com/categories/social-media"><div class="aos_category_explorer_category_container" data-category-name="Social Media"><span data-category-name="Social Media">Social Media<span data-category-name="Social Media" class="aos_project_count"> 📦 <!-- -->27</span></span></div></a><a data-category-name="Software Architecture" href="https://awesomeopensource.com/categories/software-architecture"><div class="aos_category_explorer_category_container" data-category-name="Software Architecture"><span data-category-name="Software Architecture">Software Architecture<span data-category-name="Software Architecture" class="aos_project_count"> 📦 <!-- -->72</span></span></div></a><a data-category-name="Software Development" href="https://awesomeopensource.com/categories/software-development"><div class="aos_category_explorer_category_container" data-category-name="Software Development"><span data-category-name="Software Development">Software Development<span data-category-name="Software Development" class="aos_project_count"> 📦 <!-- -->72</span></span></div></a><a data-category-name="Software Performance" href="https://awesomeopensource.com/categories/software-performance"><div class="aos_category_explorer_category_container" data-category-name="Software Performance"><span data-category-name="Software Performance">Software Performance<span data-category-name="Software Performance" class="aos_project_count"> 📦 <!-- -->58</span></span></div></a><a data-category-name="Software Quality" href="https://awesomeopensource.com/categories/software-quality"><div class="aos_category_explorer_category_container" data-category-name="Software Quality"><span data-category-name="Software Quality">Software Quality<span data-category-name="Software Quality" class="aos_project_count"> 📦 <!-- -->133</span></span></div></a><a data-category-name="Text Editors" href="https://awesomeopensource.com/categories/text-editors"><div class="aos_category_explorer_category_container" data-category-name="Text Editors"><span data-category-name="Text Editors">Text Editors<span data-category-name="Text Editors" class="aos_project_count"> 📦 <!-- -->49</span></span></div></a><a data-category-name="Text Processing" href="https://awesomeopensource.com/categories/text-processing"><div class="aos_category_explorer_category_container" data-category-name="Text Processing"><span data-category-name="Text Processing">Text Processing<span data-category-name="Text Processing" class="aos_project_count"> 📦 <!-- -->136</span></span></div></a><a data-category-name="User Interface" href="https://awesomeopensource.com/categories/user-interface"><div class="aos_category_explorer_category_container" data-category-name="User Interface"><span data-category-name="User Interface">User Interface<span data-category-name="User Interface" class="aos_project_count"> 📦 <!-- -->330</span></span></div></a><a data-category-name="User Interface Components" href="https://awesomeopensource.com/categories/user-interface-components"><div class="aos_category_explorer_category_container" data-category-name="User Interface Components"><span data-category-name="User Interface Components">User Interface Components<span data-category-name="User Interface Components" class="aos_project_count"> 📦 <!-- -->514</span></span></div></a><a data-category-name="Version Control" href="https://awesomeopensource.com/categories/version-control"><div class="aos_category_explorer_category_container" data-category-name="Version Control"><span data-category-name="Version Control">Version Control<span data-category-name="Version Control" class="aos_project_count"> 📦 <!-- -->30</span></span></div></a><a data-category-name="Virtualization" href="https://awesomeopensource.com/categories/virtualization"><div class="aos_category_explorer_category_container" data-category-name="Virtualization"><span data-category-name="Virtualization">Virtualization<span data-category-name="Virtualization" class="aos_project_count"> 📦 <!-- -->71</span></span></div></a><a data-category-name="Web Browsers" href="https://awesomeopensource.com/categories/web-browsers"><div class="aos_category_explorer_category_container" data-category-name="Web Browsers"><span data-category-name="Web Browsers">Web Browsers<span data-category-name="Web Browsers" class="aos_project_count"> 📦 <!-- -->42</span></span></div></a><a data-category-name="Web Servers" href="https://awesomeopensource.com/categories/web-servers"><div class="aos_category_explorer_category_container" data-category-name="Web Servers"><span data-category-name="Web Servers">Web Servers<span data-category-name="Web Servers" class="aos_project_count"> 📦 <!-- -->26</span></span></div></a><a data-category-name="Web User Interface" href="https://awesomeopensource.com/categories/web-user-interface"><div class="aos_category_explorer_category_container" data-category-name="Web User Interface"><span data-category-name="Web User Interface">Web User Interface<span data-category-name="Web User Interface" class="aos_project_count"> 📦 <!-- -->210</span></span></div></a></div></div><div class="aos_project_metadata_trademark_notice">&quot;<!-- -->Javascript <!-- -->Testing <!-- -->Best <!-- -->Practices<!-- -->&quot; and other potentially trademarked words, copyrighted images and copyrighted readme contents likely belong to the legal entity who owns the &quot;<a href="https://github.com/goldbergyoni" target="_blank">Goldbergyoni</a>&quot; organization.  Awesome Open Source is not affiliated with the legal entity who owns the &quot;<a href="https://github.com/goldbergyoni" target="_blank">Goldbergyoni</a>&quot; organization.</div></div></div><div class="aos_fixed_footer_container"><br/></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Root" data-dom-id="Root-react-component-085a3912-c9e3-4bb5-9490-bbccae8118e0">{"topics":[{"id":null,"name":"javascript","count":67310},{"id":null,"name":"python","count":49729},{"id":null,"name":"java","count":30048},{"id":null,"name":"c-plus-plus","count":17339},{"id":null,"name":"php","count":15812},{"id":null,"name":"c","count":14340},{"id":null,"name":"go","count":14132},{"id":null,"name":"ruby","count":12268},{"id":null,"name":"c-sharp","count":11505},{"id":null,"name":"objective-c","count":10769}],"projectTopics":[{"id":null,"name":"angular","count":1234},{"id":null,"name":"chai","count":25},{"id":null,"name":"ci","count":222},{"id":null,"name":"cicd","count":54},{"id":null,"name":"e2e","count":20},{"id":null,"name":"e2e-tests","count":34},{"id":null,"name":"express","count":463},{"id":null,"name":"integration-testing","count":60},{"id":null,"name":"javascript","count":67310},{"id":null,"name":"jest","count":260},{"id":null,"name":"mocha","count":90},{"id":null,"name":"mutation-testing","count":21},{"id":null,"name":"nodejs","count":3563},{"id":null,"name":"react","count":5029},{"id":null,"name":"test","count":196},{"id":null,"name":"testing","count":909},{"id":null,"name":"unittest","count":43}],"selectedTopics":[],"currentUrl":"https://awesomeopensource.com/project/goldbergyoni/javascript-testing-best-practices","projects":[],"project":{"id":247926,"created_at":"2019-09-15T18:04:43.019Z","updated_at":"2021-01-14T07:28:02.901Z","markdown_readme":"\u003c!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"\u003e\n\u003chtml\u003e\u003cbody\u003e\n\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/jtbp-header-blue.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/jtbp-header-blue.png\" width=\"1920px\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003cbr\u003e\n\u003ch1\u003e\n\u003ca id=\"-why-this-guide-can-take-your-testing-skills-to-the-next-level\" class=\"anchor\" href=\"#-why-this-guide-can-take-your-testing-skills-to-the-next-level\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👇 Why this guide can take your testing skills to the next level\u003c/h1\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-45-best-practices-super-comprehensive-and-exhaustive\" class=\"anchor\" href=\"#-45-best-practices-super-comprehensive-and-exhaustive\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e📗 45+ best practices: Super-comprehensive and exhaustive\u003c/h2\u003e\n\u003cp\u003eThis is a guide for JavaScript \u0026amp; Node.js reliability from A-Z. It summarizes and curates for you dozens of the best blog posts, books and tools the market has to offer\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-advanced-goes-10000-miles-beyond-the-basics\" class=\"anchor\" href=\"#-advanced-goes-10000-miles-beyond-the-basics\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e🚢 Advanced: Goes 10,000 miles beyond the basics\u003c/h2\u003e\n\u003cp\u003eHop into a journey that travels way beyond the basics into advanced topics like testing in production, mutation testing, property-based testing and many other strategic \u0026amp; professional tools. Should you read every word in this guide your testing skills are likely to go way above the average\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-full-stack-front-backend-ci-anything\" class=\"anchor\" href=\"#-full-stack-front-backend-ci-anything\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e🌐 Full-stack: front, backend, CI, anything\u003c/h2\u003e\n\u003cp\u003eStart by understanding the ubiquitous testing practices that are the foundation for any application tier. Then, delve into your area of choice: frontend/UI, backend, CI or maybe all of them?\u003c/p\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"written-by-yoni-goldberg\" class=\"anchor\" href=\"#written-by-yoni-goldberg\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eWritten By Yoni Goldberg\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eA JavaScript \u0026amp; Node.js consultant\u003c/li\u003e\n\u003cli\u003e📗 \u003ca href=\"https://www.testjavascript.com\" rel=\"nofollow\"\u003eTesting Node.js \u0026amp; JavaScript From A To Z\u003c/a\u003e - My comprehensive online course with more than \u003ca href=\"https://www.testjavascript.com\" rel=\"nofollow\"\u003e10 hours of video\u003c/a\u003e, 14 test types and more than 40 best practices\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/goldbergyoni/\" rel=\"nofollow\"\u003eFollow me on Twitter \u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"translations---read-in-your-own-language\" class=\"anchor\" href=\"#translations---read-in-your-own-language\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTranslations - read in your own language\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e🇨🇳\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-zh-CN.md\" rel=\"nofollow\"\u003eChinese\u003c/a\u003e - Courtesy of \u003ca href=\"https://github.com/yvesyao\" rel=\"nofollow\"\u003eYves yao\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e🇰🇷\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme.kr.md\" rel=\"nofollow\"\u003eKorean\u003c/a\u003e - Courtesy of \u003ca href=\"https://github.com/ragubyun\" rel=\"nofollow\"\u003eRain Byun\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e🇵🇱\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-pl.md\" rel=\"nofollow\"\u003ePolish\u003c/a\u003e - Courtesy of \u003ca href=\"https://github.com/mbiesiad\" rel=\"nofollow\"\u003eMichal Biesiada\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e🇪🇸\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-es.md\" rel=\"nofollow\"\u003eSpanish\u003c/a\u003e - Courtesy of \u003ca href=\"https://github.com/sanguino\" rel=\"nofollow\"\u003eMiguel G. Sanguino\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e🇧🇷\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/readme-pt-br.md\" rel=\"nofollow\"\u003ePortuguese-BR\u003c/a\u003e - Courtesy of \u003ca href=\"https://github.com/iagocavalcante\" rel=\"nofollow\"\u003eIago Angelim Costa Cavalcante\u003c/a\u003e , \u003ca href=\"https://github.com/DouglasMV\" rel=\"nofollow\"\u003eDouglas Mariano Valero\u003c/a\u003e and \u003ca href=\"https://github.com/koooge\" rel=\"nofollow\"\u003ekoooge\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003eWant to translate to your own language? please open an issue 💜\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"table-of-contents\" class=\"anchor\" href=\"#table-of-contents\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eTable of Contents\u003c/code\u003e\n\u003c/h2\u003e\n\u003ch4\u003e\n\u003ca id=\"section-0-the-golden-rule\" class=\"anchor\" href=\"#section-0-the-golden-rule\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"#section-0%EF%B8%8F%E2%83%A3-the-golden-rule\"\u003e\u003ccode\u003eSection 0: The Golden Rule\u003c/code\u003e\u003c/a\u003e\n\u003c/h4\u003e\n\u003cp\u003eA single advice that inspires all the others (1 special bullet)\u003c/p\u003e\n\u003ch4\u003e\n\u003ca id=\"section-1-the-test-anatomy\" class=\"anchor\" href=\"#section-1-the-test-anatomy\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"#section-1-the-test-anatomy-1\"\u003e\u003ccode\u003eSection 1: The Test Anatomy\u003c/code\u003e\u003c/a\u003e\n\u003c/h4\u003e\n\u003cp\u003eThe foundation - structuring clean tests (12 bullets)\u003c/p\u003e\n\u003ch4\u003e\n\u003ca id=\"section-2-backend\" class=\"anchor\" href=\"#section-2-backend\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"#section-2%EF%B8%8F%E2%83%A3-backend-testing\"\u003e\u003ccode\u003eSection 2: Backend\u003c/code\u003e\u003c/a\u003e\n\u003c/h4\u003e\n\u003cp\u003eWriting backend and Microservices tests efficiently (8 bullets)\u003c/p\u003e\n\u003ch4\u003e\n\u003ca id=\"section-3-frontend\" class=\"anchor\" href=\"#section-3-frontend\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"#section-3%EF%B8%8F%E2%83%A3-frontend-testing\"\u003e\u003ccode\u003eSection 3: Frontend\u003c/code\u003e\u003c/a\u003e\n\u003c/h4\u003e\n\u003cp\u003eWriting tests for web UI including component and E2E tests (11 bullets)\u003c/p\u003e\n\u003ch4\u003e\n\u003ca id=\"section-4-measuring-tests-effectiveness\" class=\"anchor\" href=\"#section-4-measuring-tests-effectiveness\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"#section-4%EF%B8%8F%E2%83%A3-measuring-test-effectiveness\"\u003e\u003ccode\u003eSection 4: Measuring Tests Effectiveness\u003c/code\u003e\u003c/a\u003e\n\u003c/h4\u003e\n\u003cp\u003eWatching the watchman - measuring test quality (4 bullets)\u003c/p\u003e\n\u003ch4\u003e\n\u003ca id=\"section-5-continuous-integration\" class=\"anchor\" href=\"#section-5-continuous-integration\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"#section-5%EF%B8%8F%E2%83%A3-ci-and-other-quality-measures\"\u003e\u003ccode\u003eSection 5: Continuous Integration\u003c/code\u003e\u003c/a\u003e\n\u003c/h4\u003e\n\u003cp\u003eGuidelines for CI in the JS world (9 bullets)\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"section-0️⃣-the-golden-rule\" class=\"anchor\" href=\"#section-0%EF%B8%8F%E2%83%A3-the-golden-rule\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSection 0️⃣: The Golden Rule\u003c/h1\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"️-0-the-golden-rule-design-for-lean-testing\" class=\"anchor\" href=\"#%EF%B8%8F-0-the-golden-rule-design-for-lean-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪️ 0 The Golden Rule: Design for lean testing\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e\nTesting code is not like production-code - design it to be dead-simple, short, abstraction-free, flat, delightful to work with, lean. One should look at a test and get the intent instantly.\u003c/p\u003e\n\u003cp\u003eOur minds are full with the main production code, we don't have 'headspace' for additional complexity. Should we try to squeeze yet another challenging code into our poor brain it will slow the team down which works against the reason we do testing. Practically this is where many teams just abandon testing.\u003c/p\u003e\n\u003cp\u003eThe tests are an opportunity for something else - a friendly and smiley assistant, one that it's delightful to work with and delivers great value for such a small investment. Science tells us that we have two brain systems: system 1 is used for effortless activities like driving a car on an empty road and system 2 which is meant for complex and conscious operations like solving a math equation. Design your test for system 1, when looking at test code it should \u003cem\u003efeel\u003c/em\u003e as easy as modifying an HTML document and not like solving 2X(17 × 24).\u003c/p\u003e\n\u003cp\u003eThis can be achieved by selectively cherry-picking techniques, tools and test targets that are cost-effective and provide great ROI. Test only as much as needed, strive to keep it nimble, sometimes it's even worth dropping some tests and trade reliability for agility and simplicity.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/headspace.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/headspace.png\" alt=\"alt text\" title=\"We have no head room for additional complexity\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMost of the advice below are derivatives of this principle.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"ready-to-start\" class=\"anchor\" href=\"#ready-to-start\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eReady to start?\u003c/h3\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"section-1-the-test-anatomy-1\" class=\"anchor\" href=\"#section-1-the-test-anatomy-1\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSection 1: The Test Anatomy\u003c/h1\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-11-include-3-parts-in-each-test-name\" class=\"anchor\" href=\"#-%EF%B8%8F-11-include-3-parts-in-each-test-name\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.1 Include 3 parts in each test name\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e A test report should tell whether the current application revision satisfies the requirements for the people who are not necessarily familiar with the code: the tester, the DevOps engineer who is deploying and the future you two years from now. This can be achieved best if the tests speak at the requirements level and include 3 parts:\u003c/p\u003e\n\u003cp\u003e(1) What is being tested? For example, the ProductsService.addNewProduct method\u003c/p\u003e\n\u003cp\u003e(2) Under what circumstances and scenario? For example, no price is passed to the method\u003c/p\u003e\n\u003cp\u003e(3) What is the expected result? For example, the new product is not approved\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e A deployment just failed, a test named “Add product” failed. Does this tell you what exactly is malfunctioning?\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e\u003cstrong\u003e👇 Note:\u003c/strong\u003e Each bullet has code examples and sometime also an image illustration. Click to expand\n\u003cbr\u003e\u003c/p\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-a-test-name-that-constitutes-3-parts\" class=\"anchor\" href=\"#clap-doing-it-right-example-a-test-name-that-constitutes-3-parts\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: A test name that constitutes 3 parts\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Using Mocha to illustrate the idea\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e//1. unit under test\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Products Service'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'Add new product'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//2. scenario and 3. expectation\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'When no price is specified, then the product status is pending approval'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003enewProduct\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProductService\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nx\"\u003eadd\u003c/span\u003e\u003cspan class=\"p\"\u003e(...);\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eequal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'pendingApproval'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-a-test-name-that-constitutes-3-parts-1\" class=\"anchor\" href=\"#clap-doing-it-right-example-a-test-name-that-constitutes-3-parts-1\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: A test name that constitutes 3 parts\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-1-3-parts.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-1-3-parts.jpeg\" alt=\"alt text\" title=\"A test name that constitutes 3 parts\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e© \u003cb\u003eCredits \u0026amp; read-more\u003c/b\u003e\u003c/summary\u003e\n  1. \u003ca href=\"https://osherove.com/blog/2005/4/3/naming-standards-for-unit-tests.html\" rel=\"nofollow\"\u003eRoy Osherove - Naming standards for unit tests\u003c/a\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-12-structure-tests-by-the-aaa-pattern\" class=\"anchor\" href=\"#-%EF%B8%8F-12-structure-tests-by-the-aaa-pattern\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.2 Structure tests by the AAA pattern\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Structure your tests with 3 well-separated sections Arrange, Act \u0026amp; Assert (AAA). Following this structure guarantees that the reader spends no brain-CPU on understanding the test plan:\u003c/p\u003e\n\u003cp\u003e1st A - Arrange: All the setup code to bring the system to the scenario the test aims to simulate. This might include instantiating the unit under test constructor, adding DB records, mocking/stubbing on objects and any other preparation code\u003c/p\u003e\n\u003cp\u003e2nd A - Act: Execute the unit under test. Usually 1 line of code\u003c/p\u003e\n\u003cp\u003e3rd A - Assert: Ensure that the received value satisfies the expectation. Usually 1 line of code\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Not only do you spend hours understanding the main code, but what should have been the simplest part of the day (testing) stretches your brain\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-a-test-structured-with-the-aaa-pattern\" class=\"anchor\" href=\"#clap-doing-it-right-example-a-test-structured-with-the-aaa-pattern\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: A test structured with the AAA pattern\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e \u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Customer classifier\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When customer spent more than 500$, should be classified as premium\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//Arrange\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomerToClassify\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003espent\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e505\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ejoined\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDBStub\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esinon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003edataAccess\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"getCustomer\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003eclassification\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"regular\"\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//Act\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ereceivedClassification\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomerClassifier\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclassifyCustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ecustomerToClassify\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//Assert\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ereceivedClassification\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoMatch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"premium\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-no-separation-one-bulk-harder-to-interpret\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-no-separation-one-bulk-harder-to-interpret\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: No separation, one bulk, harder to interpret\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Should be classified as premium\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomerToClassify\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003espent\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e505\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ejoined\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eDate\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eDBStub\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esinon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estub\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003edataAccess\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"getCustomer\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003eclassification\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"regular\"\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ereceivedClassification\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ecustomerClassifier\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eclassifyCustomer\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ecustomerToClassify\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ereceivedClassification\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoMatch\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"premium\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️13-describe-expectations-in-a-product-language-use-bdd-style-assertions\" class=\"anchor\" href=\"#-%EF%B8%8F13-describe-expectations-in-a-product-language-use-bdd-style-assertions\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️1.3 Describe expectations in a product language: use BDD-style assertions\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Coding your tests in a declarative-style allows the reader to get the grab instantly without spending even a single brain-CPU cycle. When you write imperative code that is packed with conditional logic, the reader is forced to exert more brain-CPU cycles. In that case, code the expectation in a human-like language, declarative BDD style using \u003ccode\u003eexpect\u003c/code\u003e or \u003ccode\u003eshould\u003c/code\u003e and not using custom code. If Chai \u0026amp; Jest doesn't include the desired assertion and it’s highly repeatable, consider \u003ca href=\"https://jestjs.io/docs/en/expect#expectextendmatchers\" rel=\"nofollow\"\u003eextending Jest matcher (Jest)\u003c/a\u003e or writing a \u003ca href=\"https://www.chaijs.com/guide/plugins/\" rel=\"nofollow\"\u003ecustom Chai plugin\u003c/a\u003e\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e The team will write less tests and decorate the annoying ones with .skip()\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\u003cbr\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha \u0026amp; Chai\" style=\"max-width:100%;\"\u003e\u003c/a\u003e \u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-the-reader-must-skim-through-not-so-short-and-imperative-code-just-to-get-the-test-story\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-the-reader-must-skim-through-not-so-short-and-imperative-code-just-to-get-the-test-story\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: The reader must skim through not so short, and imperative code just to get the test story\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When asking for an admin, ensure only ordered admins in results\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//assuming we've added here two admins \"admin1\", \"admin2\" and \"user1\"\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eallAdmins\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003egetUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003eadminOnly\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eadmin1Found\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eadming2Found\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eallAdmins\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eforEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaSingleUser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaSingleUser\u003c/span\u003e \u003cspan class=\"o\"\u003e===\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"user1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003eassert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enotEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaSingleUser\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"user1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"A user was found and not admin\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaSingleUser\u003c/span\u003e \u003cspan class=\"o\"\u003e===\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"admin1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003eadmin1Found\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaSingleUser\u003c/span\u003e \u003cspan class=\"o\"\u003e===\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"admin2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003eadmin2Found\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003eadmin1Found\u003c/span\u003e \u003cspan class=\"o\"\u003e||\u003c/span\u003e \u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003eadmin2Found\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ethrow\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nb\"\u003eError\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Not all admins were returned\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-skimming-through-the-following-declarative-test-is-a-breeze\" class=\"anchor\" href=\"#clap-doing-it-right-example-skimming-through-the-following-declarative-test-is-a-breeze\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Skimming through the following declarative test is a breeze\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When asking for an admin, ensure only ordered admins in results\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//assuming we've added here two admins\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eallAdmins\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003egetUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003eadminOnly\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eallAdmins\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einclude\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eordered\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emembers\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"admin1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"admin2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebut\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einclude\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eordered\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emembers\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"user1\"\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-14-stick-to-black-box-testing-test-only-public-methods\" class=\"anchor\" href=\"#-%EF%B8%8F-14-stick-to-black-box-testing-test-only-public-methods\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.4 Stick to black-box testing: Test only public methods\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Testing the internals brings huge overhead for almost nothing. If your code/API delivers the right results, should you really invest your next 3 hours in testing HOW it worked internally and then maintain these fragile tests? Whenever a public behavior is checked, the private implementation is also implicitly tested and your tests will break only if there is a certain problem (e.g. wrong output). This approach is also referred to as \u003ccode\u003ebehavioral testing\u003c/code\u003e. On the other side, should you test the internals (white box approach) — your focus shifts from planning the component outcome to nitty-gritty details and your test might break because of minor code refactors although the results are fine - this dramatically increases the maintenance burden\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Your tests behave like the \u003ca href=\"https://en.wikipedia.org/wiki/The_Boy_Who_Cried_Wolf\" rel=\"nofollow\"\u003eboy who cried wolf\u003c/a\u003e: shouting false-positive cries (e.g., A test fails because a private variable name was changed). Unsurprisingly, people will soon start to ignore the CI notifications until someday, a real bug gets ignored…\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-a-test-case-is-testing-the-internals-for-no-good-reason\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-a-test-case-is-testing-the-internals-for-no-good-reason\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: A test case is testing the internals for no good reason\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha \u0026amp; Chai\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eProductService\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//this method is only used internally\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Change this name will make the tests fail\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecalculateVATAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003epriceWithoutVAT\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003efinalPrice\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003epriceWithoutVAT\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"mf\"\u003e1.2\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//Change the result format or key name above will make the tests fail\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//public method\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003egetPrice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eproductId\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003edesiredProduct\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eDB\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eproductId\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003efinalPrice\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecalculateVATAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003edesiredProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efinalPrice\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003efinalPrice\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"White-box test: When the internal methods get 0 vat, it return 0 response\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//There's no requirement to allow users to calculate the VAT, only show the final price. Nevertheless we falsely insist here to test the class internals\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProductService\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nx\"\u003ecalculateVATAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003efinalPrice\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eequal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-️15-choose-the-right-test-doubles-avoid-mocks-in-favor-of-stubs-and-spies\" class=\"anchor\" href=\"#-%EF%B8%8F-%EF%B8%8F15-choose-the-right-test-doubles-avoid-mocks-in-favor-of-stubs-and-spies\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ ️1.5 Choose the right test doubles: Avoid mocks in favor of stubs and spies\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Test doubles are a necessary evil because they are coupled to the application internals, yet some provide immense value (\u003ca href=\"https://martinfowler.com/articles/mocksArentStubs.html\" rel=\"nofollow\" target=\"_blank\"\u003e\u003c/a\u003e\u003ca href=\"https://martinfowler.com/articles/mocksArentStubs.html\" rel=\"nofollow\"\u003eRead here a reminder about test doubles: mocks vs stubs vs spies\u003c/a\u003e).\u003c/p\u003e\n\u003cp\u003eBefore using test doubles, ask a very simple question: Do I use it to test functionality that appears, or could appear, in the requirements document? If no, it’s a white-box testing smell.\u003c/p\u003e\n\u003cp\u003eFor example, if you want to test that your app behaves reasonably when the payment service is down, you might stub the payment service and trigger some ‘No Response’ return to ensure that the unit under test returns the right value. This checks our application behavior/response/outcome under certain scenarios. You might also use a spy to assert that an email was sent when that service is down — this is again a behavioral check which is likely to appear in a requirements doc (“Send an email if payment couldn’t be saved”). On the flip side, if you mock the Payment service and ensure that it was called with the right JavaScript types — then your test is focused on internal things that have nothing to do with the application functionality and are likely to change frequently\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Any refactoring of code mandates searching for all the mocks in the code and updating accordingly. Tests become a burden rather than a helpful friend\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-mocks-focus-on-the-internals\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-mocks-focus-on-the-internals\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-pattern example: Mocks focus on the internals\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Sinon-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Sinon-blue.svg\" alt=\"\" title=\"Examples with Sinon\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When a valid product is about to be deleted, ensure data access DAL was called once, with the right product and right config\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Assume we already added a product\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003edataAccessMock\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esinon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eDAL\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//hmmm BAD: testing the internals is actually our main goal here, not just a side-effect\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edataAccessMock\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eexpects\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"deleteProduct\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eonce\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ewithArgs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eDBConfig\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003etheProductWeJustAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProductService\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nx\"\u003edeletePrice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003etheProductWeJustAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edataAccessMock\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003everify\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clapdoing-it-right-example-spies-are-focused-on-testing-the-requirements-but-as-a-side-effect-are-unavoidably-touching-to-the-internals\" class=\"anchor\" href=\"#clapdoing-it-right-example-spies-are-focused-on-testing-the-requirements-but-as-a-side-effect-are-unavoidably-touching-to-the-internals\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏Doing It Right Example: spies are focused on testing the requirements but as a side-effect are unavoidably touching to the internals\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When a valid product is about to be deleted, ensure an email is sent\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Assume we already added here a product\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003espy\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esinon\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003espy\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eEmailer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eprototype\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"sendEmail\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003eProductService\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nx\"\u003edeletePrice\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003etheProductWeJustAdded\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//hmmm OK: we deal with internals? Yes, but as a side effect of testing the requirements (sending an email)\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003espy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecalledOnce\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-want-to-learn-all-these-practices-with-live-video\" class=\"anchor\" href=\"#-want-to-learn-all-these-practices-with-live-video\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e📗 Want to learn all these practices with live video?\u003c/h2\u003e\n\u003ch3\u003e\n\u003ca id=\"visit-my-online-course-testing-nodejs--javascript-from-a-to-z\" class=\"anchor\" href=\"#visit-my-online-course-testing-nodejs--javascript-from-a-to-z\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eVisit my online course \u003ca href=\"https://www.testjavascript.com\" rel=\"nofollow\"\u003eTesting Node.js \u0026amp; JavaScript From A To Z\u003c/a\u003e\n\u003c/h3\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️16-dont-foo-use-realistic-input-data\" class=\"anchor\" href=\"#-%EF%B8%8F16-dont-foo-use-realistic-input-data\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️1.6 Don’t “foo”, use realistic input data\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Often production bugs are revealed under some very specific and surprising input — the more realistic the test input is, the greater the chances are to catch bugs early. Use dedicated libraries like \u003ca href=\"https://www.npmjs.com/package/faker\" rel=\"nofollow\"\u003eFaker\u003c/a\u003e to generate pseudo-real data that resembles the variety and form of production data. For example, such libraries can generate realistic phone numbers, usernames, credit card, company names, and even ‘lorem ipsum’ text. You may also create some tests (on top of unit tests, not as a replacement) that randomize fakers data to stretch your unit under test or even import real data from your production environment. Want to take it to the next level? See the next bullet (property-based testing).\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e All your development testing will falsely show green when you use synthetic inputs like “Foo”, but then production might turn red when a hacker passes-in a nasty string like “\u003ca href=\"https://github.com/3e2ddsf\" class=\"user-mention\" rel=\"nofollow\"\u003e@3e2ddsf\u003c/a\u003e . ##’ 1 fdsfds . fds432 AAAA”\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-a-test-suite-that-passes-due-to-non-realistic-data\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-a-test-suite-that-passes-due-to-non-realistic-data\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: A test suite that passes due to non-realistic data\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddProduct\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eproductNameRegexNoSpace\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"sr\"\u003e/^\u003c/span\u003e\u003cspan class=\"se\"\u003e\\S\u003c/span\u003e\u003cspan class=\"sr\"\u003e*$/\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//no white-space allowed\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e!\u003c/span\u003e\u003cspan class=\"nx\"\u003eproductNameRegexNoSpace\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e//this path never reached due to dull input\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e//some logic here\u003c/span\u003e\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Wrong: When adding new product with valid properties, get successful confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//The string \"Foo\" which is used in all tests never triggers a false result\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddProductResult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Foo\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddProductResult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Positive-false: the operation succeeded because we never tried with long\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//product name including spaces\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clapdoing-it-right-example-randomizing-realistic-input\" class=\"anchor\" href=\"#clapdoing-it-right-example-randomizing-realistic-input\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏Doing It Right Example: Randomizing realistic input\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Better: When adding new valid product, get successful confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddProductResult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efaker\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecommerce\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eproductName\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"nx\"\u003efaker\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enumber\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Generated random input: {'Sleek Cotton Computer',  85481}\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddProductResult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Test failed, the random input triggered some path we never planned for.\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//We discovered a bug early!\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-17-test-many-input-combinations-using-property-based-testing\" class=\"anchor\" href=\"#-%EF%B8%8F-17-test-many-input-combinations-using-property-based-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.7 Test many input combinations using Property-based testing\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Typically we choose a few input samples for each test. Even when the input format resembles real-world data (see bullet ‘Don’t foo’), we cover only a few input combinations (method(‘’, true, 1), method(“string” , false” , 0)), However, in production, an API that is called with 5 parameters can be invoked with thousands of different permutations, one of them might render our process down (\u003ca href=\"https://en.wikipedia.org/wiki/Fuzzing\" rel=\"nofollow\"\u003esee Fuzz Testing\u003c/a\u003e). What if you could write a single test that sends 1000 permutations of different inputs automatically and catches for which input our code fails to return the right response? Property-based testing is a technique that does exactly that: by sending all the possible input combinations to your unit under test it increases the serendipity of finding a bug. For example, given a method — addNewProduct(id, name, isDiscount) — the supporting libraries will call this method with many combinations of (number, string, boolean) like (1, “iPhone”, false), (2, “Galaxy”, true). You can run property-based testing using your favorite test runner (Mocha, Jest, etc) using libraries like \u003ca href=\"https://github.com/jsverify/jsverify\" rel=\"nofollow\"\u003ejs-verify\u003c/a\u003e or \u003ca href=\"https://github.com/leebyron/testcheck-js\" rel=\"nofollow\"\u003etestcheck\u003c/a\u003e (much better documentation). Update: Nicolas Dubien suggests in the comments below to \u003ca href=\"https://github.com/dubzzz/fast-check#readme\" rel=\"nofollow\"\u003echeckout fast-check\u003c/a\u003e which seems to offer some additional features and also to be actively maintained\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Unconsciously, you choose the test inputs that cover only code paths that work well. Unfortunately, this decreases the efficiency of testing as a vehicle to expose bugs\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-testing-many-input-permutations-with-fast-check\" class=\"anchor\" href=\"#clap-doing-it-right-example-testing-many-input-permutations-with-fast-check\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Testing many input permutations with “fast-check”\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"nx\"\u003efc\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"fast-check\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Product service\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Adding new\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//this will run 100 times with different random properties\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Add new product with random yet valid properties, always successful\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003efc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eassert\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003efc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eproperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einteger\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"nx\"\u003efc\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e(),\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n          \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddNewProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003estatus\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"approved\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n      \u003cspan class=\"p\"\u003e));\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-18-if-needed-use-only-short--inline-snapshots\" class=\"anchor\" href=\"#-%EF%B8%8F-18-if-needed-use-only-short--inline-snapshots\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.8 If needed, use only short \u0026amp; inline snapshots\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e When there is a need for \u003ca href=\"https://jestjs.io/docs/en/snapshot-testing\" rel=\"nofollow\"\u003esnapshot testing\u003c/a\u003e, use only short and focused snapshots (i.e. 3-7 lines) that are included as part of the test (\u003ca href=\"https://jestjs.io/docs/en/snapshot-testing#inline-snapshots\" rel=\"nofollow\"\u003eInline Snapshot\u003c/a\u003e) and not within external files. Keeping this guideline will ensure your tests remain self-explanatory and less fragile.\u003c/p\u003e\n\u003cp\u003eOn the other hand, ‘classic snapshots’ tutorials and tools encourage to store big files (e.g. component rendering markup, API JSON result) over some external medium and ensure each time when the test run to compare the received result with the saved version. This, for example, can implicitly couple our test to 1000 lines with 3000 data values that the test writer never read and reasoned about. Why is this wrong? By doing so, there are 1000 reasons for your test to fail - it’s enough for a single line to change for the snapshot to get invalid and this is likely to happen a lot. How frequently? for every space, comment or minor CSS/HTML change. Not only this, the test name wouldn’t give a clue about the failure as it just checks that 1000 lines didn’t change, also it encourages to the test writer to accept as the desired true a long document he couldn’t inspect and verify. All of these are symptoms of obscure and eager test that is not focused and aims to achieve too much\u003c/p\u003e\n\u003cp\u003eIt’s worth noting that there are few cases where long \u0026amp; external snapshots are acceptable - when asserting on schema and not data (extracting out values and focusing on fields) or when the received document rarely changes\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e A UI test fails. The code seems right, the screen renders perfect pixels, what happened? your snapshot testing just found a difference from the origin document to current received one - a single space character was added to the markdown...\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-coupling-our-test-to-unseen-2000-lines-of-code\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-coupling-our-test-to-unseen-2000-lines-of-code\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: Coupling our test to unseen 2000 lines of code\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"TestJavaScript.com is renderd correctly\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Arrange\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e//Act\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ereceivedPage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erenderer\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eDisplayPage\u003c/span\u003e \u003cspan class=\"nx\"\u003epage\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"http://www.testjavascript.com\"\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eTest\u003c/span\u003e \u003cspan class=\"nx\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/DisplayPage\u0026gt;\u003c/span\u003e\u003cspan class=\"err\"\u003e)\n\u003c/span\u003e    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etoJSON\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e//Assert\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ereceivedPage\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoMatchSnapshot\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//We now implicitly maintain a 2000 lines long document\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//every additional line break or comment - will break this test\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-expectations-are-visible-and-focused\" class=\"anchor\" href=\"#clap-doing-it-right-example-expectations-are-visible-and-focused\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Expectations are visible and focused\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When visiting TestJavaScript.com home page, a menu is displayed\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Arrange\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e//Act\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ereceivedPage\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erenderer\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eDisplayPage\u003c/span\u003e \u003cspan class=\"nx\"\u003epage\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"http://www.testjavascript.com\"\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003eTest\u003c/span\u003e \u003cspan class=\"nx\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/DisplayPage\u0026gt;\u003c/span\u003e\u003cspan class=\"err\"\u003e)\n\u003c/span\u003e    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etoJSON\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e//Assert\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emenu\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ereceivedPage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtent\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003emenu\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003emenu\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoMatchInlineSnapshot\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\n\u0026lt;ul\u0026gt;\n\u0026lt;li\u0026gt;Home\u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt; About \u0026lt;/li\u0026gt;\n\u0026lt;li\u0026gt; Contact \u0026lt;/li\u0026gt;\n\u0026lt;/ul\u0026gt;\n`\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️19-avoid-global-test-fixtures-and-seeds-add-data-per-test\" class=\"anchor\" href=\"#-%EF%B8%8F19-avoid-global-test-fixtures-and-seeds-add-data-per-test\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️1.9 Avoid global test fixtures and seeds, add data per-test\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Going by the golden rule (bullet 0), each test should add and act on its own set of DB rows to prevent coupling and easily reason about the test flow. In reality, this is often violated by testers who seed the DB with data before running the tests (\u003ca href=\"https://en.wikipedia.org/wiki/Test_fixture\" rel=\"nofollow\"\u003ealso known as ‘test fixture’\u003c/a\u003e) for the sake of performance improvement. While performance is indeed a valid concern — it can be mitigated (see “Component testing” bullet), however, test complexity is a much painful sorrow that should govern other considerations most of the time. Practically, make each test case explicitly add the DB records it needs and act only on those records. If performance becomes a critical concern — a balanced compromise might come in the form of seeding the only suite of tests that are not mutating data (e.g. queries)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Few tests fail, a deployment is aborted, our team is going to spend precious time now, do we have a bug? let’s investigate, oh no — it seems that two tests were mutating the same seed data\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: tests are not independent and rely on some global hook to feed global DB data\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003ebefore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//adding sites and admins data to our DB. Where is the data? outside. At some external json or migration framework\u003c/span\u003e\n  \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eDB\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eAddSeedDataFromJson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'seed.json'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When updating site name, get successful confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//I know that site name \"portal\" exists - I saw it in the seed files\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esiteToUpdate\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetSiteByName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Portal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echangeName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esiteToUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"newName\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When querying by site name, get the right site\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//I know that site name \"portal\" exists - I saw it in the seed files\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esiteToCheck\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetSiteByName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Portal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esiteToCheck\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eequal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Portal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//Failure! The previous test change the name :[\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data\" class=\"anchor\" href=\"#clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: We can stay within the test, each test acts on its own set of data\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When updating site name, get successful confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//test is adding a fresh new records and acting on the records only\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esiteUnderTest\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddSite\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"siteForUpdateTest\"\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echangeName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esiteUnderTest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"newName\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-110-dont-catch-errors-expect-them\" class=\"anchor\" href=\"#-%EF%B8%8F-110-dont-catch-errors-expect-them\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.10 Don’t catch errors, expect them\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e When trying to assert that some input triggers an error, it might look right to use try-catch-finally and asserts that the catch clause was entered. The result is an awkward and verbose test case (example below) that hides the simple test intent and the result expectations\u003c/p\u003e\n\u003cp\u003eA more elegant alternative is the using the one-line dedicated Chai assertion: expect(method).to.throw (or in Jest: expect(method).toThrow()). It’s absolutely mandatory to also ensure the exception contains a property that tells the error type, otherwise given just a generic error the application won’t be able to do much rather than show a disappointing message to the user\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e It will be challenging to infer from the test reports (e.g. CI reports) what went wrong\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-a-long-test-case-that-tries-to-assert-the-existence-of-error-with-try-catch\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-a-long-test-case-that-tries-to-assert-the-existence-of-error-with-try-catch\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-pattern Example: A long test case that tries to assert the existence of error with try-catch\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When no product name, it throws error 400\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eerrorWeExceptFor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"k\"\u003etry\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddNewProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e({});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"k\"\u003ecatch\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecode\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eequal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"InvalidInput\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eerrorWeExceptFor\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eerror\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eerrorWeExceptFor\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003enot\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kc\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//if this assertion fails, the tests results/reports will only show\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//that some value is null, there won't be a word about a missing Exception\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-a-human-readable-expectation-that-could-be-understood-easily-maybe-even-by-qa-or-technical-pm\" class=\"anchor\" href=\"#clap-doing-it-right-example-a-human-readable-expectation-that-could-be-understood-easily-maybe-even-by-qa-or-technical-pm\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: A human-readable expectation that could be understood easily, maybe even by QA or technical PM\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When no product name, it throws error 400\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddNewProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e({}))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eeventually\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"k\"\u003ethrow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eAppError\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kd\"\u003ewith\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eproperty\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"code\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"InvalidInput\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-111-tag-your-tests\" class=\"anchor\" href=\"#-%EF%B8%8F-111-tag-your-tests\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.11 Tag your tests\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Different tests must run on different scenarios: quick smoke, IO-less, tests should run when a developer saves or commits a file, full end-to-end tests usually run when a new pull request is submitted, etc. This can be achieved by tagging tests with keywords like #cold #api #sanity so you can grep with your testing harness and invoke the desired subset. For example, this is how you would invoke only the sanity test group with Mocha: mocha — grep ‘sanity’\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Running all the tests, including tests that perform dozens of DB queries, any time a developer makes a small change can be extremely slow and keeps developers away from running tests\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-tagging-tests-as-cold-test-allows-the-test-runner-to-execute-only-fast-tests-coldquick-tests-that-are-doing-no-io-and-can-be-executed-frequently-even-as-the-developer-is-typing\" class=\"anchor\" href=\"#clap-doing-it-right-example-tagging-tests-as-cold-test-allows-the-test-runner-to-execute-only-fast-tests-coldquick-tests-that-are-doing-no-io-and-can-be-executed-frequently-even-as-the-developer-is-typing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Tagging tests as ‘#cold-test’ allows the test runner to execute only fast tests (Cold===quick tests that are doing no IO and can be executed frequently even as the developer is typing)\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e//this test is fast (no DB) and we're tagging it correspondigly\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//now the user/CI can run it frequently\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Order service\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Add new order #cold-test #sanity\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Scenario - no currency was supplied. Expectation - Use the default currency #sanity\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"c1\"\u003e//code logic here\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-112-categorize-tests-under-at-least-2-levels\" class=\"anchor\" href=\"#-%EF%B8%8F-112-categorize-tests-under-at-least-2-levels\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 1.12 Categorize tests under at least 2 levels\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Apply some structure to your test suite so an occasional visitor could easily understand the requirements (tests are the best documentation) and the various scenarios that are being tested. A common method for this is by placing at least 2 'describe' blocks above your tests: the 1st is for the name of the unit under test and the 2nd for additional level of categorization like the scenario or custom categories (see code examples and print screen below). Doing so will also greatly improve the test reports: The reader will easily infer the tests categories, delve into the desired section and correlate failing tests. In addition, it will get much easier for a developer to navigate through the code of a suite with many tests. There are multiple alternative structures for test suite that you may consider like \u003ca href=\"https://github.com/searls/jasmine-given\" rel=\"nofollow\"\u003egiven-when-then\u003c/a\u003e and \u003ca href=\"https://github.com/ericelliott/riteway\" rel=\"nofollow\"\u003eRITE\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e When looking at a report with flat and long list of tests, the reader have to skim-read through long texts to conclude the major scenarios and correlate the commonality of failing tests. Consider the following case: When 7/100 tests fail, looking at a flat list will demand reading the failing tests text to see how they relate to each other. However, in a hierarchical report all of them could be under the same flow or category and the reader will quickly infer what or at least where is the root failure cause\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-structuring-suite-with-the-name-of-unit-under-test-and-scenarios-will-lead-to-the-convenient-report-that-is-shown-below\" class=\"anchor\" href=\"#clap-doing-it-right-example-structuring-suite-with-the-name-of-unit-under-test-and-scenarios-will-lead-to-the-convenient-report-that-is-shown-below\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Structuring suite with the name of unit under test and scenarios will lead to the convenient report that is shown below\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// Unit under test\u003c/span\u003e\n\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Transfer service\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//Scenario\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When no credit\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e//Expectation\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Then the response status should decline\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{});\u003c/span\u003e\n\n    \u003cspan class=\"c1\"\u003e//Expectation\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Then it should send email to admin\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{});\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/hierarchical-report.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/hierarchical-report.png\" alt=\"alt text\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-a-flat-list-of-tests-will-make-it-harder-for-the-reader-to-identify-the-user-stories-and-correlate-failing-tests\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-a-flat-list-of-tests-will-make-it-harder-for-the-reader-to-identify-the-user-stories-and-correlate-failing-tests\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-pattern Example: A flat list of tests will make it harder for the reader to identify the user stories and correlate failing tests\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Mocha\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Then the response status should decline\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{});\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Then it should send email\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{});\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Then there should not be a new transfer record\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/flat-report.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/flat-report.png\" alt=\"alt text\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️113-other-generic-good-testing-hygiene\" class=\"anchor\" href=\"#-%EF%B8%8F113-other-generic-good-testing-hygiene\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️1.13 Other generic good testing hygiene\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e This post is focused on testing advice that is related to, or at least can be exemplified with Node JS. This bullet, however, groups few non-Node related tips that are well-known\u003c/p\u003e\n\u003cp\u003eLearn and practice \u003ca href=\"https://www.sm-cloud.com/book-review-test-driven-development-by-example-a-tldr/\" rel=\"nofollow\"\u003eTDD principles\u003c/a\u003e — they are extremely valuable for many but don’t get intimidated if they don’t fit your style, you’re not the only one. Consider writing the tests before the code in a \u003ca href=\"https://blog.cleancoder.com/uncle-bob/2014/12/17/TheCyclesOfTDD.html\" rel=\"nofollow\"\u003ered-green-refactor style\u003c/a\u003e, ensure each test checks exactly one thing, when you find a bug — before fixing write a test that will detect this bug in the future, let each test fail at least once before turning green, start a module by writing a quick and simplistic code that satisfies the test - then refactor gradually and take it to a production grade level, avoid any dependency on the environment (paths, OS, etc)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e You‘ll miss pearls of wisdom that were collected for decades\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"section-2️⃣-backend-testing\" class=\"anchor\" href=\"#section-2%EF%B8%8F%E2%83%A3-backend-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSection 2️⃣: Backend Testing\u003c/h1\u003e\n\u003ch2\u003e\n\u003ca id=\"-️21-enrich-your-testing-portfolio-look-beyond-unit-tests-and-the-pyramid\" class=\"anchor\" href=\"#-%EF%B8%8F21-enrich-your-testing-portfolio-look-beyond-unit-tests-and-the-pyramid\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️2.1 Enrich your testing portfolio: Look beyond unit tests and the pyramid\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e The \u003ca href=\"https://martinfowler.com/bliki/TestPyramid.html\" rel=\"nofollow\"\u003etesting pyramid\u003c/a\u003e, though 10\u0026gt; years old, is a great and relevant model that suggests three testing types and influences most developers’ testing strategy. At the same time, more than a handful of shiny new testing techniques emerged and are hiding in the shadows of the testing pyramid. Given all the dramatic changes that we’ve seen in the recent 10 years (Microservices, cloud, serverless), is it even possible that one quite-old model will suit \u003cem\u003eall\u003c/em\u003e types of applications? shouldn’t the testing world consider welcoming new testing techniques?\u003c/p\u003e\n\u003cp\u003eDon’t get me wrong, in 2019 the testing pyramid, TDD and unit tests are still a powerful technique and are probably the best match for many applications. Only like any other model, despite its usefulness, \u003ca href=\"https://en.wikipedia.org/wiki/All_models_are_wrong\" rel=\"nofollow\"\u003eit must be wrong sometimes\u003c/a\u003e. For example, consider an IoT application that ingests many events into a message-bus like Kafka/RabbitMQ, which then flow into some data-warehouse and are eventually queried by some analytics UI. Should we really spend 50% of our testing budget on writing unit tests for an application that is integration-centric and has almost no logic? As the diversity of application types increase (bots, crypto, Alexa-skills) greater are the chances to find scenarios where the testing pyramid is not the best match.\u003c/p\u003e\n\u003cp\u003eIt’s time to enrich your testing portfolio and become familiar with more testing types (the next bullets suggest few ideas), mind models like the testing pyramid but also match testing types to real-world problems that you’re facing (‘Hey, our API is broken, let’s write consumer-driven contract testing!’), diversify your tests like an investor that build a portfolio based on risk analysis — assess where problems might arise and match some prevention measures to mitigate those potential risks\u003c/p\u003e\n\u003cp\u003eA word of caution: the TDD argument in the software world takes a typical false-dichotomy face, some preach to use it everywhere, others think it’s the devil. Everyone who speaks in absolutes is wrong :]\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e You’re going to miss some tools with amazing ROI, some like Fuzz, lint, and mutation can provide value in 10 minutes\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-cindy-sridharan-suggests-a-rich-testing-portfolio-in-her-amazing-post-testing-microservicesthe-same-way\" class=\"anchor\" href=\"#clap-doing-it-right-example-cindy-sridharan-suggests-a-rich-testing-portfolio-in-her-amazing-post-testing-microservicesthe-same-way\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Cindy Sridharan suggests a rich testing portfolio in her amazing post ‘Testing Microservices — the same way’\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-12-rich-testing.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-12-rich-testing.jpeg\" alt=\"alt text\" title=\"Cindy Sridharan suggests a rich testing portfolio in her amazing post ‘Testing Microservices — the sane way’\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e☺️Example: \u003c/strong\u003e\u003ca href=\"https://www.youtube.com/watch?v=-2zP494wdUY\u0026amp;feature=youtube\" rel=\"nofollow\" target=\"_blank\"\u003e\u003c/a\u003e\u003ca href=\"https://www.youtube.com/watch?v=-2zP494wdUY\u0026amp;feature=youtu.be\" rel=\"nofollow\"\u003eYouTube: “Beyond Unit Tests: 5 Shiny Node.JS Test Types (2018)” (Yoni Goldberg)\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-12-Yoni-Goldberg-Testing.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-12-Yoni-Goldberg-Testing.jpeg\" alt=\"alt text\" title=\"A test name that constitutes 3 parts\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️22-component-testing-might-be-your-best-affair\" class=\"anchor\" href=\"#-%EF%B8%8F22-component-testing-might-be-your-best-affair\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️2.2 Component testing might be your best affair\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Each unit test covers a tiny portion of the application and it’s expensive to cover the whole, whereas end-to-end testing easily covers a lot of ground but is flaky and slower, why not apply a balanced approach and write tests that are bigger than unit tests but smaller than end-to-end testing? Component testing is the unsung song of the testing world — they provide the best from both worlds: reasonable performance and a possibility to apply TDD patterns + realistic and great coverage.\u003c/p\u003e\n\u003cp\u003eComponent tests focus on the Microservice ‘unit’, they work against the API, don’t mock anything which belongs to the Microservice itself (e.g. real DB, or at least the in-memory version of that DB) but stub anything that is external like calls to other Microservices. By doing so, we test what we deploy, approach the app from outwards to inwards and gain great confidence in a reasonable amount of time.\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e You may spend long days on writing unit tests to find out that you got only 20% system coverage\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-supertest-allows-approaching-express-api-in-process-fast-and-cover-many-layers\" class=\"anchor\" href=\"#clap-doing-it-right-example-supertest-allows-approaching-express-api-in-process-fast-and-cover-many-layers\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Supertest allows approaching Express API in-process (fast and cover many layers)\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-13-component-test-yoni-goldberg.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-13-component-test-yoni-goldberg.png\" alt=\"alt text\" title=\" [Supertest](https://www.npmjs.com/package/supertest) allows approaching Express API in-process (fast and cover many layers)\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️23-ensure-new-releases-dont-break-the-api-using-contract-tests\" class=\"anchor\" href=\"#-%EF%B8%8F23-ensure-new-releases-dont-break-the-api-using-contract-tests\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️2.3 Ensure new releases don’t break the API using contract tests\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e So your Microservice has multiple clients, and you run multiple versions of the service for compatibility reasons (keeping everyone happy). Then you change some field and ‘boom!’, some important client who relies on this field is angry. This is the Catch-22 of the integration world: It’s very challenging for the server side to consider all the multiple client expectations — On the other hand, the clients can’t perform any testing because the server controls the release dates. \u003ca href=\"https://docs.pact.io/\" rel=\"nofollow\"\u003eConsumer-driven contracts and the framework PACT\u003c/a\u003e were born to formalize this process with a very disruptive approach — not the server defines the test plan of itself rather the client defines the tests of the… server! PACT can record the client expectation and put in a shared location, “broker”, so the server can pull the expectations and run on every build using PACT library to detect broken contracts — a client expectation that is not met. By doing so, all the server-client API mismatches are caught early during build/CI and might save you a great deal of frustration\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e The alternatives are exhausting manual testing or deployment fear\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example\" class=\"anchor\" href=\"#clap-doing-it-right-example\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example:\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20PACT-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20PACT-blue.svg\" alt=\"\" title=\"Examples with PACT\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-14-testing-best-practices-contract-flow.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-14-testing-best-practices-contract-flow.png\" alt=\"alt text\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-24-test-your-middlewares-in-isolation\" class=\"anchor\" href=\"#-%EF%B8%8F-24-test-your-middlewares-in-isolation\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 2.4 Test your middlewares in isolation\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Many avoid Middleware testing because they represent a small portion of the system and require a live Express server. Both reasons are wrong — Middlewares are small but affect all or most of the requests and can be tested easily as pure functions that get {req,res} JS objects. To test a middleware function one should just invoke it and spy (\u003ca href=\"https://www.npmjs.com/package/sinon\" rel=\"nofollow\"\u003eusing Sinon for example\u003c/a\u003e) on the interaction with the {req,res} objects to ensure the function performed the right action. The library \u003ca href=\"https://www.npmjs.com/package/node-mocks-http\" rel=\"nofollow\"\u003enode-mock-http\u003c/a\u003e takes it even further and factors the {req,res} objects along with spying on their behavior. For example, it can assert whether the http status that was set on the res object matches the expectation (See example below)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e A bug in Express middleware === a bug in all or most requests\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clapdoing-it-right-example-testing-middleware-in-isolation-without-issuing-network-calls-and-waking-up-the-entire-express-machine\" class=\"anchor\" href=\"#clapdoing-it-right-example-testing-middleware-in-isolation-without-issuing-network-calls-and-waking-up-the-entire-express-machine\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏Doing It Right Example: Testing middleware in isolation without issuing network calls and waking-up the entire Express machine\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Examples with Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e//the middleware we want to test\u003c/span\u003e\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eunitUnderTest\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"./middleware\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ehttpMocks\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erequire\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"node-mocks-http\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e//Jest syntax, equivelant to describe() \u0026amp; it() in Mocha\u003c/span\u003e\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"A request without authentication header, should return http status 403\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003erequest\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ehttpMocks\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateRequest\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\n    \u003cspan class=\"na\"\u003emethod\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"GET\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"/user/42\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eheaders\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"na\"\u003eauthentication\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"\"\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eresponse\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003ehttpMocks\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ecreateResponse\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eunitUnderTest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eresponse\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estatusCode\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e403\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️25-measure-and-refactor-using-static-analysis-tools\" class=\"anchor\" href=\"#-%EF%B8%8F25-measure-and-refactor-using-static-analysis-tools\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️2.5 Measure and refactor using static analysis tools\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Using static analysis tools helps by giving objective ways to improve code quality and keep your code maintainable. You can add static analysis tools to your CI build to abort when it finds code smells. Its main selling points over plain linting are the ability to inspect quality in the context of multiple files (e.g. detect duplications), perform advanced analysis (e.g. code complexity) and follow the history and progress of code issues. Two examples of tools you can use are \u003ca href=\"https://www.sonarqube.org/\" rel=\"nofollow\"\u003eSonarQube\u003c/a\u003e (4,900+ \u003ca href=\"https://github.com/SonarSource/sonarqube\" rel=\"nofollow\"\u003estars\u003c/a\u003e) and \u003ca href=\"https://codeclimate.com/\" rel=\"nofollow\"\u003eCode Climate\u003c/a\u003e (2,000+ \u003ca href=\"https://github.com/codeclimate/codeclimate\" rel=\"nofollow\"\u003estars\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eCredit: \u003ca href=\"https://github.com/TheHollidayInn\" rel=\"nofollow\" target=\"_blank\"\u003e\u003c/a\u003e\u003ca href=\"https://github.com/TheHollidayInn\" rel=\"nofollow\"\u003eKeith Holliday\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e With poor code quality, bugs and performance will always be an issue that no shiny new library or state of the art features can fix\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-codeclimate-a-commercial-tool-that-can-identify-complex-methods\" class=\"anchor\" href=\"#clap-doing-it-right-example-codeclimate-a-commercial-tool-that-can-identify-complex-methods\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: CodeClimate, a commercial tool that can identify complex methods:\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Code%20Climate-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Code%20Climate-blue.svg\" alt=\"\" title=\"Examples with CodeClimate\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-16-yoni-goldberg-quality.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-16-yoni-goldberg-quality.png\" alt=\"alt text\" title=\"CodeClimate, a commercial tool that can identify complex methods:\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-26-check-your-readiness-for-node-related-chaos\" class=\"anchor\" href=\"#-%EF%B8%8F-26-check-your-readiness-for-node-related-chaos\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 2.6 Check your readiness for Node-related chaos\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Weirdly, most software testings are about logic \u0026amp; data only, but some of the worst things that happen (and are really hard to mitigate) are infrastructural issues. For example, did you ever test what happens when your process memory is overloaded, or when the server/process dies, or does your monitoring system realizes when the API becomes 50% slower?. To test and mitigate these type of bad things — \u003ca href=\"https://principlesofchaos.org/\" rel=\"nofollow\"\u003eChaos engineering\u003c/a\u003e was born by Netflix. It aims to provide awareness, frameworks and tools for testing our app resiliency for chaotic issues. For example, one of its famous tools, \u003ca href=\"https://github.com/Netflix/chaosmonkey\" rel=\"nofollow\"\u003ethe chaos monkey\u003c/a\u003e, randomly kills servers to ensure that our service can still serve users and not relying on a single server (there is also a Kubernetes version, \u003ca href=\"https://github.com/asobti/kube-monkey\" rel=\"nofollow\"\u003ekube-monkey\u003c/a\u003e, that kills pods). All these tools work on the hosting/platform level, but what if you wish to test and generate pure Node chaos like check how your Node process copes with uncaught errors, unhandled promise rejection, v8 memory overloaded with the max allowed of 1.7GB or whether your UX remains satisfactory when the event loop gets blocked often? to address this I’ve written, \u003ca href=\"https://github.com/i0natan/node-chaos-monkey\" rel=\"nofollow\"\u003enode-chaos\u003c/a\u003e (alpha) which provides all sort of Node-related chaotic acts\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e No escape here, Murphy’s law will hit your production without mercy\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example--node-chaos-can-generate-all-sort-of-nodejs-pranks-so-you-can-test-how-resilience-is-your-app-to-chaos\" class=\"anchor\" href=\"#clap-doing-it-right-example--node-chaos-can-generate-all-sort-of-nodejs-pranks-so-you-can-test-how-resilience-is-your-app-to-chaos\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: : Node-chaos can generate all sort of Node.js pranks so you can test how resilience is your app to chaos\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-17-yoni-goldberg-chaos-monkey-nodejs.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-17-yoni-goldberg-chaos-monkey-nodejs.png\" alt=\"alt text\" title=\"Node-chaos can generate all sort of Node.js pranks so you can test how resilience is your app to chaos\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️27-avoid-global-test-fixtures-and-seeds-add-data-per-test\" class=\"anchor\" href=\"#-%EF%B8%8F27-avoid-global-test-fixtures-and-seeds-add-data-per-test\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️2.7 Avoid global test fixtures and seeds, add data per-test\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Going by the golden rule (bullet 0), each test should add and act on its own set of DB rows to prevent coupling and easily reason about the test flow. In reality, this is often violated by testers who seed the DB with data before running the tests (also known as ‘test fixture’) for the sake of performance improvement. While performance is indeed a valid concern — it can be mitigated (see “Component testing” bullet), however, test complexity is a much painful sorrow that should govern other considerations most of the time. Practically, make each test case explicitly add the DB records it needs and act only on those records. If performance becomes a critical concern — a balanced compromise might come in the form of seeding the only suite of tests that are not mutating data (e.g. queries)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Few tests fail, a deployment is aborted, our team is going to spend precious time now, do we have a bug? let’s investigate, oh no — it seems that two tests were mutating the same seed data\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data-1\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-tests-are-not-independent-and-rely-on-some-global-hook-to-feed-global-db-data-1\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: tests are not independent and rely on some global hook to feed global DB data\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Mocha-blue.svg\" alt=\"\" title=\"Examples with Mocha\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003ebefore\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//adding sites and admins data to our DB. Where is the data? outside. At some external json or migration framework\u003c/span\u003e\n  \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eDB\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eAddSeedDataFromJson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'seed.json'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When updating site name, get successful confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//I know that site name \"portal\" exists - I saw it in the seed files\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esiteToUpdate\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetSiteByName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Portal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echangeName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esiteToUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"newName\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When querying by site name, get the right site\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//I know that site name \"portal\" exists - I saw it in the seed files\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esiteToCheck\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetSiteByName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Portal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esiteToCheck\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eequal\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Portal\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//Failure! The previous test change the name :[\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data-1\" class=\"anchor\" href=\"#clap-doing-it-right-example-we-can-stay-within-the-test-each-test-acts-on-its-own-set-of-data-1\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: We can stay within the test, each test acts on its own set of data\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When updating site name, get successful confirmation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e//test is adding a fresh new records and acting on the records only\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003esiteUnderTest\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddSite\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e\n    \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"siteForUpdateTest\"\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eSiteService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003echangeName\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esiteUnderTest\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"newName\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eupdateNameResult\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eto\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ebe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"section-3️⃣-frontend-testing\" class=\"anchor\" href=\"#section-3%EF%B8%8F%E2%83%A3-frontend-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSection 3️⃣: Frontend Testing\u003c/h1\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-31-separate-ui-from-functionality\" class=\"anchor\" href=\"#-%EF%B8%8F-31-separate-ui-from-functionality\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.1 Separate UI from functionality\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e When focusing on testing component logic, UI details become a noise that should be extracted, so your tests can focus on pure data. Practically, extract the desired data from the markup in an abstract way that is not too coupled to the graphic implementation, assert only on pure data (vs HTML/CSS graphic details) and disable animations that slow down. You might get tempted to avoid rendering and test only the back part of the UI (e.g. services, actions, store) but this will result in fictional tests that don't resemble the reality and won't reveal cases where the right data doesn't even arrive in the UI\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e The pure calculated data of your test might be ready in 10ms, but then the whole test will last 500ms (100 tests = 1 min) due to some fancy and irrelevant animation\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-separating-out-the-ui-details\" class=\"anchor\" href=\"#clap-doing-it-right-example-separating-out-the-ui-details\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Separating out the UI details\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" alt=\"\" title=\"Examples with React\" style=\"max-width:100%;\"\u003e\u003c/a\u003e \u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg\" alt=\"\" title=\"Examples with react-testing-library\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When users-list is flagged to show only VIP, should display only VIP members\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Arrange\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eallUsers\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[{\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Yoni Goldberg\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003evip\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"John Doe\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003evip\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e \u003cspan class=\"p\"\u003e}];\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Act\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003egetAllByTestId\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eUsersList\u003c/span\u003e \u003cspan class=\"nx\"\u003eusers\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eallUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"nx\"\u003eshowOnlyVIP\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"se\"\u003e)\u003c/span\u003e\u003cspan class=\"err\"\u003e;\n\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Assert - Extract the data from the UI first\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eallRenderedUsers\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003egetAllByTestId\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"user\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003euiElement\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003euiElement\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etextContent\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eallRealVIPUsers\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eallUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efilter\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003evip\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003emap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003euser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003euser\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eallRenderedUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eallRealVIPUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e//compare data with data, no UI here\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-assertion-mix-ui-details-and-data\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-assertion-mix-ui-details-and-data\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: Assertion mix UI details and data\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When flagging to show only VIP, should display only VIP members\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Arrange\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eallUsers\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e[{\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Yoni Goldberg\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003evip\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"John Doe\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003evip\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e \u003cspan class=\"p\"\u003e}];\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Act\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003egetAllByTestId\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eUsersList\u003c/span\u003e \u003cspan class=\"nx\"\u003eusers\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eallUsers\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"nx\"\u003eshowOnlyVIP\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kc\"\u003etrue\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"se\"\u003e)\u003c/span\u003e\u003cspan class=\"err\"\u003e;\n\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Assert - Mix UI \u0026amp; data in assertion\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003egetAllByTestId\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"user\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'[\u0026lt;li data-testid=\"user\"\u0026gt;John Doe\u0026lt;/li\u0026gt;]'\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-32-query-html-elements-based-on-attributes-that-are-unlikely-to-change\" class=\"anchor\" href=\"#-%EF%B8%8F-32-query-html-elements-based-on-attributes-that-are-unlikely-to-change\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.2 Query HTML elements based on attributes that are unlikely to change\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Query HTML elements based on attributes that are likely to survive graphic changes unlike CSS selectors and like form labels. If the designated element doesn't have such attributes, create a dedicated test attribute like 'test-id-submit-button'. Going this route not only ensures that your functional/logic tests never break because of look \u0026amp; feel changes but also it becomes clear to the entire team that this element and attribute are utilized by tests and shouldn't get removed\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e You want to test the login functionality that spans many components, logic and services, everything is set up perfectly - stubs, spies, Ajax calls are isolated. All seems perfect. Then the test fails because the designer changed the div CSS class from 'thick-border' to 'thin-border'\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-querying-an-element-using-a-dedicated-attribute-for-testing\" class=\"anchor\" href=\"#clap-doing-it-right-example-querying-an-element-using-a-dedicated-attribute-for-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Querying an element using a dedicated attribute for testing\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" alt=\"\" title=\"Examples with React\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"html\" class=\"highlight-html\"\u003e// the markup code (part of React component)\n\u003cspan class=\"nt\"\u003e\u0026lt;h3\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;Badge\u003c/span\u003e \u003cspan class=\"na\"\u003epill\u003c/span\u003e \u003cspan class=\"na\"\u003eclassName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"fixed_badge\"\u003c/span\u003e \u003cspan class=\"na\"\u003evariant=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"dark\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;span\u003c/span\u003e \u003cspan class=\"na\"\u003edata-testid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"errorsLabel\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e{value}\u003cspan class=\"nt\"\u003e\u0026lt;/span\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"c\"\u003e\u0026lt;!-- note the attribute data-testid --\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"nt\"\u003e\u0026lt;/Badge\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/h3\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// this example is using react-testing-library\u003c/span\u003e\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Whenever no data is passed to metric, show 0 as default\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Arrange\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emetricValue\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kc\"\u003eundefined\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Act\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003egetByTestId\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003edashboardMetric\u003c/span\u003e \u003cspan class=\"nx\"\u003evalue\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kc\"\u003eundefined\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"se\"\u003e)\u003c/span\u003e\u003cspan class=\"err\"\u003e;\n\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003egetByTestId\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"errorsLabel\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e()).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"0\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-relying-on-css-attributes\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-relying-on-css-attributes\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: Relying on CSS attributes\u003c/h3\u003e\n\u003cpre lang=\"html\" class=\"highlight-html\"\u003e\u003cspan class=\"c\"\u003e\u0026lt;!-- the markup code (part of React component) --\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;span\u003c/span\u003e \u003cspan class=\"na\"\u003eid=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"metric\"\u003c/span\u003e \u003cspan class=\"na\"\u003eclassName=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"d-flex-column\"\u003c/span\u003e\u003cspan class=\"nt\"\u003e\u0026gt;\u003c/span\u003e{value}\u003cspan class=\"nt\"\u003e\u0026lt;/span\u0026gt;\u003c/span\u003e\n\u003cspan class=\"c\"\u003e\u0026lt;!-- what if the designer changes the classs? --\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// this exammple is using enzyme\u003c/span\u003e\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Whenever no data is passed, error metric shows zero\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// ...\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"[className='d-flex-column']\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e()).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"0\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-33-whenever-possible-test-with-a-realistic-and-fully-rendered-component\" class=\"anchor\" href=\"#-%EF%B8%8F-33-whenever-possible-test-with-a-realistic-and-fully-rendered-component\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.3 Whenever possible, test with a realistic and fully rendered component\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Whenever reasonably sized, test your component from outside like your users do, fully render the UI, act on it and assert that the rendered UI behaves as expected. Avoid all sort of mocking, partial and shallow rendering - this approach might result in untrapped bugs due to lack of details and harden the maintenance as the tests mess with the internals (see bullet 'Favour blackbox testing'). If one of the child components is significantly slowing down (e.g. animation) or complicating the setup - consider explicitly replacing it with a fake\u003c/p\u003e\n\u003cp\u003eWith all that said, a word of caution is in order: this technique works for small/medium components that pack a reasonable size of child components. Fully rendering a component with too many children will make it hard to reason about test failures (root cause analysis) and might get too slow. In such cases, write only a few tests against that fat parent component and more tests against its children\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e When poking into a component's internal by invoking its private methods, and checking the inner state - you would have to refactor all tests when refactoring the components implementation. Do you really have a capacity for this level of maintenance?\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-working-realistically-with-a-fully-rendered-component\" class=\"anchor\" href=\"#clap-doing-it-right-example-working-realistically-with-a-fully-rendered-component\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Working realistically with a fully rendered component\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" alt=\"\" title=\"Examples with React\" style=\"max-width:100%;\"\u003e\u003c/a\u003e \u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Enzyme-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Enzyme-blue.svg\" alt=\"\" title=\"Examples with Enzyme\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"kd\"\u003eclass\u003c/span\u003e \u003cspan class=\"nx\"\u003eCalendar\u003c/span\u003e \u003cspan class=\"kd\"\u003eextends\u003c/span\u003e \u003cspan class=\"nx\"\u003eReact\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eComponent\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kr\"\u003estatic\u003c/span\u003e \u003cspan class=\"nx\"\u003edefaultProps\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003eshowFilters\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003efalse\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003ediv\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nx\"\u003eA\u003c/span\u003e \u003cspan class=\"nx\"\u003efilters\u003c/span\u003e \u003cspan class=\"nx\"\u003epanel\u003c/span\u003e \u003cspan class=\"kd\"\u003ewith\u003c/span\u003e \u003cspan class=\"nx\"\u003ea\u003c/span\u003e \u003cspan class=\"nx\"\u003ebutton\u003c/span\u003e \u003cspan class=\"nx\"\u003eto\u003c/span\u003e \u003cspan class=\"nx\"\u003ehide\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"nx\"\u003eshow\u003c/span\u003e \u003cspan class=\"nx\"\u003efilters\u003c/span\u003e\n        \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eFiltersPanel\u003c/span\u003e \u003cspan class=\"nx\"\u003eshowFilter\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eshowFilters\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"nx\"\u003etitle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Choose Filters\"\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u0026gt;\u003c/span\u003e\n      \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/div\u003c/span\u003e\u003cspan class=\"err\"\u003e\u0026gt;\n\u003c/span\u003e    \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//Examples use React \u0026amp; Enzyme\u003c/span\u003e\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Realistic approach: When clicked to show filters, filters are displayed\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Arrange\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003emount\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eCalendar\u003c/span\u003e \u003cspan class=\"nx\"\u003eshowFilters\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"sr\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"se\"\u003e)\u003c/span\u003e\u003cspan class=\"err\"\u003e;\n\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Act\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"button\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003esimulate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"click\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Assert\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etext\u003c/span\u003e\u003cspan class=\"p\"\u003e().\u003c/span\u003e\u003cspan class=\"nx\"\u003eincludes\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Choose Filter\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// This is how the user will approach this element: by text\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-mocking-the-reality-with-shallow-rendering\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-mocking-the-reality-with-shallow-rendering\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: Mocking the reality with shallow rendering\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Shallow/mocked approach: When clicked to show filters, filters are displayed\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Arrange\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eshallow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eCalendar\u003c/span\u003e \u003cspan class=\"nx\"\u003eshowFilters\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"nx\"\u003etitle\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Choose Filter\"\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Act\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"filtersPanel\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003einstance\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eshowFilters\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Tap into the internals, bypass the UI and invoke a method. White-box approach\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Assert\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ewrapper\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003efind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Filter\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eprops\u003c/span\u003e\u003cspan class=\"p\"\u003e()).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoEqual\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Choose Filter\"\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// what if we change the prop name or don't pass anything relevant?\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-34-dont-sleep-use-frameworks-built-in-support-for-async-events-also-try-to-speed-things-up\" class=\"anchor\" href=\"#-%EF%B8%8F-34-dont-sleep-use-frameworks-built-in-support-for-async-events-also-try-to-speed-things-up\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.4 Don't sleep, use frameworks built-in support for async events. Also try to speed things up\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e In many cases, the unit under test completion time is just unknown (e.g. animation suspends element appearance) - in that case, avoid sleeping (e.g. setTimeOut) and prefer more deterministic methods that most platforms provide. Some libraries allows awaiting on operations (e.g. \u003ca href=\"https://docs.cypress.io/guides/references/best-practices.html#Unnecessary-Waiting\" rel=\"nofollow\"\u003eCypress cy.request('url')\u003c/a\u003e), other provide API for waiting like \u003ca href=\"https://testing-library.com/docs/guide-disappearance\" rel=\"nofollow\"\u003e@testing-library/dom method wait(expect(element))\u003c/a\u003e. Sometimes a more elegant way is to stub the slow resource, like API for example, and then once the response moment becomes deterministic the component can be explicitly re-rendered. When depending upon some external component that sleeps, it might turn useful to \u003ca href=\"https://jestjs.io/docs/en/timer-mocks\" rel=\"nofollow\"\u003ehurry-up the clock\u003c/a\u003e. Sleeping is a pattern to avoid because it forces your test to be slow or risky (when waiting for a too short period). Whenever sleeping and polling is inevitable and there's no support from the testing framework, some npm libraries like \u003ca href=\"https://www.npmjs.com/package/wait-for-expect\" rel=\"nofollow\"\u003ewait-for-expect\u003c/a\u003e can help with a semi-deterministic solution\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e When sleeping for a long time, tests will be an order of magnitude slower. When trying to sleep for small numbers, test will fail when the unit under test didn't respond in a timely fashion. So it boils down to a trade-off between flakiness and bad performance\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-e2e-api-that-resolves-only-when-the-async-operations-is-done-cypress\" class=\"anchor\" href=\"#clap-doing-it-right-example-e2e-api-that-resolves-only-when-the-async-operations-is-done-cypress\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: E2E API that resolves only when the async operations is done (Cypress)\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" alt=\"\" title=\"Using Cypress to illustrate the idea\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg\" alt=\"\" title=\"Examples with react-testing-library\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// using Cypress\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kd\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"#show-products\"\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nx\"\u003eclick\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e \u003cspan class=\"c1\"\u003e// navigate\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ewait\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"@products\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// wait for route to appear\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// this line will get executed only when the route is ready\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-testing-library-that-waits-for-dom-elements\" class=\"anchor\" href=\"#clap-doing-it-right-example-testing-library-that-waits-for-dom-elements\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Testing library that waits for DOM elements\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// @testing-library/dom\u003c/span\u003e\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"movie title appears\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// element is initially not present...\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// wait for appearance\u003c/span\u003e\n  \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003ewait\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003egetByText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"the lion king\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBeInTheDocument\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// wait for appearance and return the element\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emovie\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003ewaitForElement\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003egetByText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"the lion king\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-custom-sleep-code\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-custom-sleep-code\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: custom sleep code\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"movie title appears\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// element is initially not present...\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// custom wait logic (caution: simplistic, no timeout)\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003einterval\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003esetInterval\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efound\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003egetByText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"the lion king\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003efound\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003eclearInterval\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003einterval\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003egetByText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"the lion king\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBeInTheDocument\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"mi\"\u003e100\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// wait for appearance and return the element\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003emovie\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003ewaitForElement\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003egetByText\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"the lion king\"\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-35-watch-how-the-content-is-served-over-the-network\" class=\"anchor\" href=\"#-%EF%B8%8F-35-watch-how-the-content-is-served-over-the-network\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.5 Watch how the content is served over the network\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Google%20LightHouse-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20Google%20LightHouse-blue.svg\" alt=\"\" title=\"Examples with Lighthouse\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Apply some active monitor that ensures the page load under real network is optimized - this includes any UX concern like slow page load or un-minified bundle. The inspection tools market is no short: basic tools like \u003ca href=\"https://www.pingdom.com/\" rel=\"nofollow\"\u003epingdom\u003c/a\u003e, AWS CloudWatch, \u003ca href=\"https://cloud.google.com/monitoring/uptime-checks/\" rel=\"nofollow\"\u003egcp StackDriver\u003c/a\u003e can be easily configured to watch whether the server is alive and response under a reasonable SLA. This only scratches the surface of what might get wrong, hence it's preferable to opt for tools that specialize in frontend (e.g. \u003ca href=\"https://developers.google.com/web/tools/lighthouse/\" rel=\"nofollow\"\u003elighthouse\u003c/a\u003e, \u003ca href=\"https://developers.google.com/speed/pagespeed/insights/\" rel=\"nofollow\"\u003epagespeed\u003c/a\u003e) and perform richer analysis. The focus should be on symptoms, metrics that directly affect the UX, like page load time, \u003ca href=\"https://scotch.io/courses/10-web-performance-audit-tips-for-your-next-billion-users-in-2018/fmp-first-meaningful-paint\" rel=\"nofollow\"\u003emeaningful paint\u003c/a\u003e, \u003ca href=\"https://calibreapp.com/blog/time-to-interactive/\" rel=\"nofollow\"\u003etime until the page gets interactive (TTI)\u003c/a\u003e. On top of that, one may also watch for technical causes like ensuring the content is compressed, time to the first byte, optimize images, ensuring reasonable DOM size, SSL and many others. It's advisable to have these rich monitors both during development, as part of the CI and most important - 24x7 over the production's servers/CDN\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e It must be disappointing to realize that after such great care for crafting a UI, 100% functional tests passing and sophisticated bundling - the UX is horrible and slow due to CDN misconfiguration\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-lighthouse-page-load-inspection-report\" class=\"anchor\" href=\"#clap-doing-it-right-example-lighthouse-page-load-inspection-report\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Lighthouse page load inspection report\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/lighthouse2.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/lighthouse2.png\" alt=\"\" title=\"Lighthouse page load inspection report\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-36-stub-flaky-and-slow-resources-like-backend-apis\" class=\"anchor\" href=\"#-%EF%B8%8F-36-stub-flaky-and-slow-resources-like-backend-apis\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.6 Stub flaky and slow resources like backend APIs\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e When coding your mainstream tests (not E2E tests), avoid involving any resource that is beyond your responsibility and control like backend API and use stubs instead (i.e. test double). Practically, instead of real network calls to APIs, use some test double library (like \u003ca href=\"https://sinonjs.org/\" rel=\"nofollow\"\u003eSinon\u003c/a\u003e, \u003ca href=\"https://www.npmjs.com/package/testdouble\" rel=\"nofollow\"\u003eTest doubles\u003c/a\u003e, etc) for stubbing the API response. The main benefit is preventing flakiness - testing or staging APIs by definition are not highly stable and from time to time will fail your tests although YOUR component behaves just fine (production env was not meant for testing and it usually throttles requests). Doing this will allow simulating various API behavior that should drive your component behavior as when no data was found or the case when API throws an error. Last but not least, network calls will greatly slow down the tests\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e The average test runs no longer than few ms, a typical API call last 100ms\u0026gt;, this makes each test ~20x slower\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-stubbing-or-intercepting-api-calls\" class=\"anchor\" href=\"#clap-doing-it-right-example-stubbing-or-intercepting-api-calls\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Stubbing or intercepting API calls\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React-blue.svg\" alt=\"\" title=\"Examples with React\" style=\"max-width:100%;\"\u003e\u003c/a\u003e \u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A7%20Example%20using%20React%20Testing%20Library-blue.svg\" alt=\"\" title=\"Examples with react-testing-library\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// unit under test\u003c/span\u003e\n\u003cspan class=\"k\"\u003eexport\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e \u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eProductsList\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nx\"\u003eproducts\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003esetProducts\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003euseState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kc\"\u003efalse\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003efetchProducts\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003easync\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003eproducts\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"kr\"\u003eawait\u003c/span\u003e \u003cspan class=\"nx\"\u003eaxios\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kd\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"api/products\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003esetProducts\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eproducts\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003euseEffect\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003efetchProducts\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"p\"\u003e[]);\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"nx\"\u003eproducts\u003c/span\u003e \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003ediv\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"nx\"\u003eproducts\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"sr\"\u003e/div\u0026gt; : \u0026lt;div data-testid=\"no-products-message\"\u0026gt;No products\u0026lt;/\u003c/span\u003e\u003cspan class=\"nx\"\u003ediv\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// test\u003c/span\u003e\n\u003cspan class=\"nx\"\u003etest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When no products exist, show the appropriate message\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// Arrange\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003enock\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"api\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"kd\"\u003eget\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e`/products`\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ereply\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e404\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Act\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"nx\"\u003egetByTestId\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003erender\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"o\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"nx\"\u003eProductsList\u003c/span\u003e \u003cspan class=\"o\"\u003e/\u0026gt;\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"c1\"\u003e// Assert\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003egetByTestId\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"no-products-message\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)).\u003c/span\u003e\u003cspan class=\"nx\"\u003etoBeTruthy\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-37-have-very-few-end-to-end-tests-that-spans-the-whole-system\" class=\"anchor\" href=\"#-%EF%B8%8F-37-have-very-few-end-to-end-tests-that-spans-the-whole-system\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.7 Have very few end-to-end tests that spans the whole system\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Although E2E (end-to-end) usually means UI-only testing with a real browser (See bullet 3.6), for other they mean tests that stretch the entire system including the real backend. The latter type of tests is highly valuable as they cover integration bugs between frontend and backend that might happen due to a wrong understanding of the exchange schema. They are also an efficient method to discover backend-to-backend integration issues (e.g. Microservice A sends the wrong message to Microservice B) and even to detect deployment failures - there are no backend frameworks for E2E testing that are as friendly and mature as UI frameworks like \u003ca href=\"https://www.cypress.io/\" rel=\"nofollow\"\u003eCypress\u003c/a\u003e and \u003ca href=\"https://github.com/GoogleChrome/puppeteer\" rel=\"nofollow\"\u003ePuppeteer\u003c/a\u003e. The downside of such tests is the high cost of configuring an environment with so many components, and mostly their brittleness - given 50 microservices, even if one fails then the entire E2E just failed. For that reason, we should use this technique sparingly and probably have 1-10 of those and no more. That said, even a small number of E2E tests are likely to catch the type of issues they are targeted for - deployment \u0026amp; integration faults. It's advisable to run those over a production-like staging environment\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e UI might invest much in testing its functionality only to realizes very late that the backend returned payload (the data schema the UI has to work with) is very different than expected\u003c/p\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-38-speed-up-e2e-tests-by-reusing-login-credentials\" class=\"anchor\" href=\"#-%EF%B8%8F-38-speed-up-e2e-tests-by-reusing-login-credentials\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.8 Speed-up E2E tests by reusing login credentials\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e In E2E tests that involve a real backend and rely on a valid user token for API calls, it doesn't payoff to isolate the test to a level where a user is created and logged-in in every request. Instead, login only once before the tests execution start (i.e. before-all hook), save the token in some local storage and reuse it across requests. This seem to violate one of the core testing principle - keep the test autonomous without resources coupling. While this is a valid worry, in E2E tests performance is a key concern and creating 1-3 API requests before starting each individual tests might lead to horrible execution time. Reusing credentials doesn't mean the tests have to act on the same user records - if relying on user records (e.g. test user payments history) than make sure to generate those records as part of the test and avoid sharing their existence with other tests. Also remember that the backend can be faked - if your tests are focused on the frontend it might be better to isolate it and stub the backend API (see bullet 3.6).\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Given 200 test cases and assuming login=100ms = 20 seconds only for logging-in again and again\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-logging-in-before-all-and-not-before-each\" class=\"anchor\" href=\"#clap-doing-it-right-example-logging-in-before-all-and-not-before-each\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Logging-in before-all and not before-each\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" alt=\"\" title=\"Using Cypress to illustrate the idea\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"kd\"\u003elet\u003c/span\u003e \u003cspan class=\"nx\"\u003eauthenticationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// happens before ALL tests run\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ebefore\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003erequest\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'POST'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s1\"\u003e'http://localhost:3000/login'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"na\"\u003eusername\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eCypress\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eenv\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'username'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n    \u003cspan class=\"na\"\u003epassword\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eCypress\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eenv\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'password'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eits\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'body'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003ethen\u003c/span\u003e\u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"nx\"\u003eresponseFromLogin\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eauthenticationToken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003eresponseFromLogin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etoken\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// happens before EACH test\u003c/span\u003e\n\u003cspan class=\"nx\"\u003ebeforeEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003esetUser\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003evisit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'/home'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eonBeforeLoad\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003ewin\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"nx\"\u003ewin\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elocalStorage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003esetItem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s1\"\u003e'token'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nx\"\u003eJSON\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003estringify\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003eauthenticationToken\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\u003cspan class=\"p\"\u003e})\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-39-have-one-e2e-smoke-test-that-just-travels-across-the-site-map\" class=\"anchor\" href=\"#-%EF%B8%8F-39-have-one-e2e-smoke-test-that-just-travels-across-the-site-map\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.9 Have one E2E smoke test that just travels across the site map\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e For production monitoring and development-time sanity check, run a single E2E test that visits all/most of the site pages and ensures no one breaks. This type of test brings a great return on investment as it's very easy to write and maintain, but it can detect any kind of failure including functional, network and deployment issues. Other styles of smoke and sanity checking are not as reliable and exhaustive - some ops teams just ping the home page (production) or developers who run many integration tests which don't discover packaging and browser issues. Goes without saying that the smoke test doesn't replace functional tests rather just aim to serve as a quick smoke detector\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Everything might seem perfect, all tests pass, production health-check is also positive but the Payment component had some packaging issue and only the /Payment route is not rendering\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-smoke-travelling-across-all-pages\" class=\"anchor\" href=\"#clap-doing-it-right-example-smoke-travelling-across-all-pages\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Smoke travelling across all pages\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" alt=\"\" title=\"Using Cypress to illustrate the idea\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"When doing smoke testing over all page, should load them all successfully\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// exemplified using Cypress but can be implemented easily\u003c/span\u003e\n  \u003cspan class=\"c1\"\u003e// using any E2E suite\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003evisit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https://mysite.com/home\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Home\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https://mysite.com/Login\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Login\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"https://mysite.com/About\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003econtains\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"About\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-310-expose-the-tests-as-a-live-collaborative-document\" class=\"anchor\" href=\"#-%EF%B8%8F-310-expose-the-tests-as-a-live-collaborative-document\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.10 Expose the tests as a live collaborative document\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Besides increasing app reliability, tests bring another attractive opportunity to the table - serve as live app documentation. Since tests inherently speak at a less-technical and product/UX language, using the right tools they can serve as a communication artifact that greatly aligns all the peers - developers and their customers. For example, some frameworks allow expressing the flow and expectations (i.e. tests plan) using a human-readable language so any stakeholder, including product managers, can read, approve and collaborate on the tests which just became the live requirements document. This technique is also being referred to as 'acceptance test' as it allows the customer to define his acceptance criteria in plain language. This is \u003ca href=\"https://en.wikipedia.org/wiki/Behavior-driven_development\" rel=\"nofollow\"\u003eBDD (behavior-driven testing)\u003c/a\u003e at its purest form. One of the popular frameworks that enable this is \u003ca href=\"https://github.com/cucumber/cucumber-js\" rel=\"nofollow\"\u003eCucumber which has a JavaScript flavor\u003c/a\u003e, see example below. Another similar yet different opportunity, \u003ca href=\"https://storybook.js.org/\" rel=\"nofollow\"\u003eStoryBook\u003c/a\u003e, allows exposing UI components as a graphic catalog where one can walk through the various states of each component (e.g. render a grid w/o filters, render that grid with multiple rows or with none, etc), see how it looks like, and how to trigger that state - this can appeal also to product folks but mostly serves as live doc for developers who consume those components.\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e After investing top resources on testing, it's just a pity not to leverage this investment and win great value\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-describing-tests-in-human-language-using-cucumber-js\" class=\"anchor\" href=\"#clap-doing-it-right-example-describing-tests-in-human-language-using-cucumber-js\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Describing tests in human-language using cucumber-js\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cucumber-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cucumber-blue.svg\" alt=\"\" title=\"Examples using Cucumber\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e// this is how one can describe tests using cucumber: plain language that allows anyone to understand and collaborate\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003eFeature\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eTwitter\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nx\"\u003etweet\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eI\u003c/span\u003e \u003cspan class=\"nx\"\u003ewant\u003c/span\u003e \u003cspan class=\"nx\"\u003eto\u003c/span\u003e \u003cspan class=\"nx\"\u003etweet\u003c/span\u003e \u003cspan class=\"nx\"\u003esomething\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"nx\"\u003eTwitter\u003c/span\u003e\n\n  \u003cspan class=\"p\"\u003e@\u003c/span\u003e\u003cspan class=\"nd\"\u003efocus\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eScenario\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"nx\"\u003eTweeting\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"nx\"\u003ethe\u003c/span\u003e \u003cspan class=\"nx\"\u003ehome\u003c/span\u003e \u003cspan class=\"nx\"\u003epage\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eGiven\u003c/span\u003e \u003cspan class=\"nx\"\u003eI\u003c/span\u003e \u003cspan class=\"nx\"\u003eopen\u003c/span\u003e \u003cspan class=\"nx\"\u003eTwitter\u003c/span\u003e \u003cspan class=\"nx\"\u003ehome\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eGiven\u003c/span\u003e \u003cspan class=\"nx\"\u003eI\u003c/span\u003e \u003cspan class=\"nx\"\u003eclick\u003c/span\u003e \u003cspan class=\"nx\"\u003eon\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"New tweet\"\u003c/span\u003e \u003cspan class=\"nx\"\u003ebutton\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eGiven\u003c/span\u003e \u003cspan class=\"nx\"\u003eI\u003c/span\u003e \u003cspan class=\"nx\"\u003etype\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Hello followers!\"\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"nx\"\u003ethe\u003c/span\u003e \u003cspan class=\"nx\"\u003etextbox\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eGiven\u003c/span\u003e \u003cspan class=\"nx\"\u003eI\u003c/span\u003e \u003cspan class=\"nx\"\u003eclick\u003c/span\u003e \u003cspan class=\"nx\"\u003eon\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Submit\"\u003c/span\u003e \u003cspan class=\"nx\"\u003ebutton\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003eThen\u003c/span\u003e \u003cspan class=\"nx\"\u003eI\u003c/span\u003e \u003cspan class=\"nx\"\u003esee\u003c/span\u003e \u003cspan class=\"nx\"\u003emessage\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"Tweet saved\"\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-visualizing-our-components-their-various-states-and-inputs-using-storybook\" class=\"anchor\" href=\"#clap-doing-it-right-example-visualizing-our-components-their-various-states-and-inputs-using-storybook\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Visualizing our components, their various states and inputs using Storybook\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20StoryBook-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20StoryBook-blue.svg\" alt=\"\" title=\"Using StoryBook\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/story-book.jpg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/story-book.jpg\" alt=\"alt text\" title=\"Storybook\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-311-detect-visual-issues-with-automated-tools\" class=\"anchor\" href=\"#-%EF%B8%8F-311-detect-visual-issues-with-automated-tools\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 3.11 Detect visual issues with automated tools\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Setup automated tools to capture UI screenshots when changes are presented and detect visual issues like content overlapping or breaking. This ensures that not only the right data is prepared but also the user can conveniently see it. This technique is not widely adopted, our testing mindset leans toward functional tests but it's the visuals what the user experience and with so many device types it's very easy to overlook some nasty UI bug. Some free tools can provide the basics - generate and save screenshots for the inspection of human eyes. While this approach might be sufficient for small apps, it's flawed as any other manual testing that demands human labor anytime something changes. On the other hand, it's quite challenging to detect UI issues automatically due to the lack of clear definition - this is where the field of 'Visual Regression' chime in and solve this puzzle by comparing old UI with the latest changes and detect differences. Some OSS/free tools can provide some of this functionality (e.g. \u003ca href=\"https://github.com/BBC-News/wraith\" rel=\"nofollow\"\u003ewraith\u003c/a\u003e, \u003ca\u003ePhantomCSS\u003c/a\u003e but might charge significant setup time. The commercial line of tools (e.g. \u003ca href=\"https://applitools.com/\" rel=\"nofollow\"\u003eApplitools\u003c/a\u003e, \u003ca href=\"https://percy.io/\" rel=\"nofollow\"\u003ePercy.io\u003c/a\u003e) takes is a step further by smoothing the installation and packing advanced features like management UI, alerting, smart capturing by eliminating 'visual noise' (e.g. ads, animations) and even root cause analysis of the DOM/CSS changes that led to the issue\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e How good is a content page that display great content (100% tests passed), loads instantly but half of the content area is hidden?\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-a-typical-visual-regression---right-content-that-is-served-badly\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-a-typical-visual-regression---right-content-that-is-served-badly\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: A typical visual regression - right content that is served badly\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/amazon-visual-regression.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/amazon-visual-regression.jpeg\" alt=\"alt text\" title=\"Amazon page breaks\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-configuring-wraith-to-capture-and-compare-ui-snapshots\" class=\"anchor\" href=\"#clap-doing-it-right-example-configuring-wraith-to-capture-and-compare-ui-snapshots\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Configuring wraith to capture and compare UI snapshots\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Wraith-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Wraith-blue.svg\" alt=\"\" title=\"Using Wraith\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e​# Add as many domains as necessary. Key will act as a label​\n\ndomains:\n  english: \"http://www.mysite.com\"​\n\n​# Type screen widths below, here are a couple of examples​\n\nscreen_widths:\n\n  - 600​\n  - 768​\n  - 1024​\n  - 1280​\n\n​# Type page URL paths below, here are a couple of examples​\npaths:\n  about:\n    path: /about\n    selector: '.about'​\n  subscribe:\n      selector: '.subscribe'​\n    path: /subscribe\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-using-applitools-to-get-snapshot-comparison-and-other-advanced-features\" class=\"anchor\" href=\"#clap-doing-it-right-example-using-applitools-to-get-snapshot-comparison-and-other-advanced-features\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Using Applitools to get snapshot comparison and other advanced features\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20AppliTools-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20AppliTools-blue.svg\" alt=\"\" title=\"Using Applitools\" style=\"max-width:100%;\"\u003e\u003c/a\u003e \u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Cypress-blue.svg\" alt=\"\" title=\"Using Cypress to illustrate the idea\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"k\"\u003eimport\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"nx\"\u003etodoPage\u003c/span\u003e \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"../page-objects/todo-page\"\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"visual validation\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ebefore\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003etodoPage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003enavigate\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003ebeforeEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eeyesOpen\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003eappName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"TAU TodoMVC\"\u003c/span\u003e \u003cspan class=\"p\"\u003e}));\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eafterEach\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eeyesClose\u003c/span\u003e\u003cspan class=\"p\"\u003e());\u003c/span\u003e\n\n  \u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"should look good\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eeyesCheckWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"empty todo list\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etodoPage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddTodo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Clean room\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etodoPage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eaddTodo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Learn javascript\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eeyesCheckWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"two todos\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003etodoPage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003etoggleTodo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"nx\"\u003ecy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eeyesCheckWindow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"mark as completed\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"section-4️⃣-measuring-test-effectiveness\" class=\"anchor\" href=\"#section-4%EF%B8%8F%E2%83%A3-measuring-test-effectiveness\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSection 4️⃣: Measuring Test Effectiveness\u003c/h1\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-41-get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number\" class=\"anchor\" href=\"#-%EF%B8%8F-41-get-enough-coverage-for-being-confident-80-seems-to-be-the-lucky-number\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 4.1 Get enough coverage for being confident, ~80% seems to be the lucky number\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e The purpose of testing is to get enough confidence for moving fast, obviously the more code is tested the more confident the team can be. Coverage is a measure of how many code lines (and branches, statements, etc) are being reached by the tests. So how much is enough? 10–30% is obviously too low to get any sense about the build correctness, on the other side 100% is very expensive and might shift your focus from the critical paths to the exotic corners of the code. The long answer is that it depends on many factors like the type of application — if you’re building the next generation of Airbus A380 than 100% is a must, for a cartoon pictures website 50% might be too much. Although most of the testing enthusiasts claim that the right coverage threshold is contextual, most of them also mention the number 80% as a thumb of a rule (\u003ca href=\"https://martinfowler.com/bliki/TestCoverage.html\" rel=\"nofollow\"\u003eFowler: “in the upper 80s or 90s”\u003c/a\u003e) that presumably should satisfy most of the applications.\u003c/p\u003e\n\u003cp\u003eImplementation tips: You may want to configure your continuous integration (CI) to have a coverage threshold (\u003ca href=\"https://jestjs.io/docs/en/configuration.html#collectcoverage-boolean\" rel=\"nofollow\"\u003eJest link\u003c/a\u003e) and stop a build that doesn’t stand to this standard (it’s also possible to configure threshold per component, see code example below). On top of this, consider detecting build coverage decrease (when a newly committed code has less coverage) — this will push developers raising or at least preserving the amount of tested code. All that said, coverage is only one measure, a quantitative based one, that is not enough to tell the robustness of your testing. And it can also be fooled as illustrated in the next bullets\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Confidence and numbers go hand in hand, without really knowing that you tested most of the system — there will also be some fear and fear will slow you down\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-example-a-typical-coverage-report\" class=\"anchor\" href=\"#clap-example-a-typical-coverage-report\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Example: A typical coverage report\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-18-yoni-goldberg-code-coverage.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-18-yoni-goldberg-code-coverage.png\" alt=\"alt text\" title=\"A typical coverage report\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-setting-up-coverage-per-component-using-jest\" class=\"anchor\" href=\"#clap-doing-it-right-example-setting-up-coverage-per-component-using-jest\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Setting up coverage per component (using Jest)\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Jest-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Jest-blue.svg\" alt=\"\" title=\"Using Jest\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-18-code-coverage2.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-18-code-coverage2.jpeg\" alt=\"alt text\" title=\"Setting up coverage per component (using Jest)\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-42-inspect-coverage-reports-to-detect-untested-areas-and-other-oddities\" class=\"anchor\" href=\"#-%EF%B8%8F-42-inspect-coverage-reports-to-detect-untested-areas-and-other-oddities\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 4.2 Inspect coverage reports to detect untested areas and other oddities\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Some issues sneak just under the radar and are really hard to find using traditional tools. These are not really bugs but more of surprising application behavior that might have a severe impact. For example, often some code areas are never or rarely being invoked — you thought that the ‘PricingCalculator’ class is always setting the product price but it turns out it is actually never invoked although we have 10000 products in DB and many sales… Code coverage reports help you realize whether the application behaves the way you believe it does. Other than that, it can also highlight which types of code is not tested — being informed that 80% of the code is tested doesn’t tell whether the critical parts are covered. Generating reports is easy — just run your app in production or during testing with coverage tracking and then see colorful reports that highlight how frequent each code area is invoked. If you take your time to glimpse into this data — you might find some gotchas\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e If you don’t know which parts of your code are left un-tested, you don’t know where the issues might come from\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-whats-wrong-with-this-coverage-report\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-whats-wrong-with-this-coverage-report\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: What’s wrong with this coverage report?\u003c/h3\u003e\n\u003cp\u003eBased on a real-world scenario where we tracked our application usage in QA and find out interesting login patterns (Hint: the amount of login failures is non-proportional, something is clearly wrong. Finally it turned out that some frontend bug keeps hitting the backend login API)\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-19-coverage-yoni-goldberg-nodejs-consultant.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-19-coverage-yoni-goldberg-nodejs-consultant.png\" alt=\"alt text\" title=\"What’s wrong with this coverage report?\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-43-measure-logical-coverage-using-mutation-testing\" class=\"anchor\" href=\"#-%EF%B8%8F-43-measure-logical-coverage-using-mutation-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 4.3 Measure logical coverage using mutation testing\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e The Traditional Coverage metric often lies: It may show you 100% code coverage, but none of your functions, even not one, return the right response. How come? it simply measures over which lines of code the test visited, but it doesn’t check if the tests actually tested anything — asserted for the right response. Like someone who’s traveling for business and showing his passport stamps — this doesn’t prove any work done, only that he visited few airports and hotels.\u003c/p\u003e\n\u003cp\u003eMutation-based testing is here to help by measuring the amount of code that was actually TESTED not just VISITED. \u003ca href=\"https://stryker-mutator.io/\" rel=\"nofollow\"\u003eStryker\u003c/a\u003e is a JavaScript library for mutation testing and the implementation is really neat:\u003c/p\u003e\n\u003cp\u003e(1) it intentionally changes the code and “plants bugs”. For example the code newOrder.price===0 becomes newOrder.price!=0. This “bugs” are called mutations\u003c/p\u003e\n\u003cp\u003e(2) it runs the tests, if all succeed then we have a problem — the tests didn’t serve their purpose of discovering bugs, the mutations are so-called survived. If the tests failed, then great, the mutations were killed.\u003c/p\u003e\n\u003cp\u003eKnowing that all or most of the mutations were killed gives much higher confidence than traditional coverage and the setup time is similar\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e You’ll be fooled to believe that 85% coverage means your test will detect bugs in 85% of your code\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-100-coverage-0-testing\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-100-coverage-0-testing\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: 100% coverage, 0% testing\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Stryker-blue.svg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://img.shields.io/badge/%F0%9F%94%A8%20Example%20using%20Stryker-blue.svg\" alt=\"\" title=\"Using Stryker\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"kd\"\u003efunction\u003c/span\u003e \u003cspan class=\"nx\"\u003eaddNewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003elogger\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003elog\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e`Adding new order \u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"nx\"\u003enewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eDB\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eMailer\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003esendMail\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nx\"\u003enewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eassignee\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s2\"\u003e`A new order was places \u003c/span\u003e\u003cspan class=\"p\"\u003e${\u003c/span\u003e\u003cspan class=\"nx\"\u003enewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s2\"\u003e`\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n  \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"na\"\u003eapproved\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"kc\"\u003etrue\u003c/span\u003e \u003cspan class=\"p\"\u003e};\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Test addNewOrder, don't use such test names\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eaddNewOrder\u003c/span\u003e\u003cspan class=\"p\"\u003e({\u003c/span\u003e \u003cspan class=\"na\"\u003eassignee\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"John@mailer.com\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"na\"\u003eprice\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"mi\"\u003e120\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e \u003cspan class=\"c1\"\u003e//Triggers 100% code coverage, but it doesn't check anything\u003c/span\u003e\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-stryker-reports-a-tool-for-mutation-testing-detects-and-counts-the-amount-of-code-that-is-not-tested-mutations\" class=\"anchor\" href=\"#clap-doing-it-right-example-stryker-reports-a-tool-for-mutation-testing-detects-and-counts-the-amount-of-code-that-is-not-tested-mutations\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Stryker reports, a tool for mutation testing, detects and counts the amount of code that is not tested (Mutations)\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-20-yoni-goldberg-mutation-testing.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-20-yoni-goldberg-mutation-testing.jpeg\" alt=\"alt text\" title=\"Stryker reports, a tool for mutation testing, detects and counts the amount of code that is not tested (Mutations)\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️44-preventing-test-code-issues-with-test-linters\" class=\"anchor\" href=\"#-%EF%B8%8F44-preventing-test-code-issues-with-test-linters\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️4.4 Preventing test code issues with Test linters\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e A set of ESLint plugins were built specifically for inspecting the tests code patterns and discover issues. For example, \u003ca href=\"https://www.npmjs.com/package/eslint-plugin-mocha\" rel=\"nofollow\"\u003eeslint-plugin-mocha\u003c/a\u003e will warn when a test is written at the global level (not a son of a describe() statement) or when tests are \u003ca href=\"https://mochajs.org/#inclusive-tests\" rel=\"nofollow\"\u003eskipped\u003c/a\u003e which might lead to a false belief that all tests are passing. Similarly, \u003ca href=\"https://github.com/jest-community/eslint-plugin-jest\" rel=\"nofollow\"\u003eeslint-plugin-jest\u003c/a\u003e can, for example, warn when a test has no assertions at all (not checking anything)\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Seeing 90% code coverage and 100% green tests will make your face wear a big smile only until you realize that many tests aren’t asserting for anything and many test suites were just skipped. Hopefully, you didn’t deploy anything based on this false observation\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-a-test-case-full-of-errors-luckily-all-are-caught-by-linters\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-a-test-case-full-of-errors-luckily-all-are-caught-by-linters\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: A test case full of errors, luckily all are caught by Linters\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"nx\"\u003edescribe\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Too short description\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"kd\"\u003econst\u003c/span\u003e \u003cspan class=\"nx\"\u003euserToken\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nx\"\u003euserService\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003egetDefaultToken\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"c1\"\u003e// *error:no-setup-in-describe, use hooks (sparingly) instead\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Some description\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{});\u003c/span\u003e\u003cspan class=\"c1\"\u003e//* error: valid-test-description. Must include the word \"Should\" + at least 5 words\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nx\"\u003eskip\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Test name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"c1\"\u003e// *error:no-skipped-tests, error:error:no-global-tests. Put tests only under describe or suite\u003c/span\u003e\n  \u003cspan class=\"nx\"\u003eexpect\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"somevalue\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// error:no-assert\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n\u003cspan class=\"nx\"\u003eit\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"Test name\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"c1\"\u003e//error:no-identical-title. Assign unique titles to tests\u003c/span\u003e\n\u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"section-5️⃣-ci-and-other-quality-measures\" class=\"anchor\" href=\"#section-5%EF%B8%8F%E2%83%A3-ci-and-other-quality-measures\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSection 5️⃣: CI and Other Quality Measures\u003c/h1\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-51-enrich-your-linters-and-abort-builds-that-have-linting-issues\" class=\"anchor\" href=\"#-%EF%B8%8F-51-enrich-your-linters-and-abort-builds-that-have-linting-issues\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 5.1 Enrich your linters and abort builds that have linting issues\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Linters are a free lunch, with 5 min setup you get for free an auto-pilot guarding your code and catching significant issue as you type. Gone are the days where linting was about cosmetics (no semi-colons!). Nowadays, Linters can catch severe issues like errors that are not thrown correctly and losing information. On top of your basic set of rules (like \u003ca href=\"https://www.npmjs.com/package/eslint-plugin-standard\" rel=\"nofollow\"\u003eESLint standard\u003c/a\u003e or \u003ca href=\"https://www.npmjs.com/package/eslint-config-airbnb\" rel=\"nofollow\"\u003eAirbnb style\u003c/a\u003e), consider including some specializing Linters like \u003ca href=\"https://www.npmjs.com/package/eslint-plugin-chai-expect\" rel=\"nofollow\"\u003eeslint-plugin-chai-expect\u003c/a\u003e that can discover tests without assertions, \u003ca href=\"https://www.npmjs.com/package/eslint-plugin-promise?activeTab=readme\" rel=\"nofollow\"\u003eeslint-plugin-promise\u003c/a\u003e can discover promises with no resolve (your code will never continue), \u003ca href=\"https://www.npmjs.com/package/eslint-plugin-security?activeTab=readme\" rel=\"nofollow\"\u003eeslint-plugin-security\u003c/a\u003e which can discover eager regex expressions that might get used for DOS attacks, and \u003ca href=\"https://www.npmjs.com/package/eslint-plugin-you-dont-need-lodash-underscore\" rel=\"nofollow\"\u003eeslint-plugin-you-dont-need-lodash-underscore\u003c/a\u003e is capable of alarming when the code uses utility library methods that are part of the V8 core methods like Lodash._map(…)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Consider a rainy day where your production keeps crashing but the logs don’t display the error stack trace. What happened? Your code mistakenly threw a non-error object and the stack trace was lost, a good reason for banging your head against a brick wall. A 5 min linter setup could detect this TYPO and save your day\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"thumbsdown-anti-pattern-example-the-wrong-error-object-is-thrown-mistakenly-no-stack-trace-will-appear-for-this-error-luckily-eslint-catches-the-next-production-bug\" class=\"anchor\" href=\"#thumbsdown-anti-pattern-example-the-wrong-error-object-is-thrown-mistakenly-no-stack-trace-will-appear-for-this-error-luckily-eslint-catches-the-next-production-bug\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👎 Anti-Pattern Example: The wrong Error object is thrown mistakenly, no stack-trace will appear for this error. Luckily, ESLint catches the next production bug\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-21-yoni-goldberg-eslint.jpeg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-21-yoni-goldberg-eslint.jpeg\" alt=\"alt text\" title=\"The wrong Error object is thrown mistakenly, no stack-trace will appear for this error. Luckily, ESLint catches the next production bug\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-52-shorten-the-feedback-loop-with-local-developer-ci\" class=\"anchor\" href=\"#-%EF%B8%8F-52-shorten-the-feedback-loop-with-local-developer-ci\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 5.2 Shorten the feedback loop with local developer-CI\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Using a CI with shiny quality inspections like testing, linting, vulnerabilities check, etc? Help developers run this pipeline also locally to solicit instant feedback and shorten the \u003ca href=\"https://www.gocd.org/2016/03/15/are-you-ready-for-continuous-delivery-part-2-feedback-loops/\" rel=\"nofollow\"\u003efeedback loop\u003c/a\u003e. Why? an efficient testing process constitutes many and iterative loops: (1) try-outs -\u0026gt; (2) feedback -\u0026gt; (3) refactor. The faster the feedback is, the more improvement iterations a developer can perform per-module and perfect the results. On the flip, when the feedback is late to come fewer improvement iterations could be packed into a single day, the team might already move forward to another topic/task/module and might not be up for refining that module.\u003c/p\u003e\n\u003cp\u003ePractically, some CI vendors (Example: \u003ca href=\"https://circleci.com/docs/2.0/local-cli/\" rel=\"nofollow\"\u003eCircleCI local CLI\u003c/a\u003e) allow running the pipeline locally. Some commercial tools like \u003ca href=\"https://wallabyjs.com/\" rel=\"nofollow\"\u003ewallaby provide highly-valuable \u0026amp; testing insights\u003c/a\u003e as a developer prototype (no affiliation). Alternatively, you may just add npm script to package.json that runs all the quality commands (e.g. test, lint, vulnerabilities) — use tools like \u003ca href=\"https://www.npmjs.com/package/concurrently\" rel=\"nofollow\"\u003econcurrently\u003c/a\u003e for parallelization and non-zero exit code if one of the tools failed. Now the developer should just invoke one command — e.g. ‘npm run quality’ — to get instant feedback. Consider also aborting a commit if the quality check failed using a githook (\u003ca href=\"https://github.com/typicode/husky\" rel=\"nofollow\"\u003ehusky can help\u003c/a\u003e)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e When the quality results arrive the day after the code, testing doesn’t become a fluent part of development rather an after the fact formal artifact\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-npm-scripts-that-perform-code-quality-inspection-all-are-run-in-parallel-on-demand-or-when-a-developer-is-trying-to-push-new-code\" class=\"anchor\" href=\"#clap-doing-it-right-example-npm-scripts-that-perform-code-quality-inspection-all-are-run-in-parallel-on-demand-or-when-a-developer-is-trying-to-push-new-code\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: npm scripts that perform code quality inspection, all are run in parallel on demand or when a developer is trying to push new code\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"s2\"\u003e\"scripts\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"inspect:sanity-testing\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"mocha **/**--test.js --grep \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003esanity\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"inspect:lint\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"eslint .\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"inspect:vulnerabilities\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"npm audit\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"inspect:license\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"license-checker --failOn GPLv2\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"inspect:complexity\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"plato .\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n\n    \u003cspan class=\"s2\"\u003e\"inspect:all\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"concurrently -c \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003ebgBlue.bold,bgMagenta.bold,yellow\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003enpm:inspect:quick-testing\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003enpm:inspect:lint\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003enpm:inspect:vulnerabilities\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e \u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003enpm:inspect:license\u003c/span\u003e\u003cspan class=\"se\"\u003e\\\"\u003c/span\u003e\u003cspan class=\"s2\"\u003e\"\u003c/span\u003e\n  \u003cspan class=\"p\"\u003e},\u003c/span\u003e\n  \u003cspan class=\"s2\"\u003e\"husky\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"s2\"\u003e\"hooks\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n      \u003cspan class=\"s2\"\u003e\"precommit\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"npm run inspect:all\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"s2\"\u003e\"prepush\"\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"s2\"\u003e\"npm run inspect:all\"\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️53-perform-e2e-testing-over-a-true-production-mirror\" class=\"anchor\" href=\"#-%EF%B8%8F53-perform-e2e-testing-over-a-true-production-mirror\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️5.3 Perform e2e testing over a true production-mirror\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e End to end (e2e) testing are the main challenge of every CI pipeline — creating an identical ephemeral production mirror on the fly with all the related cloud services can be tedious and expensive. Finding the best compromise is your game: \u003ca href=\"https://serverless.com/\" rel=\"nofollow\"\u003eDocker-compose\u003c/a\u003e allows crafting isolated dockerized environment with identical containers using a single plain text file but the backing technology (e.g. networking, deployment model) is different from real-world productions. You may combine it with \u003ca href=\"https://github.com/localstack/localstack\" rel=\"nofollow\"\u003e‘AWS Local’\u003c/a\u003e to work with a stub of the real AWS services. If you went \u003ca href=\"https://serverless.com/\" rel=\"nofollow\"\u003eserverless\u003c/a\u003e multiple frameworks like serverless and \u003ca href=\"https://docs.aws.amazon.com/lambda/latest/dg/serverless_app.html\" rel=\"nofollow\"\u003eAWS SAM\u003c/a\u003e allows the local invocation of FaaS code.\u003c/p\u003e\n\u003cp\u003eThe huge Kubernetes ecosystem is yet to formalize a standard convenient tool for local and CI-mirroring though many new tools are launched frequently. One approach is running a ‘minimized-Kubernetes’ using tools like \u003ca href=\"https://kubernetes.io/docs/setup/minikube/\" rel=\"nofollow\"\u003eMinikube\u003c/a\u003e and \u003ca href=\"https://microk8s.io/\" rel=\"nofollow\"\u003eMicroK8s\u003c/a\u003e which resemble the real thing only come with less overhead. Another approach is testing over a remote ‘real-Kubernetes’, some CI providers (e.g. \u003ca href=\"https://codefresh.io/\" rel=\"nofollow\"\u003eCodefresh\u003c/a\u003e) has native integration with Kubernetes environment and make it easy to run the CI pipeline over the real thing, others allow custom scripting against a remote Kubernetes.\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Using different technologies for production and testing demands maintaining two deployment models and keeps the developers and the ops team separated\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-example-a-ci-pipeline-that-generates-kubernetes-cluster-on-the-fly-credit-dynamic-environments-kubernetes\" class=\"anchor\" href=\"#clap-example-a-ci-pipeline-that-generates-kubernetes-cluster-on-the-fly-credit-dynamic-environments-kubernetes\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Example: a CI pipeline that generates Kubernetes cluster on the fly \u003ca href=\"https://container-solutions.com/dynamic-environments-kubernetes/\" rel=\"nofollow\" target=\"_blank\"\u003e(\u003c/a\u003e\u003ca href=\"https://container-solutions.com/dynamic-environments-kubernetes/\" rel=\"nofollow\"\u003eCredit: Dynamic-environments Kubernetes\u003c/a\u003e)\u003c/h3\u003e\n\u003cpre name=\"38d9\"\u003edeploy:\u003cbr\u003estage: deploy\u003cbr\u003eimage: registry.gitlab.com/gitlab-examples/kubernetes-deploy\u003cbr\u003escript:\u003cbr\u003e- ./configureCluster.sh $KUBE_CA_PEM_FILE $KUBE_URL $KUBE_TOKEN\u003cbr\u003e- kubectl create ns $NAMESPACE\u003cbr\u003e- kubectl create secret -n $NAMESPACE docker-registry gitlab-registry --docker-server=\"$CI_REGISTRY\" --docker-username=\"$CI_REGISTRY_USER\" --docker-password=\"$CI_REGISTRY_PASSWORD\" --docker-email=\"$GITLAB_USER_EMAIL\"\u003cbr\u003e- mkdir .generated\u003cbr\u003e- echo \"$CI_BUILD_REF_NAME-$CI_BUILD_REF\"\u003cbr\u003e- sed -e \"s/TAG/$CI_BUILD_REF_NAME-$CI_BUILD_REF/g\" templates/deals.yaml | tee \".generated/deals.yaml\"\u003cbr\u003e- kubectl apply --namespace $NAMESPACE -f .generated/deals.yaml\u003cbr\u003e- kubectl apply --namespace $NAMESPACE -f templates/my-sock-shop.yaml\u003cbr\u003eenvironment:\u003cbr\u003ename: test-for-ci\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️54-parallelize-test-execution\" class=\"anchor\" href=\"#-%EF%B8%8F54-parallelize-test-execution\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️5.4 Parallelize test execution\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e When done right, testing is your 24/7 friend providing almost instant feedback. In practice, executing 500 CPU-bounded unit test on a single thread can take too long. Luckily, modern test runners and CI platforms (like \u003ca href=\"https://github.com/facebook/jest\" rel=\"nofollow\"\u003eJest\u003c/a\u003e, \u003ca href=\"https://github.com/avajs/ava\" rel=\"nofollow\"\u003eAVA\u003c/a\u003e and \u003ca href=\"https://github.com/yandex/mocha-parallel-tests\" rel=\"nofollow\"\u003eMocha extensions\u003c/a\u003e) can parallelize the test into multiple processes and achieve significant improvement in feedback time. Some CI vendors do also parallelize tests across containers (!) which shortens the feedback loop even further. Whether locally over multiple processes, or over some cloud CLI using multiple machines — parallelizing demand keeping the tests autonomous as each might run on different processes\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Getting test results 1 hour long after pushing new code, as you already code the next features, is a great recipe for making testing less relevant\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-mocha-parallel--jest-easily-outrun-the-traditional-mocha-thanks-to-testing-parallelization-credit-javascript-test-runners-benchmark\" class=\"anchor\" href=\"#clap-doing-it-right-example-mocha-parallel--jest-easily-outrun-the-traditional-mocha-thanks-to-testing-parallelization-credit-javascript-test-runners-benchmark\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example: Mocha parallel \u0026amp; Jest easily outrun the traditional Mocha thanks to testing parallelization (\u003ca href=\"https://medium.com/dailyjs/javascript-test-runners-benchmark-3a78d4117b4\" rel=\"nofollow\"\u003eCredit: JavaScript Test-Runners Benchmark\u003c/a\u003e)\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-24-yonigoldberg-jest-parallel.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-24-yonigoldberg-jest-parallel.png\" alt=\"alt text\" title=\"Mocha parallel \u0026amp; Jest easily outrun the traditional Mocha thanks to testing parallelization (Credit: JavaScript Test-Runners Benchmark)\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️55-stay-away-from-legal-issues-using-license-and-plagiarism-check\" class=\"anchor\" href=\"#-%EF%B8%8F55-stay-away-from-legal-issues-using-license-and-plagiarism-check\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️5.5 Stay away from legal issues using license and plagiarism check\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Licensing and plagiarism issues are probably not your main concern right now, but why not tick this box as well in 10 minutes? A bunch of npm packages like \u003ca href=\"https://www.npmjs.com/package/license-checker\" rel=\"nofollow\"\u003elicense check\u003c/a\u003e and \u003ca href=\"https://www.npmjs.com/package/plagiarism-checker\" rel=\"nofollow\"\u003eplagiarism check\u003c/a\u003e (commercial with free plan) can be easily baked into your CI pipeline and inspect for sorrows like dependencies with restrictive licenses or code that was copy-pasted from Stack Overflow and apparently violates some copyrights\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Unintentionally, developers might use packages with inappropriate licenses or copy paste commercial code and run into legal issues\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-doing-it-right-example-1\" class=\"anchor\" href=\"#clap-doing-it-right-example-1\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Doing It Right Example:\u003c/h3\u003e\n\u003cpre lang=\"javascript\" class=\"highlight-javascript\"\u003e\u003cspan class=\"c1\"\u003e//install license-checker in your CI environment or also locally\u003c/span\u003e\n\u003cspan class=\"nx\"\u003enpm\u003c/span\u003e \u003cspan class=\"nx\"\u003einstall\u003c/span\u003e \u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003eg\u003c/span\u003e \u003cspan class=\"nx\"\u003elicense\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003echecker\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e//ask it to scan all licenses and fail with exit code other than 0 if it found unauthorized license. The CI system should catch this failure and stop the build\u003c/span\u003e\n\u003cspan class=\"nx\"\u003elicense\u003c/span\u003e\u003cspan class=\"o\"\u003e-\u003c/span\u003e\u003cspan class=\"nx\"\u003echecker\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u003c/span\u003e\u003cspan class=\"nx\"\u003esummary\u003c/span\u003e \u003cspan class=\"o\"\u003e--\u003c/span\u003e\u003cspan class=\"nx\"\u003efailOn\u003c/span\u003e \u003cspan class=\"nx\"\u003eBSD\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003cbr\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-25-nodejs-licsense.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-25-nodejs-licsense.png\" alt=\"alt text\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️56-constantly-inspect-for-vulnerable-dependencies\" class=\"anchor\" href=\"#-%EF%B8%8F56-constantly-inspect-for-vulnerable-dependencies\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️5.6 Constantly inspect for vulnerable dependencies\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Even the most reputable dependencies such as Express have known vulnerabilities. This can get easily tamed using community tools such as \u003ca href=\"https://docs.npmjs.com/getting-started/running-a-security-audit\" rel=\"nofollow\"\u003enpm audit\u003c/a\u003e, or commercial tools like \u003ca href=\"https://snyk.io/\" rel=\"nofollow\"\u003esnyk\u003c/a\u003e (offer also a free community version). Both can be invoked from your CI on every build\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Keeping your code clean from vulnerabilities without dedicated tools will require to constantly follow online publications about new threats. Quite tedious\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-example-npm-audit-result\" class=\"anchor\" href=\"#clap-example-npm-audit-result\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Example: NPM Audit result\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-26-npm-audit-snyk.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-26-npm-audit-snyk.png\" alt=\"alt text\" title=\"NPM Audit result\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️57-automate-dependency-updates\" class=\"anchor\" href=\"#-%EF%B8%8F57-automate-dependency-updates\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️5.7 Automate dependency updates\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Yarn and npm latest introduction of package-lock.json introduced a serious challenge (the road to hell is paved with good intentions) — by default now, packages are no longer getting updates. Even a team running many fresh deployments with ‘npm install’ \u0026amp; ‘npm update’ won’t get any new updates. This leads to subpar dependent packages versions at best or to vulnerable code at worst. Teams now rely on developers goodwill and memory to manually update the package.json or use tools \u003ca href=\"https://www.npmjs.com/package/npm-check-updates\" rel=\"nofollow\"\u003elike ncu\u003c/a\u003e manually. A more reliable way could be to automate the process of getting the most reliable dependency versions, though there are no silver bullet solutions yet there are two possible automation roads:\u003c/p\u003e\n\u003cp\u003e(1) CI can fail builds that have obsolete dependencies — using tools like \u003ca href=\"https://docs.npmjs.com/cli/outdated\" rel=\"nofollow\"\u003e‘npm outdated’\u003c/a\u003e or ‘npm-check-updates (ncu)’ . Doing so will enforce developers to update dependencies.\u003c/p\u003e\n\u003cp\u003e(2) Use commercial tools that scan the code and automatically send pull requests with updated dependencies. One interesting question remaining is what should be the dependency update policy — updating on every patch generates too many overhead, updating right when a major is released might point to an unstable version (many packages found vulnerable on the very first days after being released, \u003ca href=\"https://nodesource.com/blog/a-high-level-post-mortem-of-the-eslint-scope-security-incident/\" rel=\"nofollow\"\u003esee the\u003c/a\u003e eslint-scope incident).\u003c/p\u003e\n\u003cp\u003eAn efficient update policy may allow some ‘vesting period’ — let the code lag behind the \u003ca href=\"https://github.com/latest\" class=\"user-mention\" rel=\"nofollow\"\u003e@latest\u003c/a\u003e for some time and versions before considering the local copy as obsolete (e.g. local version is 1.3.1 and repository version is 1.3.8)\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e Your production will run packages that have been explicitly tagged by their author as risky\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-example-ncu-can-be-used-manually-or-within-a-ci-pipeline-to-detect-to-which-extent-the-code-lag-behind-the-latest-versions\" class=\"anchor\" href=\"#clap-example-ncu-can-be-used-manually-or-within-a-ci-pipeline-to-detect-to-which-extent-the-code-lag-behind-the-latest-versions\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Example: \u003ca href=\"https://www.npmjs.com/package/npm-check-updates\" rel=\"nofollow\"\u003encu\u003c/a\u003e can be used manually or within a CI pipeline to detect to which extent the code lag behind the latest versions\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/bp-27-yoni-goldberg-npm.png\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/bp-27-yoni-goldberg-npm.png\" alt=\"alt text\" title=\"ncu can be used manually or within a CI pipeline to detect to which extent the code lag behind the latest versions\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-58-other-non-node-related-ci-tips\" class=\"anchor\" href=\"#-%EF%B8%8F-58-other-non-node-related-ci-tips\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 5.8 Other, non-Node related, CI tips\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e This post is focused on testing advice that is related to, or at least can be exemplified with Node JS. This bullet, however, groups few non-Node related tips that are well-known\u003c/p\u003e\n \u003col\u003e\n\u003cli name=\"e3e4\"\u003eUse a declarative syntax. This is the only option for most vendors but older versions of Jenkins allows using code or UI\u003c/li\u003e\n\u003cli name=\"1fdc\"\u003eOpt for a vendor that has native Docker support\u003c/li\u003e\n\u003cli name=\"edcd\"\u003eFail early, run your fastest tests first. Create a ‘Smoke testing’ step/milestone that groups multiple fast inspections (e.g. linting, unit tests) and provide snappy feedback to the code committer\u003c/li\u003e\n\u003cli name=\"0375\"\u003eMake it easy to skim-through all build artifacts including test reports, coverage reports, mutation reports, logs, etc\u003c/li\u003e\n\u003cli name=\"df82\"\u003eCreate multiple pipelines/jobs for each event, reuse steps between them. For example, configure a job for feature branch commits and a different one for master PR. Let each reuse logic using shared steps (most vendors provide some mechanism for code reuse)\u003c/li\u003e\n\u003cli name=\"19b0\"\u003eNever embed secrets in a job declaration, grab them from a secret store or from the job’s configuration\u003c/li\u003e\n\u003cli name=\"b70d\"\u003eExplicitly bump version in a release build or at least ensure the developer did so\u003c/li\u003e\n\u003cli name=\"957c\"\u003eBuild only once and perform all the inspections over the single build artifact (e.g. Docker image)\u003c/li\u003e\n\u003cli name=\"339b\"\u003eTest in an ephemeral environment that doesn’t drift state between builds. Caching node_modules might be the only exception\u003c/li\u003e\n\u003c/ol\u003e\n\u003cbr\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e You‘ll miss years of wisdom\u003c/p\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"-️-59-build-matrix-run-the-same-ci-steps-using-multiple-node-versions\" class=\"anchor\" href=\"#-%EF%B8%8F-59-build-matrix-run-the-same-ci-steps-using-multiple-node-versions\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e⚪ ️ 5.9 Build matrix: Run the same CI steps using multiple Node versions\u003c/h2\u003e\n\u003cp\u003e✅ \u003cstrong\u003eDo:\u003c/strong\u003e Quality checking is about serendipity, the more ground you cover the luckier you get in detecting issues early. When developing reusable packages or running a multi-customer production with various configuration and Node versions, the CI must run the pipeline of tests over all the permutations of configurations. For example, assuming we use MySQL for some customers and Postgres for others — some CI vendors support a feature called ‘Matrix’ which allow running the suit of testing against all permutations of MySQL, Postgres and multiple Node version like 8, 9 and 10. This is done using configuration only without any additional effort (assuming you have testing or any other quality checks). Other CIs who doesn’t support Matrix might have extensions or tweaks to allow that\n\u003cbr\u003e\u003c/p\u003e\n\u003cp\u003e❌ \u003cstrong\u003eOtherwise:\u003c/strong\u003e So after doing all that hard work of writing testing are we going to let bugs sneak in only because of configuration issues?\u003c/p\u003e\n\u003cbr\u003e\n\u003cdetails\u003e\u003csummary\u003e✏ \u003cb\u003eCode Examples\u003c/b\u003e\u003c/summary\u003e\n\u003cbr\u003e\n\u003ch3\u003e\n\u003ca id=\"clap-example-using-travis-ci-vendor-build-definition-to-run-the-same-test-over-multiple-node-versions\" class=\"anchor\" href=\"#clap-example-using-travis-ci-vendor-build-definition-to-run-the-same-test-over-multiple-node-versions\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e👏 Example: Using Travis (CI vendor) build definition to run the same test over multiple Node versions\u003c/h3\u003e\n\u003cpre name=\"f909\"\u003elanguage: node_js\u003cbr\u003enode_js:\u003cbr\u003e  - \"7\"\u003cbr\u003e  - \"6\"\u003cbr\u003e  - \"5\"\u003cbr\u003e  - \"4\"\u003cbr\u003einstall:\u003cbr\u003e  - npm install\u003cbr\u003escript:\u003cbr\u003e  - npm run test\u003c/pre\u003e\n\u003c/details\u003e\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"team\" class=\"anchor\" href=\"#team\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTeam\u003c/h1\u003e\n\u003ch2\u003e\n\u003ca id=\"yoni-goldberg\" class=\"anchor\" href=\"#yoni-goldberg\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eYoni Goldberg\u003c/h2\u003e\n\u003cbr\u003e\n\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/blob/master/assets/yoni-goldberg.jpg\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg width=\"480px\" src=\"https://raw.githubusercontent.com/goldbergyoni/javascript-testing-best-practices/master/assets/yoni-goldberg.jpg\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\n\u003cbr\u003e\n\u003cp\u003e\u003cstrong\u003eRole:\u003c/strong\u003e Writer\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAbout:\u003c/strong\u003e I'm an independent consultant who works with Fortune 500 companies and garage startups on polishing their JS \u0026amp; Node.js applications. More than any other topic I'm fascinated by and aims to master the art of testing. I'm also the author of \u003ca href=\"https://github.com/goldbergyoni/nodebestpractices\" rel=\"nofollow\"\u003eNode.js Best Practices\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e📗 Online Course:\u003c/strong\u003e Liked this guide and wish to take your testing skills to the extreme? Consider visiting my comprehensive course \u003ca href=\"https://www.testjavascript.com\" rel=\"nofollow\"\u003eTesting Node.js \u0026amp; JavaScript From A To Z\u003c/a\u003e\u003c/p\u003e\n\u003cbr\u003e\n\u003cp\u003e\u003cstrong\u003eFollow:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://twitter.com/goldbergyoni/\" rel=\"nofollow\"\u003e🐦 Twitter\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://testjavascript.com/contact-2/\" rel=\"nofollow\"\u003e📞 Contact\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://testjavascript.com/newsletter//\" rel=\"nofollow\"\u003e✉️ Newsletter\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cbr\u003e\n\u003chr\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"bruno-scheufler\" class=\"anchor\" href=\"#bruno-scheufler\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://github.com/BrunoScheufler\" rel=\"nofollow\"\u003eBruno Scheufler\u003c/a\u003e\n\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eRole:\u003c/strong\u003e Tech reviewer and advisor\u003c/p\u003e\n\u003cp\u003eTook care to revise, improve, lint and polish all the texts\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAbout:\u003c/strong\u003e full-stack web engineer, Node.js \u0026amp; GraphQL enthusiast\u003c/p\u003e\n\u003chr\u003e\n\u003cbr\u003e\n\u003ch2\u003e\n\u003ca id=\"ido-richter\" class=\"anchor\" href=\"#ido-richter\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://github.com/idori\" rel=\"nofollow\"\u003eIdo Richter\u003c/a\u003e\n\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eRole:\u003c/strong\u003e Concept, design and great advice\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAbout:\u003c/strong\u003e A savvy frontend developer, CSS expert and emojis freak\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"kyle-martin\" class=\"anchor\" href=\"#kyle-martin\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://github.com/js-kyle\" rel=\"nofollow\"\u003eKyle Martin\u003c/a\u003e\n\u003c/h2\u003e\n\u003cp\u003e\u003cstrong\u003eRole:\u003c/strong\u003e Helps keep this project running, and reviews security related practices\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAbout:\u003c/strong\u003e Loves working on Node.js projects and web application security.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"contributors-\" class=\"anchor\" href=\"#contributors-\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eContributors ✨\u003c/h2\u003e\n\u003cp\u003eThanks goes to these wonderful people who have contributed to this repository!\u003c/p\u003e\n\n\n\n\u003ctable\u003e\n  \u003ctr\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"http://geospatialscott.blogspot.com/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/1326248?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eScott Davis\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-stdavis\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/AdrienRedon\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/5978436?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eAdrien REDON\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-AdrienRedon\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://twitter.com/NoriSte\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/173663?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eStefano Magni\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-NoriSte\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://www.joer.im\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/47742486?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eYeoh Joer\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-yjoer\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"http://jhonnymoreira.dev\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/2177742?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJhonny Moreira\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-jhonnymoreira\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/Germanika\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/8846678?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eIan Germann\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-Germanika\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/AbdelrahmanHafez\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/19984935?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eHafez\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-AbdelrahmanHafez\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"http://www.ruxandrafediuc.com\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/11021586?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eRuxandra Fediuc\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-ruxandrafed\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/jacklee814\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/9951291?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJack\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-jacklee814\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://www.petercarrero.com\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/231727?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003ePeter Carrero\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-aloyr\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/huhgawz\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/369338?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eHuhgawz\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-huhgawz\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/haakonmb\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/7099302?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eHaakon Borch\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-haakonmb\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://jaimemendoza.com/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/5395811?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJaime Mendoza\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-jaimemendozadev\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/camerondunford\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/840612?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eCameron Dunford\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-camerondunford\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/shadowspawn\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/15719847?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJohn Gee\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-shadowspawn\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/aurelijusrozenas\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/3273544?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eAurelijus Rožėnas\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-aurelijusrozenas\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"http://aaronshivers.com\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/42848750?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eAaron\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-aaronshivers\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://tomdoes.tech/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/8683577?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eTom Nagle\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-tomanagle\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/yvesyao\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/7723729?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eYves yao\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-yvesyao\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/Userbit\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/34487074?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eUserbit\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-Userbit\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://glaucialemos.netlify.com/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/1631477?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eGlaucia Lemos\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#maintenance-glaucia86\" title=\"Maintenance\"\u003e🚧\u003c/a\u003e\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://twitter.com/koooge\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/7419215?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003ekoooge\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-koooge\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://twitter.com/michalbiesiada\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/18367606?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eMichal\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-mbiesiad\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"http://roywalker.me\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/611846?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eroywalker\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-roywalker\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://dangen-effy.github.io/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/23185799?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003edangen\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-dangen-effy\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://dev.to/mbiesiad\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/60202305?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003ebiesiadamich\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-biesiadamich\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://tarojsx.github.io\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/127009?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eYanlin Jiang\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-cncolder\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/sanguino\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/2077168?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003esanguino\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-sanguino\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n  \u003c/tr\u003e\n  \u003ctr\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/MorganGeek\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/3721240?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eMorgan\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-MorganGeek\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://luk4s.dev\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/8350985?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eLukas Bischof\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"https://github.com/goldbergyoni/javascript-testing-best-practices/commits?author=lukasbischof\" title=\"Tests\" rel=\"nofollow\"\u003e⚠️\u003c/a\u003e \u003ca href=\"#content-lukasbischof\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://juanmaruiz.surge.sh\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars2.githubusercontent.com/u/1837650?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJuanMa Ruiz\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-JuanMaRuiz\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://luisangelorjr.com.br\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/22268900?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eLuís Ângelo Rodrigues Jr.\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-luisangelorjr\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://jfernandezpe.wordpress.com/\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars0.githubusercontent.com/u/12046620?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJosé Fernández\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-jfernandezpe\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"http://www.linkedin.com/in/AlejandroGutierrezB\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars3.githubusercontent.com/u/56408597?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eAlejandro Gutierrez Barcenilla\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-AlejandroGutierrezB\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n    \u003ctd align=\"center\"\u003e\n\u003ca href=\"https://github.com/jasonandmonte\" rel=\"nofollow\"\u003e\u003cimg src=\"https://avatars1.githubusercontent.com/u/30088000?v=4\" width=\"100px;\" alt=\"\" style=\"max-width:100%;\"\u003e\u003cbr\u003e\u003csub\u003e\u003cb\u003eJason\u003c/b\u003e\u003c/sub\u003e\u003c/a\u003e\u003cbr\u003e\u003ca href=\"#content-jasonandmonte\" title=\"Content\"\u003e🖋\u003c/a\u003e\n\u003c/td\u003e\n  \u003c/tr\u003e\n\u003c/table\u003e\n\n\n\u003c/body\u003e\u003c/html\u003e\n","project_id":195226340,"name":"javascript-testing-best-practices","owner_login":"goldbergyoni","description":"📗🌐 🚢 Comprehensive and exhaustive JavaScript \u0026 Node.js testing best practices (January 2021)","pushed_at":"2021-01-01T09:24:56.000Z","stargazers_count":10455,"open_issues_count":20,"has_downloads":true,"archived":false,"license_key":"mit","homepage":"https://testjavascript.com/","private":false,"project_created_at":"2019-07-04T11:08:12.000Z","project_updated_at":"2021-01-14T02:27:54.000Z","language":null,"added_language_topic":false},"categories":[{"name":"Advertising","topicsCount":10},{"name":"Application Programming Interfaces","topicsCount":124},{"name":"Applications","topicsCount":192},{"name":"Artificial Intelligence","topicsCount":78},{"name":"Blockchain","topicsCount":73},{"name":"Build Tools","topicsCount":113},{"name":"Cloud Computing","topicsCount":80},{"name":"Code Quality","topicsCount":28},{"name":"Collaboration","topicsCount":32},{"name":"Command Line Interface","topicsCount":49},{"name":"Community","topicsCount":83},{"name":"Companies","topicsCount":60},{"name":"Compilers","topicsCount":63},{"name":"Computer Science","topicsCount":80},{"name":"Configuration Management","topicsCount":42},{"name":"Content Management","topicsCount":175},{"name":"Control Flow","topicsCount":213},{"name":"Data Formats","topicsCount":78},{"name":"Data Processing","topicsCount":276},{"name":"Data Storage","topicsCount":135},{"name":"Economics","topicsCount":64},{"name":"Frameworks","topicsCount":215},{"name":"Games","topicsCount":129},{"name":"Graphics","topicsCount":110},{"name":"Hardware","topicsCount":152},{"name":"Integrated Development Environments","topicsCount":49},{"name":"Learning Resources","topicsCount":166},{"name":"Legal","topicsCount":29},{"name":"Libraries","topicsCount":129},{"name":"Lists Of Projects","topicsCount":22},{"name":"Machine Learning","topicsCount":347},{"name":"Mapping","topicsCount":64},{"name":"Marketing","topicsCount":15},{"name":"Mathematics","topicsCount":55},{"name":"Media","topicsCount":239},{"name":"Messaging","topicsCount":98},{"name":"Networking","topicsCount":315},{"name":"Operating Systems","topicsCount":89},{"name":"Operations","topicsCount":121},{"name":"Package Managers","topicsCount":55},{"name":"Programming Languages","topicsCount":245},{"name":"Runtime Environments","topicsCount":100},{"name":"Science","topicsCount":42},{"name":"Security","topicsCount":396},{"name":"Social Media","topicsCount":27},{"name":"Software Architecture","topicsCount":72},{"name":"Software Development","topicsCount":72},{"name":"Software Performance","topicsCount":58},{"name":"Software Quality","topicsCount":133},{"name":"Text Editors","topicsCount":49},{"name":"Text Processing","topicsCount":136},{"name":"User Interface","topicsCount":330},{"name":"User Interface Components","topicsCount":514},{"name":"Version Control","topicsCount":30},{"name":"Virtualization","topicsCount":71},{"name":"Web Browsers","topicsCount":42},{"name":"Web Servers","topicsCount":26},{"name":"Web User Interface","topicsCount":210},{"name":"All Projects","topicsCount":0}],"advertisement":{"variation":"project","title":"Become A Software Engineer At Top Companies","description":"Identify your strengths with a free online coding quiz, and skip resume and recruiter screens at multiple companies at once.  It's free, confidential, includes a free flight and hotel, along with help to study to pass interviews and negotiate a high salary!","url":"https://triplebyte.com/a/PGNifkM/pt2"},"nonCommercial":false,"nonDerivative":false}</script>
      



    <!-- load synchronously before app bundle so adsbygoogle is always defined, google's new ad code doesn't seem to like this, at least for the initial review  -->
    <!-- try loading programatically and async with a callback to push the ads and see if it helps page load speed -->
    <!--script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script-->
    <script src="/packs/root-bundle-1f53b6db74aa6b1bef19.js"></script>
  </body>
</html>
